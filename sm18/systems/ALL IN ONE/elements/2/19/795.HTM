<H1 id=nav_point_23>&#31532; 2 &#31456;&#12288;Spring Framework &#20013;&#30340; IoC &#23481;&#22120;</H1>
<BLOCKQUOTE>
<P><STRONG>&#26412;&#31456;&#20869;&#23481;</STRONG></P>
<UL>
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;>IoC &#23481;&#22120;&#30340;&#22522;&#30784;&#30693;&#35782; 
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;>Spring Bean &#30340;&#22522;&#30784;&#30693;&#35782; 
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;>&#22914;&#20309;&#24863;&#30693;&#24182;&#33258;&#23450;&#20041;&#19968;&#20123;&#34892;&#20026; 
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;>&#29615;&#22659;&#19982;&#20219;&#21153;&#30340;&#25277;&#35937; </LI></UL></BLOCKQUOTE>
<P><STRONG>&#25511;&#21046;&#21453;&#36716;</STRONG>&#65288;Inversion of Control&#65292;IoC&#65289;&#19982;<STRONG>&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</STRONG>&#65288;Aspect Oriented Programming&#65292;AOP&#65289;&#26159; Spring Framework &#20013;&#26368;&#37325;&#35201;&#30340;&#20004;&#20010;&#27010;&#24565;&#65292;&#26412;&#31456;&#20250;&#30528;&#37325;&#20171;&#32461;&#21069;&#32773;&#65292;&#20869;&#23481;&#21253;&#25324; IoC &#23481;&#22120;&#20197;&#21450;&#23481;&#22120;&#20013; Bean &#30340;&#22522;&#30784;&#30693;&#35782;&#12290;&#23481;&#22120;&#20026;&#25105;&#20204;&#39044;&#30041;&#20102;&#19981;&#23569;&#25193;&#23637;&#28857;&#65292;&#35753;&#25105;&#20204;&#33021;&#23450;&#21046;&#21508;&#31181;&#34892;&#20026;&#65292;&#26412;&#31456;&#30340;&#26368;&#21518;&#25105;&#20250;&#21644;&#22823;&#23478;&#19968;&#36215;&#20102;&#35299;&#19968;&#20123;&#23481;&#22120;&#25552;&#20379;&#30340;&#25277;&#35937;&#26426;&#21046;&#12290;&#36890;&#36807;&#36825;&#20123;&#20171;&#32461;&#65292;&#24076;&#26395;&#22823;&#23478;&#21487;&#20197;&#23545; IoC &#23481;&#22120;&#26377;&#20010;&#22823;&#27010;&#30340;&#35748;&#35782;&#12290;</P>
<H2 id=nav_point_24>2.1&#12288;IoC &#23481;&#22120;&#22522;&#30784;&#30693;&#35782;</H2>
<P>Spring Framework &#20026; Java &#24320;&#21457;&#32773;&#25552;&#20379;&#20102;&#24378;&#22823;&#30340;&#25903;&#25345;&#65292;&#24320;&#21457;&#32773;&#21487;&#20197;&#25226;&#24213;&#23618;&#22522;&#30784;&#30340;&#26434;&#20107;&#25243;&#32473; Spring Framework&#65292;&#33258;&#24049;&#21017;&#19987;&#24515;&#20110;&#19994;&#21153;&#36923;&#36753;&#12290;&#26412;&#33410;&#25105;&#20204;&#20250;&#32858;&#28966;&#22312; Spring Framework &#30340;&#26680;&#24515;&#33021;&#21147;&#19978;&#65292;&#30528;&#37325;&#20102;&#35299; IoC &#23481;&#22120;&#30340;&#22522;&#30784;&#30693;&#35782;&#12290;</P>
<H3 id=nav_point_25>2.1.1&#12288;&#20160;&#20040;&#26159; IoC &#23481;&#22120;</H3><SPAN class=extract>
<P>&#22312;&#20171;&#32461; Spring Framework &#30340; IoC &#23481;&#22120;&#21069;&#65292;&#25105;&#20204;&#26377;&#24517;&#35201;&#20808;&#29702;&#35299;&#20160;&#20040;&#26159;&#8220;&#25511;&#21046;&#21453;&#36716;&#8221;&#12290;<STRONG>&#25511;&#21046;&#21453;&#36716;</STRONG>&#26159;&#19968;&#31181;&#20915;&#23450;&#23481;&#22120;&#22914;&#20309;&#35013;&#37197;&#32452;&#20214;&#30340;<STRONG>&#27169;&#24335;</STRONG>&#12290;&#21482;&#35201;&#36981;&#24490;&#36825;&#31181;&#27169;&#24335;&#65292;&#25353;&#29031;&#19968;&#23450;&#30340;&#35268;&#21017;&#65292;&#23481;&#22120;&#23601;&#33021;&#23558;&#32452;&#20214;&#32452;&#35013;&#36215;&#26469;&#12290;&#36825;&#37324;&#25152;&#35859;&#30340;<STRONG>&#23481;&#22120;</STRONG>&#65292;&#23601;&#26159;&#29992;&#26469;&#21019;&#24314;&#32452;&#20214;&#24182;&#23545;&#23427;&#20204;&#36827;&#34892;&#31649;&#29702;&#30340;&#22320;&#26041;&#12290;&#23427;&#29301;&#25199;&#21040;&#32452;&#20214;&#35813;&#22914;&#20309;&#23450;&#20041;&#12289;&#32452;&#20214;&#35813;&#20309;&#26102;&#21019;&#24314;&#12289;&#21448;&#35813;&#20309;&#26102;&#38144;&#27585;&#12289;&#23427;&#20204;&#20114;&#30456;&#20043;&#38388;&#26159;&#20160;&#20040;&#20851;&#31995;&#31561;&#8212;&#8212;&#36825;&#20123;&#26412;&#35813;&#22312;&#32452;&#20214;&#20869;&#37096;&#31649;&#29702;&#30340;&#19996;&#35199;&#65292;&#34987;&#20174;&#32452;&#20214;&#20013;&#21093;&#31163;&#20102;&#20986;&#26469;&#12290;</P>
<P>&#38656;&#35201;&#30528;&#37325;&#25351;&#20986;&#19968;&#28857;&#65292;&#32452;&#20214;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#21407;&#20808;&#26159;&#30001;&#32452;&#20214;&#33258;&#24049;&#23450;&#20041;&#30340;&#65292;&#24182;&#22312;&#20854;&#20869;&#37096;&#32500;&#25252;&#65292;&#32780;&#29616;&#22312;&#36825;&#20123;&#20381;&#36182;&#34987;&#23450;&#20041;&#22312;&#23481;&#22120;&#20013;&#65292;&#30001;&#23481;&#22120;&#26469;&#32479;&#19968;&#31649;&#29702;&#65292;&#24182;&#25454;&#27492;&#23558;&#20854;&#20381;&#36182;&#30340;&#20869;&#23481;&#27880;&#20837;&#32452;&#20214;&#20013;&#12290;&#22312;&#22909;&#33713;&#22366;&#65292;&#28436;&#33402;&#20844;&#21496;&#20855;&#26377;&#26497;&#22823;&#30340;&#25511;&#21046;&#26435;&#65292;&#33402;&#20154;&#23558;&#31616;&#21382;&#25237;&#36882;&#32473;&#28436;&#33402;&#20844;&#21496;&#21518;&#23601;&#21482;&#33021;&#31561;&#24453;&#65292;&#34987;&#21160;&#25509;&#21463;&#28436;&#33402;&#20844;&#21496;&#30340;&#23433;&#25490;&#12290;&#36825;&#23601;&#26159;&#30693;&#21517;&#30340;&#22909;&#33713;&#22366;&#21407;&#21017;&#65292;&#23427;&#21487;&#20197;&#24635;&#32467;&#20026;&#36825;&#26679;&#30340;&#19968;&#21477;&#35805;&#8220;&#19981;&#35201;&#32473;&#25105;&#20204;&#25171;&#30005;&#35805;&#65292;&#25105;&#20204;&#20250;&#25171;&#32473;&#20320;&#30340;&#8221;&#65288;Don't call us, we'll call you&#65289;&#12290;IoC &#23481;&#22120;&#32972;&#21518;&#30340;&#24605;&#24819;&#27491;&#26159;&#22909;&#33713;&#22366;&#21407;&#21017;&#65292;&#21363;&#25152;&#26377;&#30340;&#32452;&#20214;&#37117;&#35201;&#34987;&#21160;&#25509;&#21463;&#23481;&#22120;&#30340;&#25511;&#21046;&#12290;</P></SPAN>
<P>Martin Fowler<SPAN class=&#27880;&#37322;&#32534;&#21495;>1</SPAN> &#37027;&#31687;&#33879;&#21517;&#30340;&#8220;Inversion of Control Containers and the Dependency Injection pattern&#8221;<SPAN class=&#27880;&#37322;&#32534;&#21495;>2</SPAN> &#20013;&#25552;&#21040;&#8220;&#25511;&#21046;&#21453;&#36716;&#8221;&#19981;&#33021;&#24456;&#22909;&#22320;&#25551;&#36848;&#36825;&#20010;&#27169;&#24335;&#65292;&#8220;&#20381;&#36182;&#27880;&#20837;&#8221;&#65288;Dependency Injection&#65289;&#33021;&#26356;&#22909;&#22320;&#25551;&#36848;&#23427;&#30340;&#29305;&#28857;&#12290;&#27491;&#22240;&#22914;&#27492;&#65292;&#25105;&#20204;&#32463;&#24120;&#20250;&#30475;&#21040;&#36825;&#20004;&#20010;&#35789;&#19968;&#21516;&#20986;&#29616;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>1</SPAN>Martin Fowler&#65292;&#30693;&#21517;&#20225;&#19994;&#32423;&#24212;&#29992;&#19987;&#23478;&#12289;&#25216;&#26415;&#20316;&#23478;&#19982;&#28436;&#35828;&#23478;&#12289;ThoughtWorks &#20844;&#21496;&#39318;&#24109;&#31185;&#23398;&#23478;&#12290;&#20182;&#26159;&#12298;&#25935;&#25463;&#36719;&#20214;&#24320;&#21457;&#23459;&#35328;&#12299;&#30340;&#25552;&#20986;&#32773;&#20043;&#19968;&#65292;&#33879;&#26377;&#12298;&#37325;&#26500;&#12299;&#21644;&#12298;&#20225;&#19994;&#24212;&#29992;&#26550;&#26500;&#27169;&#24335;&#12299;&#31561;&#22810;&#37096;&#32463;&#20856;&#33879;&#20316;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>2</SPAN>&#33521;&#25991;&#21407;&#25991;&#35814;&#35265; Martin Fowler &#30340;&#20010;&#20154;&#32593;&#31449;&#65292;&#20013;&#25991;&#35793;&#25991;&#30001;&#29066;&#33410;&#32763;&#35793;&#65292;&#21487;&#22312;&#8220;Thoughtworks &#27934;&#35265;&#8221;&#32593;&#31449;&#25628;&#32034;&#8220;IoC &#23481;&#22120;&#21644; Dependency Injection &#27169;&#24335;&#8221;&#12290;</P>
<P>Spring Framework&#12289;Google Guice&#12289;PicoContainer &#37117;&#25552;&#20379;&#20102;&#36825;&#26679;&#30340;&#23481;&#22120; <SPAN class=&#27880;&#37322;&#32534;&#21495;>3</SPAN>&#65292;&#21518;&#25991;&#20013;&#25105;&#20204;&#20063;&#20250;&#25226; Spring Framework &#30340; IoC &#23481;&#22120;&#31216;&#20026; <STRONG>Spring &#23481;&#22120;</STRONG>&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>3</SPAN>&#35814;&#24773;&#35831;&#35265; GitHub &#30340; Google Guice &#23448;&#32593;&#12289;PicoContainer &#23448;&#32593;&#12290;</P>
<P>&#22270; 2-1 &#26159; Spring Framework &#30340;&#23448;&#26041;&#25991;&#26723;&#20013;&#30340;&#19968;&#24133;&#22270;&#65292;&#23427;&#38750;&#24120;&#30452;&#35266;&#22320;&#34920;&#36798;&#20102; Spring IoC &#23481;&#22120;&#30340;&#20316;&#29992;&#65292;&#21363;&#23558;&#19994;&#21153;&#23545;&#35937;&#65288;&#20063;&#23601;&#26159;&#32452;&#20214;&#65292;&#22312; Spring &#20013;&#36825;&#20123;&#32452;&#20214;&#34987;&#31216;&#20026; Bean&#65292;2.2 &#33410;&#20250;&#35814;&#32454;&#20171;&#32461; Bean &#30340;&#20869;&#23481;&#65289;&#21644;&#20851;&#20110;&#32452;&#20214;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#65288;&#27604;&#22914;&#20381;&#36182;&#20851;&#31995;&#65289;&#36755;&#20837; Spring &#23481;&#22120;&#20013;&#65292;&#23481;&#22120;&#23601;&#33021;&#20026;&#25105;&#20204;&#32452;&#35013;&#20986;&#19968;&#20010;&#21487;&#29992;&#30340;&#31995;&#32479;&#12290;</P>
<P class=&#22270;><img style="HEIGHT: 495px; WIDTH: 764px" alt={%} src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00756.jpeg" width=1789 height=2309></P>
<P class=p-img-title><STRONG>&#22270; 2-1&#12288;Spring IoC &#23481;&#22120;</STRONG></P>
<P>Spring Framework &#30340;&#27169;&#22359;&#25353;&#21151;&#33021;&#36827;&#34892;&#20102;&#25286;&#20998;&#65292;spring-core &#21644; spring-beans &#27169;&#22359;&#25552;&#20379;&#20102;&#26368;&#22522;&#30784;&#30340;&#21151;&#33021;&#65292;&#20854;&#20013;&#23601;&#21253;&#21547;&#20102; IoC &#23481;&#22120;&#12290;<CODE>BeanFactory</CODE> &#26159;&#23481;&#22120;&#30340;&#22522;&#30784;&#25509;&#21475;&#65292;&#25105;&#20204;&#24179;&#26102;&#20351;&#29992;&#30340;&#21508;&#31181;&#23481;&#22120;&#37117;&#26159;&#23427;&#30340;&#23454;&#29616;&#65292;&#21518;&#25991;&#20013;&#20250;&#30475;&#21040;&#36825;&#20123;&#23454;&#29616;&#30340;&#20855;&#20307;&#29992;&#27861;&#19982;&#21306;&#21035;&#12290;</P>
<H3 id=nav_point_26>2.1.2&#12288;&#23481;&#22120;&#30340;&#21021;&#22987;&#21270;</H3>
<P>&#20174;&#22270; 2-1 &#20013;&#21487;&#20197;&#30475;&#21040;&#65292;Spring &#23481;&#22120;&#38656;&#35201;&#37197;&#32622;&#20803;&#25968;&#25454;&#21644;&#19994;&#21153;&#23545;&#35937;&#65292;&#22240;&#27492;&#22312;&#21021;&#22987;&#21270;&#23481;&#22120;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#25552;&#20379;&#36825;&#20123;&#20449;&#24687;&#12290;&#26089;&#26399;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#21482;&#33021;&#20197; XML &#37197;&#32622;&#25991;&#20214;&#30340;&#24418;&#24335;&#25552;&#20379;&#65292;&#20174; 2.5 &#29256;&#26412;&#24320;&#22987;&#65292;&#23448;&#26041;&#36880;&#27493;&#25552;&#20379;&#20102; XML &#25991;&#20214;&#20197;&#22806;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#27604;&#22914;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#21644;&#22522;&#20110; Java &#31867;&#30340;&#37197;&#32622;&#65292;&#26412;&#20070;&#20013;&#30340;&#22823;&#37096;&#20998;&#31034;&#20363;&#23558;&#37319;&#29992;&#21518;&#20004;&#31181;&#26041;&#24335;&#36827;&#34892;&#37197;&#32622;&#12290;</P>
<P>&#23481;&#22120;&#21021;&#22987;&#21270;&#30340;&#22823;&#33268;&#27493;&#39588;&#22914;&#19979;&#65288;&#22312;&#26412;&#31456;&#21518;&#32493;&#30340;&#20960;&#33410;&#20013;&#65292;&#25105;&#20204;&#20250;&#20998;&#21035;&#20171;&#32461;&#20854;&#20013;&#28041;&#21450;&#30340;&#20869;&#23481;&#65289;&#12290;</P>
<P>(1) &#20174; XML &#25991;&#20214;&#12289;Java &#31867;&#25110;&#20854;&#20182;&#22320;&#26041;&#21152;&#36733;&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;</P>
<P>(2) &#36890;&#36807; <CODE>BeanFactoryPostProcessor</CODE> &#23545;&#37197;&#32622;&#20803;&#25968;&#25454;&#36827;&#34892;&#19968;&#36718;&#22788;&#29702;&#12290;</P>
<P>(3) &#21021;&#22987;&#21270; Bean &#23454;&#20363;&#65292;&#24182;&#26681;&#25454;&#32473;&#23450;&#30340;&#20381;&#36182;&#20851;&#31995;&#32452;&#35013;&#23545;&#35937;&#12290;</P>
<P>(4) &#36890;&#36807; <CODE>BeanPostProcessor</CODE> &#23545; Bean &#36827;&#34892;&#22788;&#29702;&#65292;&#26399;&#38388;&#36824;&#20250;&#35302;&#21457; Bean &#34987;&#26500;&#36896;&#21518;&#30340;&#22238;&#35843;&#26041;&#27861;&#12290;</P>
<P>&#27604;&#22914;&#65292;&#25105;&#20204;&#26377;&#19968;&#20010;&#22914;&#20195;&#30721;&#31034;&#20363; 2-1<SPAN class=&#27880;&#37322;&#32534;&#21495;>4</SPAN> &#25152;&#31034;&#30340;&#19994;&#21153;&#23545;&#35937;&#65292;&#23427;&#20250;&#36820;&#22238;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#21487;&#20197;&#30475;&#21040;&#23427;&#23601;&#26159;&#19968;&#20010;&#26368;&#26222;&#36890;&#30340; Java &#31867;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>4</SPAN>&#36825;&#37096;&#20998;&#30340;&#31034;&#20363;&#22312; ch2/helloworld &#39033;&#30446;&#20013;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-1</STRONG>&#12288;&#26368;&#22522;&#26412;&#30340; <CODE>Hello</CODE> &#31867;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>package learning.spring.helloworld;

public class Hello {
    public String hello() {
        return "Hello World!";
    }
}</CODE></PRE>
<P>&#22312;&#27809;&#26377; IoC &#23481;&#22120;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#20687;&#20195;&#30721;&#31034;&#20363; 2-2 &#37027;&#26679;&#33258;&#24049;&#31649;&#29702; <CODE>Hello</CODE> &#23454;&#20363;&#30340;&#29983;&#21629;&#21608;&#26399;&#65292;&#36890;&#24120;&#26159;&#22312;&#20195;&#30721;&#20013;&#29992; <CODE>new</CODE> &#20851;&#38190;&#23383;&#26032;&#24314;&#19968;&#20010;&#23454;&#20363;&#65292;&#28982;&#21518;&#25226;&#23427;&#20256;&#32473;&#20855;&#20307;&#35201;&#35843;&#29992;&#23427;&#30340;&#23545;&#35937;&#65292;&#19979;&#38754;&#30340;&#20195;&#30721;&#21482;&#26159;&#20010;&#31034;&#24847;&#65292;&#25152;&#20197;&#23601;&#20351;&#29992; <CODE>new</CODE> &#20851;&#38190;&#23383;&#21019;&#24314;&#23454;&#20363;&#21518;&#30452;&#25509;&#35843;&#29992;&#26041;&#27861;&#20102;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-2</STRONG>&#12288;&#25163;&#21160;&#21019;&#24314;&#24182;&#35843;&#29992; <CODE>Hello.hello()</CODE> &#26041;&#27861;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Application {
    public static void main(String[] args) {
        Hello hello = new Hello();
        System.out.println(hello.hello());
    }
}</CODE></PRE>
<P>&#22914;&#26524;&#26159;&#25226;&#23454;&#20363;&#20132;&#32473; Spring &#23481;&#22120;&#25176;&#31649;&#65292;&#21017;&#21487;&#20197;&#23558;&#23427;&#37197;&#32622;&#21040;&#19968;&#20010; XML &#25991;&#20214;&#20013;&#65292;&#35753;&#23481;&#22120;&#26469;&#31649;&#29702;&#23427;&#30340;&#30456;&#20851;&#29983;&#21629;&#21608;&#26399;&#12290;&#21487;&#20197;&#30475;&#21040;&#20195;&#30721;&#31034;&#20363; 2-3 &#21482;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340; XML &#25991;&#20214;&#65292;&#36890;&#36807; <CODE>&lt;beans/&gt;</CODE> &#36825;&#20010; Schema &#26469;&#37197;&#32622; Spring &#30340; Bean&#65288;Bean &#30340;&#37197;&#32622;&#20250;&#22312; 2.2.2 &#33410;&#35814;&#32454;&#23637;&#24320;&#65289;&#12290;&#20026;&#20102;&#20351;&#29992; Spring &#30340;&#23481;&#22120;&#65292;&#38656;&#35201;&#22312; pom.xml &#25991;&#20214;&#20013;&#24341;&#20837; <CODE>org.springframework:spring-beans</CODE> &#20381;&#36182;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-3</STRONG>&#12288;&#37197;&#32622; hello Bean &#30340; beans.xml &#25991;&#20214;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="hello" class="learning.spring.helloworld.Hello" /&gt;

&lt;/beans&gt;</CODE></PRE>
<P>&#26368;&#21518;&#20687;&#20195;&#30721;&#31034;&#20363; 2-4 &#37027;&#26679;&#65292;&#23558;&#37197;&#32622;&#25991;&#20214;&#36733;&#20837;&#23481;&#22120;&#12290;<CODE>BeanFactory</CODE> &#21482;&#26159;&#19968;&#20010;&#26368;&#22522;&#30784;&#30340;&#25509;&#21475;&#65292;&#25105;&#20204;&#38656;&#35201;&#36873;&#25321;&#19968;&#20010;&#21512;&#36866;&#30340;&#23454;&#29616;&#31867;&#8212;&#8212;&#22312;&#23454;&#38469;&#24037;&#20316;&#20013;&#65292;&#26356;&#22810;&#24773;&#20917;&#19979;&#20250;&#29992;&#21040; <CODE>ApplicationContext</CODE> &#30340;&#21508;&#31181;&#23454;&#29616;&#12290;&#27492;&#22788;&#65292;&#25105;&#20204;&#20351;&#29992; <CODE>DefaultListableBeanFactory</CODE> &#36825;&#20010;&#23454;&#29616;&#31867;&#65292;&#23427;&#24182;&#19981;&#20851;&#24515;&#37197;&#32622;&#30340;&#26041;&#24335;&#65292;<CODE>XmlBeanDefinitionReader</CODE> &#33021;&#35835;&#21462; XML &#25991;&#20214;&#20013;&#30340;&#20803;&#25968;&#25454;&#65292;&#25105;&#20204;&#36890;&#36807;&#23427;&#21152;&#36733; CLASSPATH &#20013;&#30340; beans.xml &#25991;&#20214;&#65292;&#23558;&#20854;&#20445;&#23384;&#21040; <CODE>DefaultListableBeanFactory</CODE> &#20013;&#65292;&#38543;&#21518;&#23601;&#21487;&#20197;&#36890;&#36807; <CODE>BeanFactory</CODE> &#30340; <CODE>getBean()</CODE> &#26041;&#27861;&#21462;&#24471;&#23545;&#24212;&#30340; Bean &#20102;&#12290;</P>
<P><CODE>getBean()</CODE> &#26041;&#27861;&#26377;&#24456;&#22810;&#19981;&#21516;&#30340;&#21442;&#25968;&#21015;&#34920;&#65292;&#20363;&#23376;&#37324;&#23601;&#26377;&#20004;&#31181;&#65292;&#19968;&#31181;&#26159;&#21462;&#20986; <CODE>Object</CODE> &#31867;&#22411;&#30340; Bean&#65292;&#28982;&#21518;&#33258;&#24049;&#20570;&#31867;&#22411;&#36716;&#25442;&#65307;&#21478;&#19968;&#31181;&#21017;&#26159;&#22312;&#21442;&#25968;&#37324;&#25351;&#26126;&#36820;&#22238; Bean &#30340;&#31867;&#22411;&#65292;&#22914;&#26524;&#23454;&#38469;&#31867;&#22411;&#19981;&#21516;&#30340;&#35805;&#21017;&#20250;&#25243;&#20986; <CODE>BeansException</CODE>&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-4</STRONG>&#12288;&#21152;&#36733;&#37197;&#32622;&#25991;&#20214;&#24182;&#25191;&#34892;&#30340; <CODE>Application</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Application {
    private BeanFactory beanFactory;

    public static void main(String[] args) {
        Application application = new Application();
        application.sayHello();
    }

    public Application() {
        beanFactory = new DefaultListableBeanFactory();
        XmlBeanDefinitionReader reader =
                new XmlBeanDefinitionReader((DefaultListableBeanFactory) beanFactory);
        reader.loadBeanDefinitions("beans.xml");
    }

    public void sayHello() {
        // Hello hello = (Hello) beanFactory.getBean("hello");
        Hello hello = beanFactory.getBean("hello", Hello.class);
        System.out.println(hello.hello());
    }
}</CODE></PRE>
<P>&#22312;&#36825;&#20010;&#20363;&#23376;&#30340; <CODE>sayHello()</CODE> &#26041;&#27861;&#20013;&#65292;&#25105;&#20204;&#23436;&#20840;&#19981;&#29992;&#20851;&#24515; <CODE>Hello</CODE> &#36825;&#20010;&#31867;&#30340;&#23454;&#20363;&#26159;&#22914;&#20309;&#21019;&#24314;&#30340;&#65292;&#21482;&#38656;&#33719;&#21462;&#23454;&#20363;&#23545;&#35937;&#28982;&#21518;&#20351;&#29992;&#21363;&#21487;&#12290;&#34429;&#28982;&#30475;&#36215;&#26469;&#27604;&#20195;&#30721;&#31034;&#20363; 2-3 &#30340;&#34892;&#25968;&#35201;&#22810;&#65292;&#20294;&#24403;&#24037;&#31243;&#22797;&#26434;&#24230;&#22686;&#21152;&#20043;&#21518;&#65292;IoC &#25176;&#31649; Bean &#29983;&#21629;&#21608;&#26399;&#30340;&#20248;&#21183;&#23601;&#20307;&#29616;&#20986;&#26469;&#20102;&#12290;</P>
<H3 id=nav_point_27>2.1.3&#12288;<CODE>BeanFactory</CODE> &#19982; <CODE>ApplicationContext</CODE></H3>
<P>spring-context &#27169;&#22359;&#22312; spring-core &#21644; spring-beans &#30340;&#22522;&#30784;&#19978;&#25552;&#20379;&#20102;&#26356;&#20016;&#23500;&#30340;&#21151;&#33021;&#65292;&#20363;&#22914;&#20107;&#20214;&#20256;&#25773;&#12289;&#36164;&#28304;&#21152;&#36733;&#12289;&#22269;&#38469;&#21270;&#25903;&#25345;&#31561;&#12290;&#21069;&#38754;&#35828;&#36807;&#65292;<CODE>BeanFactory</CODE> &#26159;&#23481;&#22120;&#30340;&#22522;&#30784;&#25509;&#21475;&#65292;<CODE>ApplicationContext</CODE> &#25509;&#21475;&#32487;&#25215;&#20102; <CODE>BeanFactory</CODE>&#65292;&#22312;&#23427;&#30340;&#22522;&#30784;&#19978;&#22686;&#21152;&#20102;&#26356;&#22810;&#20225;&#19994;&#32423;&#24212;&#29992;&#25152;&#38656;&#35201;&#30340;&#29305;&#24615;&#65292;&#36890;&#36807;&#36825;&#20010;&#25509;&#21475;&#65292;&#25105;&#20204;&#21487;&#20197;&#26368;&#22823;&#21270;&#22320;&#21457;&#25381; Spring &#19978;&#19979;&#25991;&#30340;&#33021;&#21147;&#12290;&#34920; 2-1 &#21015;&#20030;&#20102;&#24120;&#35265;&#30340;&#19968;&#20123; <CODE>ApplicationContext</CODE> &#23454;&#29616;&#12290;</P>
<P><STRONG>&#34920; 2-1&#12288;&#24120;&#35265;&#30340; <CODE>ApplicationContext</CODE> &#23454;&#29616;</STRONG></P>
<TABLE width="90%" border=1>
<THEAD>
<TR>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#31867;&#21517;</P></TH>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#35828;&#26126;</P></TH></TR></THEAD>
<TBODY>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>ClassPathXmlApplicationContext</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#20174; CLASSPATH &#20013;&#21152;&#36733; XML &#25991;&#20214;&#26469;&#37197;&#32622; <CODE>ApplicationContext</CODE></P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>FileSystemXmlApplicationContext</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#20174;&#25991;&#20214;&#31995;&#32479;&#20013;&#21152;&#36733; XML &#25991;&#20214;&#26469;&#37197;&#32622; <CODE>ApplicationContext</CODE></P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>AnnotationConfigApplicationContext</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26681;&#25454;&#27880;&#35299;&#21644; Java &#31867;&#37197;&#32622; <CODE>ApplicationContext</CODE></P></TD></TR></TBODY></TABLE>
<P>&#30456;&#27604; <CODE>BeanFactory</CODE>&#65292;&#20351;&#29992; <CODE>ApplicationContext</CODE> &#20063;&#20250;&#26356;&#21152;&#26041;&#20415;&#19968;&#20123;&#65292;&#22240;&#20026;&#25105;&#20204;&#26080;&#39035;&#33258;&#24049;&#21435;&#27880;&#20876;&#24456;&#22810;&#20869;&#23481;&#65292;&#20363;&#22914; <CODE>AnnotationConfigApplicationContext</CODE> &#25226;&#24120;&#29992;&#30340;&#19968;&#20123;&#21518;&#32622;&#22788;&#29702;&#22120;&#37117;&#30452;&#25509;&#27880;&#20876;&#22909;&#20102;&#65292;&#20026;&#25105;&#20204;&#30465;&#21435;&#20102;&#19981;&#23569;&#40635;&#28902;&#12290;&#25152;&#20197;&#65292;&#22312;&#32477;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#24314;&#35758;&#22823;&#23478;&#20351;&#29992; <CODE>ApplicationContext</CODE> &#30340;&#23454;&#29616;&#31867;&#12290;</P>
<P>&#22914;&#26524;&#35201;&#23558;&#20195;&#30721;&#31034;&#20363; <CODE>2-4</CODE> &#20013;&#30340; Application.java &#20174;&#20351;&#29992; BeanFactory &#20462;&#25913;&#20026;&#20351;&#29992; ApplicationContext&#65292;&#21482;&#38656;&#20570;&#20004;&#22788;&#25913;&#21160;&#65306;</P>
<P>(1) &#22312; pom.xml &#25991;&#20214;&#20013; <SPAN class=&#27880;&#37322;&#32534;&#21495;>5</SPAN>&#65292;&#25226;&#24341;&#20837;&#30340; <CODE>org.springframework:spring-beans</CODE> &#20462;&#25913;&#20026; <CODE>org.springframework: spring-context</CODE>&#65307;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>5</SPAN>&#20855;&#20307;&#30340; pom.xml &#20869;&#23481;&#65292;&#21487;&#20197;&#26597;&#30475; ch2/helloworld-context &#39033;&#30446;&#12290;</P>
<P>(2) &#22312; <CODE>Application.java</CODE> &#20013;&#65292;&#20351;&#29992; <CODE>ClassPathXmlApplicationContext</CODE> &#20195;&#26367; <CODE>DefaultListableBeanFactory</CODE> &#21644; <CODE>XmlBeanDefinitionReader</CODE> &#30340;&#32452;&#21512;&#65292;&#20855;&#20307;&#35265;&#20195;&#30721;&#31034;&#20363; 2-5&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-5</STRONG>&#12288;&#35843;&#25972;&#21518;&#30340; <CODE>Application</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Application {
    private ApplicationContext applicationContext;

    public static void main(String[] args) {
        Application application = new Application();
        application.sayHello();
    }

    public Application() {
        applicationContext = new ClassPathXmlApplicationContext("beans.xml");
    }

    public void sayHello() {
        Hello hello = applicationContext.getBean("hello", Hello.class);
        System.out.println(hello.hello());
    }
}</CODE></PRE>
<H3 id=nav_point_28>2.1.4&#12288;&#23481;&#22120;&#30340;&#32487;&#25215;&#20851;&#31995;</H3>
<P>Java &#31867;&#20043;&#38388;&#26377;&#32487;&#25215;&#30340;&#20851;&#31995;&#65292;&#23376;&#31867;&#33021;&#22815;&#32487;&#25215;&#29238;&#31867;&#30340;&#23646;&#24615;&#21644;&#26041;&#27861;&#12290;&#21516;&#26679;&#22320;&#65292;Spring &#30340;&#23481;&#22120;&#20043;&#38388;&#20063;&#23384;&#22312;&#31867;&#20284;&#30340;&#32487;&#25215;&#20851;&#31995;&#65292;&#23376;&#23481;&#22120;&#21487;&#20197;&#32487;&#25215;&#29238;&#23481;&#22120;&#20013;&#37197;&#32622;&#30340;&#32452;&#20214;&#12290;&#22312;&#20351;&#29992; Spring MVC &#26102;&#23601;&#20250;&#28041;&#21450;&#23481;&#22120;&#30340;&#32487;&#25215;&#12290;</P>
<P>&#20808;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-6 &#25152;&#31034; <SPAN class=&#27880;&#37322;&#32534;&#21495;>6</SPAN>&#65288;&#20462;&#25913;&#33258;&#19978;&#19968;&#33410;&#30340; HelloWorld&#65289;&#65292;<CODE>Hello</CODE> &#31867;&#22312;&#36755;&#20986;&#30340;&#23383;&#31526;&#20018;&#20013;&#21152;&#20837;&#19968;&#27573;&#27880;&#20837;&#30340;&#20449;&#24687;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>6</SPAN>&#36825;&#37096;&#20998;&#30340;&#20363;&#23376;&#22312; ch2/context-inherit &#39033;&#30446;&#20013;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-6</STRONG>&#12288;&#21487;&#20197;&#36755;&#20986;&#29305;&#23450;&#20449;&#24687;&#30340; <CODE>Hello</CODE> &#31867;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>package learning.spring.helloworld;

public class Hello {
    private String name;

    public String hello() {
        return "Hello World! by " + name;
    }

    public void setName(String name) {
        this.name = name;
    }
}</CODE></PRE>
<P>&#38543;&#21518;&#65292;&#25105;&#20204;&#20063;&#35201;&#35843;&#25972;&#19968;&#19979; XML &#37197;&#32622;&#25991;&#20214;&#65292;&#29238;&#23481;&#22120;&#19982;&#23376;&#23481;&#22120;&#20998;&#21035;&#29992;&#19981;&#21516;&#30340;&#37197;&#32622;&#65292;ID &#26082;&#26377;&#30456;&#21516;&#30340;&#65292;&#20063;&#26377;&#19981;&#21516;&#30340;&#65292;&#20855;&#20307;&#22914;&#20195;&#30721;&#31034;&#20363; 2-7 &#19982;&#20195;&#30721;&#31034;&#20363; 2-8 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-7</STRONG>&#12288;&#29238;&#23481;&#22120;&#37197;&#32622; parent-beans.xml &#25991;&#20214;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="parentHello" class="learning.spring.helloworld.Hello"&gt;
        &lt;property name="name" value="PARENT" /&gt;
    &lt;/bean&gt;

    &lt;bean id="hello" class="learning.spring.helloworld.Hello"&gt;
        &lt;property name="name" value="PARENT" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</CODE></PRE>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-8</STRONG>&#12288;&#23376;&#23481;&#22120;&#37197;&#32622; child-beans.xml &#25991;&#20214;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="childHello" class="learning.spring.helloworld.Hello"&gt;
        &lt;property name="name" value="CHILD" /&gt;
    &lt;/bean&gt;

    &lt;bean id="hello" class="learning.spring.helloworld.Hello"&gt;
        &lt;property name="name" value="CHILD" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</CODE></PRE>
<P>&#22312; <CODE>Application</CODE> &#31867;&#20013;&#65292;&#25105;&#20204;&#23581;&#35797;&#20174;&#19981;&#21516;&#30340;&#23481;&#22120;&#20013;&#33719;&#21462;&#19981;&#21516;&#30340; Bean&#65288;&#20851;&#20110; Bean &#30340;&#20869;&#23481;&#65292;&#25105;&#20204;&#20250;&#22312; 2.2 &#33410;&#23637;&#24320;&#65289;&#65292;&#20197;&#27979;&#35797;&#32487;&#25215;&#23481;&#22120;&#20013; Bean &#30340;&#21487;&#35265;&#24615;&#21644;&#35206;&#30422;&#24773;&#20917;&#65292;&#20855;&#20307;&#22914;&#20195;&#30721;&#31034;&#20363; 2-9 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-9</STRONG>&#12288;&#20462;&#25913;&#21518;&#30340; <CODE>Application</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Application {
    private ClassPathXmlApplicationContext parentContext;
    private ClassPathXmlApplicationContext childContext;

    public static void main(String[] args) {
        new Application().runTests();
    }

    public Application() {
        parentContext = new ClassPathXmlApplicationContext("parent-beans.xml");
        childContext = new ClassPathXmlApplicationContext(
                new String[] {"child-beans.xml"}, true, parentContext);
        parentContext.setId("ParentContext");
        childContext.setId("ChildContext");
    }

    public void runTests() {
        testVisibility(parentContext, "parentHello");
        testVisibility(childContext, "parentHello");
        testVisibility(parentContext, "childHello");
        testVisibility(childContext, "childHello");
        testOverridden(parentContext, "hello");
        testOverridden(childContext, "hello");
    }

    private void testVisibility(ApplicationContext context, String beanName) {
        System.out.println(context.getId() + " can see " + beanName + ": "
                           + context.containsBean(beanName));
    }

    private void testOverridden(ApplicationContext context, String beanName) {
        System.out.println("sayHello from " + context.getId() +": "
                           + context.getBean(beanName, Hello.class).hello());
    }
}</CODE></PRE>
<P>&#36825;&#27573;&#31243;&#24207;&#30340;&#36816;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>ParentContext can see parentHello: true
ChildContext can see parentHello: true
ParentContext can see childHello: false
ChildContext can see childHello: true
sayHello from ParentContext: Hello World! by PARENT
sayHello from ChildContext: Hello World! by CHILD</CODE></PRE>
<P>&#36890;&#36807;&#36825;&#20010;&#31034;&#20363;&#65292;&#25105;&#20204;&#21487;&#20197;&#24471;&#20986;&#22914;&#19979;&#20851;&#20110;&#23481;&#22120;&#32487;&#25215;&#30340;&#36890;&#29992;&#32467;&#35770;&#8212;&#8212;&#23427;&#20204;&#21644; Java &#31867;&#30340;&#32487;&#25215;&#38750;&#24120;&#30456;&#20284;&#65292;&#20108;&#32773;&#30340;&#23545;&#27604;&#22914;&#34920; 2-2 &#25152;&#31034;&#12290;</P>
<P><STRONG>&#34920; 2-2&#12288;&#23481;&#22120;&#32487;&#25215; vs.Java &#31867;&#32487;&#25215;</STRONG></P>
<TABLE width="90%" border=1>
<THEAD>
<TR>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#23481;&#22120;&#32487;&#25215;</P></TH>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>Java &#31867;&#32487;&#25215;</P></TH></TR></THEAD>
<TBODY>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#23376;&#19978;&#19979;&#25991;&#21487;&#20197;&#30475;&#21040;&#29238;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#30340; Bean&#65292;&#21453;&#20043;&#21017;&#19981;&#34892;</P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#23376;&#31867;&#21487;&#20197;&#30475;&#21040;&#29238;&#31867;&#30340; <CODE>protected</CODE> &#21644; <CODE>public</CODE> &#23646;&#24615;&#21644;&#26041;&#27861;&#65292;&#29238;&#31867;&#30475;&#19981;&#21040;&#23376;&#31867;&#30340;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#23376;&#19978;&#19979;&#25991;&#20013;&#21487;&#20197;&#23450;&#20041;&#19982;&#29238;&#19978;&#19979;&#25991;&#21516; ID &#30340; Bean&#65292;&#21508;&#33258;&#37117;&#33021;&#33719;&#21462;&#33258;&#24049;&#23450;&#20041;&#30340; Bean</P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#23376;&#31867;&#21487;&#20197;&#35206;&#30422;&#29238;&#31867;&#23450;&#20041;&#30340;&#23646;&#24615;&#21644;&#26041;&#27861;</P></TD></TR></TBODY></TABLE>
<P>&#20851;&#20110;&#21516; ID &#35206;&#30422; Bean&#65292;&#26377;&#26102;&#20063;&#20250;&#24341;&#21457;&#19968;&#20123;&#24847;&#26009;&#20043;&#22806;&#30340;&#38382;&#39064;&#12290;&#22914;&#26524;&#24076;&#26395;&#20851;&#38381;&#36825;&#20010;&#29305;&#24615;&#65292;&#20063;&#21487;&#20197;&#32771;&#34385;&#31105;&#27490;&#35206;&#30422;&#65292;&#36890;&#36807;&#23481;&#22120;&#30340; <CODE>setAllowBeanDefinitionOverriding()</CODE> &#26041;&#27861;&#21487;&#20197;&#25511;&#21046;&#36825;&#19968;&#34892;&#20026;&#12290;</P>
<H2 id=nav_point_29>2.2&#12288;Bean &#22522;&#30784;&#30693;&#35782;</H2>
<P>Bean &#26159; Spring &#23481;&#22120;&#20013;&#30340;&#37325;&#35201;&#27010;&#24565;&#65292;&#36825;&#19968;&#33410;&#23601;&#35753;&#25105;&#20204;&#26469;&#30528;&#37325;&#20102;&#35299;&#19968;&#19979; Bean &#30340;&#27010;&#24565;&#12289;&#22914;&#20309;&#27880;&#20837; Bean &#30340;&#20381;&#36182;&#65292;&#20197;&#21450;&#22914;&#20309;&#22312;&#23481;&#22120;&#20013;&#36827;&#34892; Bean &#30340;&#37197;&#32622;&#12290;</P>
<H3 id=nav_point_30>2.2.1&#12288;&#20160;&#20040;&#26159; Bean</H3>
<P>Java &#20013;&#26377;&#20010;&#27604;&#36739;&#37325;&#35201;&#30340;&#27010;&#24565;&#21483;&#20570;&#8220;JavaBeans&#8221;<SPAN class=&#27880;&#37322;&#32534;&#21495;>7</SPAN>&#65292;&#32500;&#22522;&#30334;&#31185; <SPAN class=&#27880;&#37322;&#32534;&#21495;>8</SPAN> &#20013;&#26377;&#22914;&#19979;&#25551;&#36848;&#65306;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>7</SPAN>JavaBeans &#26377;&#33258;&#24049;&#30340;&#35268;&#33539;&#65292;&#35814;&#35265; Oracle &#23448;&#32593; JavaBeans Spec &#25991;&#26723;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>8</SPAN>&#35814;&#35265;&#32500;&#22522;&#30334;&#31185;&#30340; JavaBeans &#30340;&#35789;&#26465;&#12290;</P>
<BLOCKQUOTE>
<P>JavaBeans &#26159; Java &#20013;&#19968;&#31181;&#29305;&#27530;&#30340;&#31867;&#65292;&#21487;&#20197;&#23558;&#22810;&#20010;&#23545;&#35937;&#23553;&#35013;&#21040;&#19968;&#20010;&#23545;&#35937;&#65288;Bean&#65289;&#20013;&#12290;&#29305;&#28857;&#26159;&#21487;&#24207;&#21015;&#21270;&#65292;&#25552;&#20379;&#26080;&#21442;&#26500;&#36896;&#22120;&#65292;&#25552;&#20379; <CODE>Getter</CODE> &#26041;&#27861;&#21644; <CODE>Setter</CODE> &#26041;&#27861;&#35775;&#38382;&#23545;&#35937;&#30340;&#23646;&#24615;&#12290;&#21517;&#31216;&#20013;&#30340; Bean &#26159;&#29992;&#20110; Java &#30340;&#21487;&#37325;&#29992;&#36719;&#20214;&#32452;&#20214;&#30340;&#24815;&#29992;&#21483;&#27861;&#12290;</P></BLOCKQUOTE>
<P>&#20174;&#20013;&#21487;&#20197;&#30475;&#21040;&#65306;<STRONG>Bean</STRONG> &#26159;&#25351; Java &#20013;&#30340;<STRONG>&#21487;&#37325;&#29992;&#36719;&#20214;&#32452;&#20214;</STRONG>&#65292;Spring &#23481;&#22120;&#20063;<STRONG>&#36981;&#24490;</STRONG>&#36825;&#19968;&#24815;&#20363;&#65292;&#22240;&#27492;&#23558;&#23481;&#22120;&#20013;&#31649;&#29702;&#30340;&#21487;&#37325;&#29992;&#32452;&#20214;&#31216;&#20026; Bean&#12290;&#23481;&#22120;&#20250;&#26681;&#25454;&#25152;&#25552;&#20379;&#30340;&#20803;&#25968;&#25454;&#26469;&#21019;&#24314;&#24182;&#31649;&#29702;&#36825;&#20123; Bean&#65292;&#20854;&#20013;&#20063;&#21253;&#25324;&#23427;&#20204;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;Spring &#23481;&#22120;&#23545; Bean &#24182;&#27809;&#26377;&#22826;&#22810;&#30340;&#35201;&#27714;&#65292;&#26080;&#39035;&#23454;&#29616;&#29305;&#23450;&#25509;&#21475;&#25110;&#20381;&#36182;&#29305;&#23450;&#24211;&#65292;&#21482;&#35201;&#26159;&#26368;&#26222;&#36890;&#30340; Java &#23545;&#35937;&#21363;&#21487;&#65292;&#36825;&#31867;&#23545;&#35937;&#20063;&#34987;&#31216;&#20026; POJO&#65288;Plain Old Java Object&#65289;&#12290;</P>
<P>&#19968;&#20010; Bean &#30340;&#23450;&#20041;&#20013;&#65292;&#20250;&#21253;&#21547;&#22914;&#19979;&#37096;&#20998;&#65306;</P>
<UL>
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>Bean &#30340;&#21517;&#31216;&#65292;&#19968;&#33324;&#26159; Bean &#30340; <CODE>id</CODE>&#65292;&#20063;&#21487;&#20197;&#20026; Bean &#25351;&#23450;&#21035;&#21517;&#65288;alias&#65289;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>Bean &#30340;&#20855;&#20307;&#31867;&#20449;&#24687;&#65292;&#36825;&#26159;&#19968;&#20010;&#20840;&#38480;&#23450;&#31867;&#21517;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>Bean &#30340;&#20316;&#29992;&#22495;&#65292;&#26159;&#21333;&#20363;&#65288;singleton&#65289;&#36824;&#26159;&#21407;&#22411;&#65288;prototype&#65289;<SPAN class=&#27880;&#37322;&#32534;&#21495;>9</SPAN>&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#20381;&#36182;&#27880;&#20837;&#30456;&#20851;&#20449;&#24687;&#65292;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#12289;&#23646;&#24615;&#20197;&#21450;&#33258;&#21160;&#32455;&#20837;&#65288;autowire&#65289;&#26041;&#24335;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#21019;&#24314;&#38144;&#27585;&#30456;&#20851;&#20449;&#24687;&#65292;&#25042;&#21152;&#36733;&#27169;&#24335;&#12289;&#21021;&#22987;&#21270;&#22238;&#35843;&#26041;&#27861;&#19982;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#12290; </LI></UL>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>9</SPAN>&#20851;&#20110;&#21333;&#20363;&#21644;&#21407;&#22411;&#30340;&#21306;&#21035;&#65292;&#21069;&#32773;&#27599;&#27425;&#33719;&#21462;&#36820;&#22238;&#30340;&#26159;&#21516;&#19968;&#20010; Bean&#65292;&#32780;&#21518;&#32773;&#27599;&#27425;&#33719;&#21462;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#26032;&#30340;&#23545;&#35937;&#12290;</P>
<P>&#25105;&#20204;&#21487;&#20197;&#33258;&#34892;&#35774;&#23450; Bean &#30340;&#21517;&#23383;&#65292;&#20063;&#21487;&#20197;&#35753; Spring &#23481;&#22120;&#24110;&#25105;&#20204;&#35774;&#32622;&#21517;&#31216;&#12290;Spring &#23481;&#22120;&#30340;&#21629;&#21517;&#26041;&#24335;&#20026;&#31867;&#21517;&#30340;&#39318;&#23383;&#27597;&#23567;&#20889;&#65292;&#25645;&#37197;&#39548;&#23792;&#65288;camel-cased&#65289;&#35268;&#21017;&#12290;&#27604;&#22914;&#31867;&#22411;&#20026; <CODE>HelloService</CODE> &#30340; Bean&#65292;&#33258;&#21160;&#29983;&#25104;&#30340;&#21517;&#31216;&#23601;&#20026; <CODE>helloService</CODE>&#12290;</P>
<H3 id=nav_point_31>2.2.2&#12288;Bean &#30340;&#20381;&#36182;&#20851;&#31995;</H3>
<P>&#25152;&#35859;&#8220;&#20381;&#36182;&#27880;&#20837;&#8221;&#65292;&#24456;&#37325;&#35201;&#30340;&#19968;&#22359;&#23601;&#26159;&#31649;&#29702;&#20381;&#36182;&#12290;&#22312; Spring &#23481;&#22120;&#20013;&#65292;&#8220;&#31649;&#29702;&#20381;&#36182;&#8221;&#20027;&#35201;&#23601;&#26159;&#31649;&#29702; Bean &#20043;&#38388;&#30340;&#20381;&#36182;&#12290;&#26377;&#20004;&#31181;&#22522;&#26412;&#30340;&#27880;&#20837;&#26041;&#24335;&#8212;&#8212;&#22522;&#20110;&#26500;&#36896;&#26041;&#27861;&#30340;&#27880;&#20837;&#21644;&#22522;&#20110; <CODE>Setter</CODE> &#26041;&#27861;&#30340;&#27880;&#20837;&#12290;</P>
<P>&#25152;&#35859;&#22522;&#20110;&#26500;&#36896;&#26041;&#27861;&#30340;&#27880;&#20837;&#65292;&#23601;&#26159;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#26469;&#27880;&#20837;&#20381;&#36182;&#12290;&#20173;&#26087;&#20197; HelloWorld &#20026;&#20363;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-10 &#25152;&#31034; <SPAN class=&#27880;&#37322;&#32534;&#21495;>10</SPAN>&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>10</SPAN>&#22312;&#31034;&#20363;&#20179;&#24211;&#20013;&#30340;&#20301;&#32622;&#20026; ch2/helloworld-constructor&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-10</STRONG>&#12288;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#20256;&#20837;&#23383;&#31526;&#20018;&#30340; <CODE>Hello</CODE> &#31867;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>package learning.spring.helloworld;

public class Hello {
    private String name;

    public Hello(String name) {
        this.name = name;
    }

    public String hello() {
        return "Hello World! by " + name;
    }
}</CODE></PRE>
<P>&#23545;&#24212;&#30340; XML &#37197;&#32622;&#25991;&#20214;&#38656;&#35201;&#20351;&#29992; <CODE>&lt;constructor-arg/&gt;</CODE> &#20256;&#20837;&#26500;&#36896;&#26041;&#27861;&#25152;&#38656;&#30340;&#20869;&#23481;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-11 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-11</STRONG>&#12288;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#37197;&#32622; Bean &#30340; XML &#25991;&#20214;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

    &lt;bean id="hello" class="learning.spring.helloworld.Hello"&gt;
        &lt;constructor-arg value="Spring"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</CODE></PRE>
<P><CODE>&lt;constructor-arg&gt;</CODE> &#20013;&#26377;&#19981;&#23569;&#23646;&#24615;&#21487;&#20197;&#37197;&#32622;&#65292;&#20855;&#20307;&#22914;&#34920; 2-3 &#25152;&#31034;&#12290;</P>
<P><STRONG>&#34920; 2-3&#12288;<CODE>&lt;constructor-arg/&gt;</CODE> &#30340;&#21487;&#37197;&#32622;&#23646;&#24615;</STRONG></P>
<TABLE width="90%" border=1>
<THEAD>
<TR>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#23646;&#24615;</P></TH>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#20316;&#29992;</P></TH></TR></THEAD>
<TBODY>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>value</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#35201;&#20256;&#32473;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#30340;&#20540;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>ref</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#35201;&#20256;&#32473;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#30340; Bean ID</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>type</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#23545;&#24212;&#30340;&#31867;&#22411;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>index</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#23545;&#24212;&#30340;&#20301;&#32622;&#65292;&#20174; 0 &#24320;&#22987;&#35745;&#31639;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>name</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#23545;&#24212;&#30340;&#21517;&#31216;</P></TD></TR></TBODY></TABLE>
<P>&#22522;&#20110; <CODE>Setter</CODE> &#26041;&#27861;&#30340;&#27880;&#20837;&#65292;&#39038;&#21517;&#24605;&#20041;&#65292;&#23601;&#26159;&#36890;&#36807; Bean &#30340; <CODE>Setter</CODE> &#26041;&#27861;&#26469;&#27880;&#20837;&#20381;&#36182;&#12290;&#25105;&#20204;&#22312;&#31532; 2.1.4 &#33410;&#24050;&#32463;&#30475;&#21040;&#20102;&#23545;&#24212;&#30340;&#20363;&#23376;&#65292;&#20855;&#20307;&#21487;&#20197;&#21442;&#32771;&#20195;&#30721;&#31034;&#20363; 2-6 &#19982;&#20195;&#30721;&#31034;&#20363; 2-7&#12290;<CODE>&lt;property/&gt;</CODE> &#20013;&#30340; <CODE>value</CODE> &#23646;&#24615;&#26159;&#30452;&#25509;&#27880;&#20837;&#30340;&#20540;&#65292;&#29992; <CODE>ref</CODE> &#23646;&#24615;&#21017;&#21487;&#27880;&#20837;&#20854;&#20182; Bean&#12290;&#20063;&#21487;&#20197;&#20687;&#20195;&#30721;&#31034;&#20363; 2-12 &#36825;&#26679;&#26469;&#20026;&#23646;&#24615;&#27880;&#20837;&#20381;&#36182; <SPAN class=&#27880;&#37322;&#32534;&#21495;>11</SPAN>&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>11</SPAN>&#20851;&#20110;&#22914;&#20309;&#22312;&#23646;&#24615;&#20013;&#27880;&#20837;&#38598;&#21512;&#65288;List&#12289;Map &#21644; Set &#31561;&#65289;&#65292;&#21487;&#20197;&#21442;&#32771; Spring Framework 5.2.6 &#23448;&#26041;&#25991;&#26723;&#30340; 1.4.2 &#33410;&#8220;Dependencies and Configuration in Detail&#8221;&#12290;&#35831;&#27880;&#24847;&#65292;&#19981;&#21516;&#30340;&#29256;&#26412;&#25991;&#26723;&#30340;&#23567;&#33410;&#32534;&#21495;&#21487;&#33021;&#26377;&#25152;&#24046;&#24322;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-12</STRONG>&#12288;<CODE>&lt;property/&gt;</CODE> &#30340;&#29992;&#27861;&#28436;&#31034;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;bean id="..." class="..."&gt;
    &lt;property name="xxx"&gt;
        &lt;!-- &#30452;&#25509;&#23450;&#20041;&#19968;&#20010;&#20869;&#37096;&#30340;Bean --&gt;
        &lt;bean class="..."/&gt;
    &lt;/property&gt;

    &lt;property name="yyy"&gt;
        &lt;!-- &#23450;&#20041;&#20381;&#36182;&#30340;Bean --&gt;
        &lt;ref bean="..."/&gt;
    &lt;/property&gt;

    &lt;property name="zzz"&gt;
        &lt;!-- &#23450;&#20041;&#19968;&#20010;&#21015;&#34920; --&gt;
        &lt;list&gt;
            &lt;value&gt;aaa&lt;/value&gt;
            &lt;value&gt;bbb&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</CODE></PRE>
<P>&#25163;&#21160;&#37197;&#32622;&#20381;&#36182;&#22312; Bean &#23569;&#26102;&#36824;&#33021;&#25509;&#21463;&#65292;&#24403; Bean &#30340;&#25968;&#37327;&#21464;&#22810;&#21518;&#65292;&#36825;&#31181;&#37197;&#32622;&#23601;&#20250;&#21464;&#24471;&#38750;&#24120;&#32321;&#29712;&#12290;&#22312;&#21512;&#36866;&#30340;&#22330;&#21512;&#65292;&#21487;&#20197;&#35753; Spring &#23481;&#22120;&#26367;&#25105;&#20204;&#33258;&#21160;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#65292;&#36825;&#31181;&#26426;&#21046;&#31216;&#20026;<STRONG>&#33258;&#21160;&#32455;&#20837;</STRONG>&#12290;&#33258;&#21160;&#32455;&#20837;&#26377;&#20960;&#31181;&#27169;&#24335;&#65292;&#20855;&#20307;&#35265;&#34920; 2-4&#12290;</P>
<P><STRONG>&#34920; 2-4&#12288;&#33258;&#21160;&#32455;&#20837;&#30340;&#27169;&#24335;</STRONG></P>
<TABLE width="90%" border=1>
<THEAD>
<TR>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#21517;&#31216;</P></TH>
<TH>
<P class=&#34920;&#22836;&#21333;&#20803;&#26684;>&#35828;&#26126;</P></TH></TR></THEAD>
<TBODY>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>no</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#19981;&#36827;&#34892;&#33258;&#21160;&#32455;&#20837;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>byName</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26681;&#25454;&#23646;&#24615;&#21517;&#26597;&#25214;&#23545;&#24212;&#30340; Bean &#36827;&#34892;&#33258;&#21160;&#32455;&#20837;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>byType</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#26681;&#25454;&#23646;&#24615;&#31867;&#22411;&#26597;&#25214;&#23545;&#24212;&#30340; Bean &#36827;&#34892;&#33258;&#21160;&#32455;&#20837;</P></TD></TR>
<TR>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;><CODE>constructor</CODE></P></TD>
<TD>
<P class=&#34920;&#26684;&#21333;&#20803;&#26684;>&#21516; <CODE>byType</CODE>&#65292;&#20294;&#29992;&#20110;&#26500;&#36896;&#26041;&#27861;&#27880;&#20837;</P></TD></TR></TBODY></TABLE>
<P>&#22312; <CODE>&lt;bean/&gt;</CODE> &#20013;&#21487;&#20197;&#36890;&#36807; <CODE>autowire</CODE> &#23646;&#24615;&#26469;&#35774;&#32622;&#20351;&#29992;&#20309;&#31181;&#33258;&#21160;&#32455;&#20837;&#26041;&#24335;&#65292;&#20063;&#21487;&#20197;&#22312; <CODE>&lt;beans/&gt;</CODE> &#20013;&#35774;&#32622; <CODE>default-autowire</CODE> &#23646;&#24615;&#25351;&#23450;&#40664;&#35748;&#30340;&#33258;&#21160;&#32455;&#20837;&#26041;&#24335;&#12290;&#22312;&#20351;&#29992;&#33258;&#21160;&#32455;&#20837;&#26102;&#65292;&#38656;&#35201;&#27880;&#24847;&#20197;&#19979;&#20107;&#39033;&#65306;</P>
<UL>
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#24320;&#21551;&#33258;&#21160;&#32455;&#20837;&#21518;&#65292;&#20173;&#21487;&#20197;&#25163;&#21160;&#35774;&#32622;&#20381;&#36182;&#65292;&#25163;&#21160;&#35774;&#32622;&#30340;&#20381;&#36182;&#20248;&#20808;&#32423;&#39640;&#20110;&#33258;&#21160;&#32455;&#20837;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#33258;&#21160;&#32455;&#20837;&#26080;&#27861;&#27880;&#20837;&#22522;&#26412;&#31867;&#22411;&#21644;&#23383;&#31526;&#20018;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#23545;&#20110;&#38598;&#21512;&#31867;&#22411;&#30340;&#23646;&#24615;&#65292;&#33258;&#21160;&#32455;&#20837;&#20250;&#25226;&#19978;&#19979;&#25991;&#37324;&#25214;&#21040;&#30340; Bean &#37117;&#25918;&#36827;&#21435;&#65292;&#20294;&#22914;&#26524;&#23646;&#24615;&#19981;&#26159;&#38598;&#21512;&#31867;&#22411;&#65292;&#26377;&#22810;&#20010;&#20505;&#36873; Bean &#23601;&#20250;&#26377;&#38382;&#39064;&#12290; </LI></UL>
<P>&#20026;&#20102;&#36991;&#20813;&#31532;&#19977;&#28857;&#20013;&#35828;&#21040;&#30340;&#38382;&#39064;&#65292;&#21487;&#20197;&#23558; <CODE>&lt;bean/&gt;</CODE> &#30340; <CODE>autowire-candidate</CODE> &#23646;&#24615;&#35774;&#32622;&#20026; <CODE>false</CODE>&#65292;&#20063;&#21487;&#20197;&#22312;&#20320;&#25152;&#26399;&#26395;&#30340;&#20505;&#36873; Bean &#30340; <CODE>&lt;bean/&gt;</CODE> &#20013;&#23558; <CODE>primary</CODE> &#35774;&#32622;&#20026; <CODE>true</CODE>&#65292;&#36825;&#23601;&#34920;&#26126;&#22312;&#22810;&#20010;&#20505;&#36873; Bean &#20013;&#35813; Bean &#26159;&#20027;&#35201;&#30340;&#65288;&#22914;&#26524;&#20351;&#29992;&#22522;&#20110; Java &#31867;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#36873;&#25321; <CODE>@Primary</CODE> &#27880;&#35299;&#23454;&#29616;&#19968;&#26679;&#30340;&#21151;&#33021;&#65289;&#12290;</P>
<P>&#26368;&#21518;&#65292;&#20877;&#31616;&#21333;&#25552;&#19968;&#19979;&#22914;&#20309;&#25351;&#23450; Bean &#30340;&#21021;&#22987;&#21270;&#39034;&#24207;&#12290;&#19968;&#33324;&#24773;&#20917;&#19979;&#65292;Spring &#23481;&#22120;&#20250;&#26681;&#25454;&#20381;&#36182;&#24773;&#20917;&#33258;&#21160;&#35843;&#25972; Bean &#30340;&#21021;&#22987;&#21270;&#39034;&#24207;&#12290;&#19981;&#36807;&#65292;&#26377;&#26102; Bean &#20043;&#38388;&#30340;&#20381;&#36182;&#24182;&#19981;&#26126;&#26174;&#65292;&#23481;&#22120;&#21487;&#33021;&#26080;&#27861;&#25353;&#29031;&#25105;&#20204;&#30340;&#39044;&#26399;&#36827;&#34892;&#21021;&#22987;&#21270;&#65292;&#36825;&#26102;&#25105;&#20204;&#21487;&#20197;&#33258;&#24049;&#26469;&#25351;&#23450; Bean &#30340;&#20381;&#36182;&#39034;&#24207;&#12290;<CODE>&lt;bean/&gt;</CODE> &#30340; <CODE>depends-on</CODE> &#23646;&#24615;&#21487;&#20197;&#25351;&#23450;&#24403;&#21069; Bean &#36824;&#35201;&#20381;&#36182;&#21738;&#20123; Bean&#65288;&#22914;&#26524;&#20351;&#29992;&#22522;&#20110; Java &#31867;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;<CODE>@DependsOn</CODE> &#27880;&#35299;&#20063;&#33021;&#23454;&#29616;&#19968;&#26679;&#30340;&#21151;&#33021;&#65289;&#12290;</P>
<H3 id=nav_point_32>2.2.3&#12288;Bean &#30340;&#19977;&#31181;&#37197;&#32622;&#26041;&#24335;</H3>
<P>Spring Framework &#25552;&#20379;&#20102;&#22810;&#31181;&#19981;&#21516;&#39118;&#26684;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#26089;&#26399;&#20165;&#25903;&#25345; XML &#37197;&#32622;&#25991;&#20214;&#30340;&#26041;&#24335;&#65292;Spring Framework 2.0 &#24341;&#20837;&#20102;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#21040;&#20102; 3.0 &#21017;&#21448;&#22686;&#21152;&#20102;&#22522;&#20110; Java &#31867;&#30340;&#37197;&#32622;&#26041;&#24335;&#12290;&#36825;&#20960;&#31181;&#26041;&#24335;&#27809;&#26377;&#26126;&#30830;&#30340;&#20248;&#21155;&#20043;&#20998;&#65292;&#36873;&#25321;&#21512;&#36866;&#30340;&#25110;&#32773;&#21916;&#27426;&#30340;&#26041;&#24335;&#23601;&#22909;&#65292;&#24456;&#22810;&#26102;&#20505;&#25105;&#20204;&#20063;&#20250;&#28151;&#21512;&#20351;&#29992;&#36825;&#20960;&#31181;&#37197;&#32622;&#26041;&#24335;&#12290;</P>
<P>&#37492;&#20110; Spring &#23481;&#22120;&#30340;&#20803;&#25968;&#25454;&#37197;&#32622;&#26412;&#36136;&#19978;&#23601;&#26159;&#37197;&#32622; Bean&#65288;AOP &#21644;&#20107;&#21153;&#30340;&#37197;&#32622;&#32972;&#21518;&#20063;&#26159;&#37197;&#32622;&#21508;&#31181; Bean&#65289;&#65292;&#22240;&#27492;&#25105;&#20204;&#20250;&#22312;&#26412;&#33410;&#20013;&#35814;&#32454;&#23637;&#24320;&#35828;&#26126;&#22914;&#20309;&#37197;&#32622; Bean&#12290;</P>
<OL>
<LI>
<P><STRONG>&#22522;&#20110; XML &#25991;&#20214;&#30340;&#37197;&#32622;</STRONG></P>
<P>Spring Framework &#25552;&#20379;&#20102; <CODE>&lt;beans/&gt;</CODE> &#36825;&#20010; Schema<SPAN class=&#27880;&#37322;&#32534;&#21495;>12</SPAN> &#26469;&#37197;&#32622; Bean&#65292;&#21069;&#25991;&#20013;&#24050;&#32463;&#29992;&#36807;&#20102; XML &#25991;&#20214;&#26041;&#24335;&#30340;&#37197;&#32622;&#65292;&#36825;&#37324;&#20877;&#31616;&#21333;&#22238;&#39038;&#19968;&#19979;&#12290;</P>
<P>&#25105;&#20204;&#36890;&#36807; <CODE>&lt;bean/&gt;</CODE> &#21487;&#20197;&#37197;&#32622;&#19968;&#20010; Bean&#65292;<CODE>id</CODE> &#25351;&#23450; Bean &#30340;&#26631;&#35782;&#65292;<CODE>class</CODE> &#25351;&#23450; Bean &#30340;&#20840;&#38480;&#23450;&#31867;&#21517;&#65292;&#19968;&#33324;&#20250;&#36890;&#36807;&#31867;&#30340;&#26500;&#36896;&#26041;&#27861;&#26469;&#21019;&#24314; Bean&#65292;&#20294;&#20063;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#38745;&#24577;&#30340; <CODE>factory-method</CODE>&#65292;&#27604;&#22914;&#19979;&#38754;&#23601;&#20351;&#29992;&#20102; <CODE>create()</CODE> &#38745;&#24577;&#26041;&#27861;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;bean id="xxx" class="learning.spring.Yyy" factory-method="create" /&gt;</CODE></PRE>
<P><CODE>&lt;constructor-arg/&gt;</CODE> &#21644; <CODE>&lt;property/&gt;</CODE> &#29992;&#26469;&#27880;&#20837;&#25152;&#38656;&#30340;&#20869;&#23481;&#12290;&#22914;&#26524;&#26159;&#21478;&#19968;&#20010; Bean &#30340;&#20381;&#36182;&#65292;&#19968;&#33324;&#20250;&#29992; <CODE>ref</CODE> &#23646;&#24615;&#65292;2.2.3 &#33410;&#20013;&#24050;&#32463;&#26377;&#36807;&#35828;&#26126;&#65292;&#27492;&#22788;&#23601;&#19981;&#20877;&#36184;&#36848;&#20102;&#12290;</P>
<P><CODE>&lt;bean/&gt;</CODE> &#20013;&#36824;&#26377;&#20960;&#20010;&#37325;&#35201;&#30340;&#23646;&#24615;&#65292;<CODE>scope</CODE> &#34920;&#26126;&#24403;&#21069; Bean &#26159;&#21333;&#20363;&#36824;&#26159;&#21407;&#22411;&#65292;<CODE>lazy-init</CODE> &#26159;&#25351;&#24403;&#21069; Bean &#26159;&#21542;&#26159;&#25042;&#21152;&#36733;&#30340;&#65292;<CODE>depends-on</CODE> &#26126;&#30830;&#25351;&#23450;&#24403;&#21069; Bean &#30340;&#21021;&#22987;&#21270;&#39034;&#24207;&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;bean id="..." class="..." scope="singleton" lazy-init="true" depends-on="xxx"/&gt;</CODE></PRE>
<P>&nbsp;</P>
<LI>
<P><STRONG>&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;</STRONG></P>
<P>Spring Framework 2.0 &#24341;&#20837;&#20102; <CODE>@Required</CODE> &#27880;&#35299; <SPAN class=&#27880;&#37322;&#32534;&#21495;>13</SPAN>&#65292;Spring Framework 2.5 &#21448;&#24341;&#20837;&#20102; <CODE>@Autowired</CODE>&#12289;<CODE>@Component</CODE>&#12289;<CODE>@Service</CODE> &#21644; <CODE>@Repository</CODE> &#31561;&#37325;&#35201;&#30340;&#27880;&#35299;&#65292;&#20351;&#29992;&#36825;&#20123;&#27880;&#35299;&#33021;&#31616;&#21270; Bean &#30340;&#37197;&#32622;&#12290;&#25105;&#20204;&#21487;&#20197;&#20687;&#20195;&#30721;&#31034;&#20363; 2-13 &#37027;&#26679;&#24320;&#21551;&#23545;&#36825;&#20123;&#27880;&#35299;&#30340;&#25903;&#25345; <SPAN class=&#27880;&#37322;&#32534;&#21495;>14</SPAN>&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-13</STRONG>&#12288;&#21551;&#29992;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd"&gt;

    &lt;context:component-scan base-package="learning.spring"/&gt;

&lt;/beans&gt;</CODE></PRE>
<P>&#19978;&#36848;&#37197;&#32622;&#20250;&#25195;&#25551; <CODE>learning.spring</CODE> &#21253;&#20869;&#30340;&#31867;&#65292;&#22312;&#31867;&#19978;&#28155;&#21152;&#22914;&#19979;&#22235;&#20010;&#27880;&#35299;&#37117;&#33021;&#35753; Spring &#23481;&#22120;&#25226;&#23427;&#20204;&#37197;&#32622;&#20026; Bean&#65292;&#22914;&#34920; 2-5 &#25152;&#31034;&#12290;</P>
<P><STRONG>&#34920; 2-5&#12288;Bean &#21019;&#24314;&#30456;&#20851;&#27880;&#35299;</STRONG></P>
<TABLE class="table table-bordered table-striped table-condensed" width="90%" border=1>
<TBODY>
<TR>
<TH>&#27880;&#35299;</TH>
<TH>&#35828;&#26126;</TH></TR>
<TR>
<TD><CODE>@Component</CODE></TD>
<TD>&#23558;&#31867;&#26631;&#35782;&#20026;&#26222;&#36890;&#30340;&#32452;&#20214;&#65292;&#21363;&#19968;&#20010; Bean</TD></TR>
<TR>
<TD><CODE>@Service</CODE></TD>
<TD>&#23558;&#31867;&#26631;&#35782;&#20026;&#26381;&#21153;&#23618;&#30340;&#26381;&#21153;</TD></TR>
<TR>
<TD><CODE>@Repository</CODE></TD>
<TD>&#23558;&#31867;&#26631;&#35782;&#20026;&#25968;&#25454;&#23618;&#30340;&#25968;&#25454;&#20179;&#24211;&#65292;&#19968;&#33324;&#26159; DAO&#65288;Data Access Object&#65289;</TD></TR>
<TR>
<TD><CODE>@Controller</CODE></TD>
<TD>&#23558;&#31867;&#26631;&#35782;&#20026; Web &#23618;&#30340; Web &#25511;&#21046;&#22120;&#65288;&#21518;&#26469;&#38024;&#23545; REST &#26381;&#21153;&#21448;&#22686;&#21152;&#20102;&#19968;&#20010; <CODE>@RestController</CODE> &#27880;&#35299;&#65289;</TD></TR></TBODY></TABLE>
<P>&#22914;&#26524;&#19981;&#25351;&#23450; Bean &#30340;&#21517;&#31216;&#65292;Spring &#23481;&#22120;&#20250;&#33258;&#21160;&#29983;&#25104;&#19968;&#20010;&#21517;&#31216;&#65292;&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#26126;&#30830;&#25351;&#23450;&#21517;&#31216;&#65292;&#27604;&#22914;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Component("helloBean")
public class Hello {...}</CODE></PRE>
<P>&#22914;&#26524;&#35201;&#27880;&#20837;&#20381;&#36182;&#65292;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#30340;&#27880;&#35299;&#65292;&#22914;&#34920; 2-6 &#25152;&#31034;&#12290;</P>
<P><STRONG>&#34920; 2-6&#12288;&#21487;&#27880;&#20837;&#20381;&#36182;&#30340;&#27880;&#35299;</STRONG></P>
<TABLE class="table table-bordered table-striped table-condensed" width="90%" border=1>
<TBODY>
<TR>
<TH>&#27880;&#35299;</TH>
<TH>&#35828;&#26126;</TH></TR>
<TR>
<TD><CODE>@Autowired</CODE></TD>
<TD>&#26681;&#25454;&#31867;&#22411;&#27880;&#20837;&#20381;&#36182;&#65292;&#21487;&#29992;&#20110;&#26500;&#36896;&#26041;&#27861;&#12289;<CODE>Setter</CODE> &#26041;&#27861;&#21644;&#25104;&#21592;&#21464;&#37327;</TD></TR>
<TR>
<TD><CODE>@Resource</CODE><SUP><B>15</B></SUP></TD>
<TD>JSR-250 &#30340;&#27880;&#35299;&#65292;&#26681;&#25454;&#21517;&#31216;&#27880;&#20837;&#20381;&#36182;</TD></TR>
<TR>
<TD><CODE>@Inject</CODE></TD>
<TD>JSR-330 &#30340;&#27880;&#35299;&#65292;&#21516; <CODE>@Autowired</CODE></TD></TR></TBODY></TABLE>
<BLOCKQUOTE>
<P><SUP><B>15</B></SUP>&#20174; Spring Framework 6.0 &#24320;&#22987;&#65292;<CODE>@Resource</CODE>&#12289;<CODE>@PostConstruct</CODE> &#21644; <CODE>@PreDestroy</CODE> &#27880;&#35299;&#37117;&#25442;&#20102;&#26032;&#30340;&#21253;&#21517;&#65292;&#24314;&#35758;&#20351;&#29992; <CODE>jakarta</CODE>.annotation &#21253;&#37324;&#30340;&#27880;&#35299;&#65292;&#20294;&#20063;&#20860;&#23481; javax.annotation &#21253;&#20013;&#30340;&#27880;&#35299;&#65307;@Inject &#27880;&#35299;&#21017;&#26159;&#24314;&#35758;&#20351;&#29992; <CODE>jakarta</CODE>.inject &#21253;&#37324;&#30340;&#65292;&#20294;&#20063;&#20860;&#23481; javax.inject &#21253;&#20013;&#30340;&#12290;</P></BLOCKQUOTE>
<P><CODE>@Autowired</CODE> &#27880;&#35299;&#27604;&#36739;&#24120;&#29992;&#65292;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#21487;&#20197;&#25351;&#23450;&#26159;&#21542;&#24517;&#39035;&#23384;&#22312;&#20381;&#36182;&#39033;&#65292;&#24182;&#25351;&#23450;&#30446;&#26631;&#20381;&#36182;&#30340; Bean ID<SPAN class=&#27880;&#37322;&#32534;&#21495;>16</SPAN>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Autowired(required = false)
@Qualifier("helloBean")
public void setHello(Hello hello) {...}</CODE></PRE>
<P>&#38500;&#27492;&#20043;&#22806;&#65292;&#36824;&#21487;&#20197;&#20351;&#29992; <CODE>@Value</CODE> &#27880;&#35299;&#27880;&#20837;&#29615;&#22659;&#21464;&#37327;&#12289;Properties &#25110; YAML &#20013;&#37197;&#32622;&#30340;&#23646;&#24615;&#21644; SpEL &#34920;&#36798;&#24335; <SPAN class=&#27880;&#37322;&#32534;&#21495;>17</SPAN> &#30340;&#35745;&#31639;&#32467;&#26524;&#12290;JSR-250 &#20013;&#36824;&#26377; <CODE>@PostConstruct</CODE> &#21644; <CODE>@PreDestroy</CODE> &#27880;&#35299;&#65292;&#25226;&#36825;&#20004;&#20010;&#27880;&#35299;&#21152;&#22312;&#26041;&#27861;&#19978;&#29992;&#26469;&#34920;&#31034;&#35813;&#26041;&#27861;&#35201;&#22312;&#21021;&#22987;&#21270;&#21518;&#35843;&#29992;&#25110;&#32773;&#26159;&#22312;&#38144;&#27585;&#21069;&#35843;&#29992;&#65292;&#22312;&#32842;&#21040; Bean &#30340;&#29983;&#21629;&#21608;&#26399;&#26102;&#25105;&#20204;&#36824;&#20250;&#30475;&#21040;&#23427;&#20204;&#12290;</P>
<P>&nbsp;</P>
<LI>
<P><STRONG>&#22522;&#20110; Java &#31867;&#30340;&#37197;&#32622;</STRONG></P>
<P>&#20174; Spring Framework 3.0 &#24320;&#22987;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992; Java &#31867;&#20195;&#26367; XML &#25991;&#20214;&#65292;&#20351;&#29992; <CODE>@Configuration</CODE>&#12289;<CODE>@Bean</CODE> &#21644; <CODE>@ComponentScan</CODE> &#31561;&#19968;&#31995;&#21015;&#27880;&#35299;&#65292;&#22522;&#26412;&#21487;&#20197;&#28385;&#36275;&#26085;&#24120;&#25152;&#38656;&#12290;</P>
<P>&#36890;&#36807; <CODE>AnnotationConfigApplicationContext</CODE> &#21487;&#20197;&#26500;&#24314;&#19968;&#20010;&#25903;&#25345;&#22522;&#20110;&#27880;&#35299;&#21644; Java &#31867;&#30340; Spring &#19978;&#19979;&#25991;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>ApplicationContext ctx = new AnnotationConfigApplicationContext(Config.class);</CODE></PRE>
<P>&#20854;&#20013;&#30340; <CODE>Config</CODE> &#31867;&#23601;&#26159;&#19968;&#20010;&#21152;&#20102; <CODE>@Configuration</CODE> &#27880;&#35299;&#30340; Java &#31867;&#65292;&#23427;&#21487;&#20197;&#26159;&#20195;&#30721;&#31034;&#20363; 2-14 &#36825;&#26679;&#30340;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-14</STRONG>&#12288;Java &#37197;&#32622;&#31867;&#31034;&#20363;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@ComponentScan("learning.spring")
public class Config {
    @Bean
    @Lazy
    @Scope("prototype")
    public Hello helloBean() {
        return new Hello();
    }
}</CODE></PRE>
<P>&#31867;&#19978;&#30340; <CODE>@Configuration</CODE> &#27880;&#35299;&#34920;&#26126;&#36825;&#26159;&#19968;&#20010; Java &#37197;&#32622;&#31867;&#65292;<CODE>@ComponentScan</CODE> &#27880;&#35299;&#25351;&#23450;&#20102;&#31867;&#25195;&#25551;&#30340;&#21253;&#21517;&#65292;&#20316;&#29992;&#19982; <CODE>&lt;context:component-scan/&gt;</CODE> &#31867;&#20284;&#12290;&#22312; <CODE>@ComponentScan</CODE> &#20013;&#65292;<CODE>includeFilters</CODE> &#21644; <CODE>excludeFilters</CODE> &#21487;&#20197;&#29992;&#26469;&#25351;&#23450;&#21253;&#21547;&#21644;&#25490;&#38500;&#30340;&#32452;&#20214;&#65292;&#20363;&#22914;&#23448;&#26041;&#25991;&#26723;&#20013;&#23601;&#26377;&#22914;&#19979;&#31034;&#20363;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@ComponentScan(basePackages = "org.example",
        includeFilters = @Filter(type = FilterType.REGEX,
                               pattern = ".*Stub.*Repository"),
        excludeFilters = @Filter(Repository.class))
public class AppConfig { ... }</CODE></PRE>
<P>&#22914;&#26524; <CODE>@Configuration</CODE> &#27809;&#26377;&#25351;&#23450;&#25195;&#25551;&#30340;&#22522;&#30784;&#21253;&#36335;&#24452;&#25110;&#32773;&#31867;&#65292;&#40664;&#35748;&#23601;&#20174;&#35813;&#37197;&#32622;&#31867;&#30340;&#21253;&#24320;&#22987;&#25195;&#25551;&#12290;</P>
<P><CODE>Config</CODE> &#31867;&#20013;&#30340; <CODE>helloBean()</CODE> &#26041;&#27861;&#19978;&#28155;&#21152;&#20102; <CODE>@Bean</CODE> &#27880;&#35299;&#65292;&#35813;&#26041;&#27861;&#30340;&#36820;&#22238;&#23545;&#35937;&#20250;&#34987;&#24403;&#20570;&#23481;&#22120;&#20013;&#30340;&#19968;&#20010; Bean&#65292;<CODE>@Lazy</CODE> &#27880;&#35299;&#35828;&#26126;&#36825;&#20010; Bean &#26159;&#24310;&#26102;&#21152;&#36733;&#30340;&#65292;<CODE>@Scope</CODE> &#27880;&#35299;&#21017;&#25351;&#23450;&#20102;&#23427;&#26159;&#21407;&#22411; Bean&#12290;<CODE>@Bean</CODE> &#27880;&#35299;&#26377;&#22914;&#19979;&#23646;&#24615;&#65292;&#22914;&#34920; 2-7 &#25152;&#31034;&#12290;</P>
<P><STRONG>&#34920; 2-7&#12288;<CODE>@Bean</CODE> &#27880;&#35299;&#30340;&#23646;&#24615;</STRONG></P>
<TABLE class="table table-bordered table-striped table-condensed" width="90%" border=1>
<TBODY>
<TR>
<TH>&#23646;&#24615;</TH>
<TH>&#40664;&#35748;&#20540;</TH>
<TH>&#35828;&#26126;</TH></TR>
<TR>
<TD><CODE>name</CODE></TD>
<TD><CODE>{}</CODE></TD>
<TD>Bean &#30340;&#21517;&#31216;&#65292;&#40664;&#35748;&#21516;&#26041;&#27861;&#21517;</TD></TR>
<TR>
<TD><CODE>value</CODE></TD>
<TD><CODE>{}</CODE></TD>
<TD>&#21516; <CODE>name</CODE></TD></TR>
<TR>
<TD><CODE>autowire</CODE></TD>
<TD><CODE>Autowire.NO</CODE></TD>
<TD>&#33258;&#21160;&#32455;&#20837;&#26041;&#24335;</TD></TR>
<TR>
<TD><CODE>autowireCandidate</CODE></TD>
<TD><CODE>true</CODE></TD>
<TD>&#26159;&#21542;&#26159;&#33258;&#21160;&#32455;&#20837;&#30340;&#20505;&#36873; Bean</TD></TR>
<TR>
<TD><CODE>initMethod</CODE></TD>
<TD><CODE>""</CODE></TD>
<TD>&#21021;&#22987;&#21270;&#26041;&#27861;&#21517;</TD></TR>
<TR>
<TD><CODE>destroyMethod</CODE></TD>
<TD><CODE>AbstractBeanDefinition.INFER_METHOD</CODE><SUP><B>18</B></SUP></TD>
<TD>&#38144;&#27585;&#26041;&#27861;&#21517;</TD></TR></TBODY></TABLE>
<BLOCKQUOTE>
<P><SUP><B>18</B></SUP>&#33258;&#21160;&#25512;&#27979;&#38144;&#27585; Bean &#26102;&#35813;&#35843;&#29992;&#30340;&#26041;&#27861;&#65292;&#20250;&#33258;&#21160;&#21435;&#35843;&#29992;&#20462;&#39280;&#31526;&#20026; <CODE>public</CODE>&#12289;&#27809;&#26377;&#21442;&#25968;&#19988;&#26041;&#27861;&#21517;&#26159; <CODE>close</CODE> &#25110; <CODE>shutdown</CODE> &#30340;&#26041;&#27861;&#12290;&#22914;&#26524;&#31867;&#23454;&#29616;&#20102; <CODE>java.lang.AutoCloseable</CODE> &#25110; <CODE>java.io.Closeable</CODE> &#25509;&#21475;&#65292;&#20063;&#20250;&#35843;&#29992;&#20854;&#20013;&#30340; <CODE>close()</CODE> &#26041;&#27861;&#12290;</P></BLOCKQUOTE>
<P>&#22312; Java &#37197;&#32622;&#31867;&#20013;&#25351;&#23450; Bean &#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#26377;&#20004;&#31181;&#26041;&#24335;&#65292;&#36890;&#36807;&#26041;&#27861;&#30340;&#21442;&#25968;&#27880;&#20837;&#20381;&#36182;&#65292;&#25110;&#32773;&#30452;&#25509;&#35843;&#29992;&#31867;&#20013;&#24102;&#26377; <CODE>@Bean</CODE> &#27880;&#35299;&#30340;&#26041;&#27861;&#12290;</P>
<P>&#20195;&#30721;&#31034;&#20363; 2-15 &#20013;&#65292;<CODE>foo()</CODE> &#21019;&#24314;&#20102;&#19968;&#20010;&#21517;&#20026; <CODE>foo</CODE> &#30340; Bean&#65292;<CODE>bar()</CODE> &#26041;&#27861;&#36890;&#36807;&#21442;&#25968; <CODE>foo</CODE> &#27880;&#20837;&#20102; <CODE>foo</CODE> &#36825;&#20010; Bean&#65292;<CODE>baz()</CODE> &#26041;&#27861;&#20869;&#21017;&#36890;&#36807;&#35843;&#29992; <CODE>foo()</CODE> &#33719;&#24471;&#20102;&#21516;&#19968;&#20010; Bean&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-15</STRONG>&#12288;&#20381;&#36182;&#31034;&#20363;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
public class Config {
    @Bean
      public Foo foo() {
        return new Foo();
    }

    @Bean
    public Bar bar(Foo foo) {
        return new Bar(foo);
    }

    @Bean
    public Baz baz() {
        return new Baz(foo());
    }
}</CODE></PRE>
<P>&#38656;&#35201;&#37325;&#28857;&#35828;&#26126;&#30340;&#26159;&#65292;Spring Framework &#38024;&#23545; <CODE>@Configuration</CODE> &#31867;&#20013;&#24102;&#26377; <CODE>@Bean</CODE> &#27880;&#35299;&#30340;&#26041;&#27861;&#36890;&#36807; CGLIB&#65288;Code Generation Library&#65289;&#20570;&#20102;&#29305;&#27530;&#22788;&#29702;&#65292;&#38024;&#23545;&#36820;&#22238;&#21333;&#20363;&#31867;&#22411; Bean &#30340;&#26041;&#27861;&#65292;&#35843;&#29992;&#22810;&#27425;&#36820;&#22238;&#30340;&#32467;&#26524;&#26159;&#19968;&#26679;&#30340;&#65292;&#24182;&#19981;&#20250;&#30495;&#30340;&#25191;&#34892;&#22810;&#27425;&#12290;</P>
<P>&#22312;&#37197;&#32622;&#31867;&#20013;&#20063;&#21487;&#20197;&#23548;&#20837;&#20854;&#20182;&#37197;&#32622;&#65292;&#20363;&#22914;&#65292;&#29992; @Import &#23548;&#20837;&#20854;&#20182;&#37197;&#32622;&#31867;&#65292;&#29992; @ImportResource &#23548;&#20837;&#37197;&#32622;&#25991;&#20214;&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@Import({ CongfigA.class, ConfigB.class })
@ImportResource("classpath:/spring/*-applicationContext.xml")
public class Config {}</CODE></PRE></LI></OL>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>12</SPAN>&#26089;&#26399; http://www.springframework.org/schema/beans &#36825;&#20010; Schema &#23545;&#24212;&#30340;&#20301;&#32622;&#26159; http://www.springframework.org/schema/beans/spring-beans.xsd&#65307;&#20026;&#20102;&#32479;&#19968;&#25903;&#25345; HTTPS&#65292;&#21518;&#26469;&#30340;&#29256;&#26412;&#20063;&#24320;&#22987;&#25903;&#25345; https://www.springframework.org/schema/beans/spring-beans.xsd&#12290;&#22914;&#26524;&#20320;&#36824;&#22312;&#20351;&#29992;&#32769;&#29256;&#26412;&#30340; Spring Framework&#65292;&#35201;&#27880;&#24847;&#32769;&#29256;&#26412;&#26159;&#19981;&#25903;&#25345;&#36825;&#37324;&#30340; HTTPS &#30340;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>13</SPAN>&#19981;&#24314;&#35758;&#29992;&#36825;&#20010;&#27880;&#35299;&#65292;&#26377;&#24517;&#35201;&#30340;&#35805;&#65292;&#21487;&#20197;&#36890;&#36807;&#26500;&#36896;&#22120;&#27880;&#20837;&#30340;&#26041;&#24335;&#26469;&#24378;&#21046;&#35201;&#27714;&#27880;&#20837;&#20381;&#36182;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>14</SPAN><CODE>&lt;context:component-scan/&gt;</CODE> &#20250;&#38544;&#24335;&#22320;&#37197;&#32622; <CODE>&lt;context:annotation-config/&gt;</CODE>&#65292;&#21518;&#32773;&#20854;&#23454;&#26367;&#25105;&#20204;&#27880;&#20876;&#20102;&#19968;&#22534; <CODE>BeanPostProcessor</CODE>&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>16</SPAN>&#23454;&#38469; @Qualifier &#26159;&#26681;&#25454; Bean &#19978;&#37197;&#32622;&#30340;&#26631;&#35782;&#31526;&#65288;Qualifier&#65289;&#26469;&#21305;&#37197;&#30340;&#65292;&#32780; Bean &#30340; ID &#27491;&#22909;&#26159;&#40664;&#35748;&#30340;&#26631;&#35782;&#31526;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>17</SPAN>&#26412;&#20070;&#19981;&#20250;&#35814;&#32454;&#35762;&#36848; SpEL &#34920;&#36798;&#24335;&#65292;&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#21487;&#20197;&#33258;&#34892;&#26597;&#38405; Spring Framework &#25991;&#26723;&#12290;</P>
<H2 id=nav_point_33>2.3&#12288;&#23450;&#21046;&#23481;&#22120;&#19982; Bean &#30340;&#34892;&#20026;</H2>
<P>&#36890;&#24120;&#65292;Spring Framework &#21253;&#25597;&#20102;&#22823;&#37096;&#20998;&#24037;&#20316;&#65292;&#26367;&#25105;&#20204;&#31649;&#29702; Bean &#30340;&#21019;&#24314;&#19982;&#20381;&#36182;&#65292;&#23558;&#21508;&#31181;&#32452;&#20214;&#35013;&#37197;&#25104;&#19968;&#20010;&#21487;&#36816;&#34892;&#30340;&#24212;&#29992;&#12290;&#28982;&#32780;&#65292;&#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#20250;&#26377;&#33258;&#24049;&#30340;&#29305;&#27530;&#38656;&#27714;&#12290;&#20363;&#22914;&#65292;&#22312; Bean &#30340;&#20381;&#36182;&#34987;&#27880;&#20837;&#21518;&#65292;&#25105;&#20204;&#24819;&#35201;&#35302;&#21457; Bean &#30340;&#22238;&#35843;&#26041;&#27861;&#20570;&#19968;&#20123;&#21021;&#22987;&#21270;&#65307;&#22312; Bean &#38144;&#27585;&#21069;&#65292;&#25105;&#20204;&#24819;&#35201;&#25191;&#34892;&#19968;&#20123;&#28165;&#29702;&#24037;&#20316;&#65307;&#25105;&#20204;&#24819;&#35201; Bean &#24863;&#30693;&#23481;&#22120;&#30340;&#19968;&#20123;&#20449;&#24687;&#65292;&#25343;&#21040;&#24403;&#21069;&#30340;&#19978;&#19979;&#25991;&#33258;&#34892;&#36827;&#34892;&#21028;&#26029;&#25110;&#22788;&#29702;&#8230;&#8230;</P>
<P>&#36825;&#26102;&#20505;&#65292;&#24590;&#20040;&#20570;&#65311;Spring Framework &#20026;&#25105;&#20204;&#39044;&#30041;&#20102;&#21457;&#25381;&#31354;&#38388;&#12290;&#26412;&#33410;&#25105;&#20204;&#23601;&#26469;&#25506;&#35752;&#19968;&#19979;&#22914;&#20309;&#26681;&#25454;&#33258;&#24049;&#30340;&#38656;&#27714;&#26469;&#23450;&#21046;&#23481;&#22120;&#19982; Bean &#30340;&#34892;&#20026;&#12290;</P>
<H3 id=nav_point_34>2.3.1&#12288;Bean &#30340;&#29983;&#21629;&#21608;&#26399;</H3>
<P>Spring &#23481;&#22120;&#25509;&#31649;&#20102; Bean &#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#31649;&#29702;&#65292;&#20855;&#20307;&#22914;&#22270; 2-2 &#25152;&#31034;&#12290;&#19968;&#20010; Bean &#20808;&#35201;&#32463;&#36807; Java &#23545;&#35937;&#30340;&#21019;&#24314;&#65288;&#20063;&#23601;&#26159;&#36890;&#36807; <CODE>new</CODE> &#20851;&#38190;&#23383;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65289;&#65292;&#38543;&#21518;&#26681;&#25454;&#23481;&#22120;&#37324;&#30340;&#37197;&#32622;&#27880;&#20837;&#25152;&#38656;&#30340;&#20381;&#36182;&#65292;&#26368;&#21518;&#35843;&#29992;&#21021;&#22987;&#21270;&#30340;&#22238;&#35843;&#26041;&#27861;&#65292;&#32463;&#36807;&#36825;&#19977;&#20010;&#27493;&#39588;&#25165;&#31639;&#23436;&#25104;&#20102; Bean &#30340;&#21021;&#22987;&#21270;&#12290;&#33509;&#19981;&#20877;&#38656;&#35201;&#36825;&#20010; Bean&#65292;&#21017;&#35201;&#36827;&#34892;&#38144;&#27585;&#25805;&#20316;&#65292;&#22312;&#27491;&#24335;&#38144;&#27585;&#23545;&#35937;&#21069;&#65292;&#20250;&#20808;&#35843;&#29992;&#23481;&#22120;&#30340;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#12290;</P>
<P class=&#22270;><img alt={%} src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00757.jpeg"></P>
<P class=p-img-title><STRONG>&#22270; 2-2&#12288;Bean &#30340;&#29983;&#21629;&#21608;&#26399;</STRONG></P>
<P>&#30001;&#20110;&#19968;&#20999;&#37117;&#26159;&#30001; Spring &#23481;&#22120;&#31649;&#29702;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#26080;&#27861;&#20687;&#33258;&#24049;&#25511;&#21046;&#36825;&#20123;&#21160;&#20316;&#26102;&#37027;&#26679;&#20219;&#24847;&#22320;&#22312; <STRONG>Bean &#21019;&#24314;&#21518;</STRONG>&#25110; <STRONG>Bean &#38144;&#27585;&#21069;</STRONG>&#22686;&#21152;&#26576;&#20123;&#25805;&#20316;&#12290;&#20026;&#27492;&#65292;Spring Framework &#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#20960;&#31181;&#36884;&#24452;&#65292;&#22312;&#36825;&#20004;&#20010;&#26102;&#38388;&#28857;&#35843;&#29992;&#25105;&#20204;&#25552;&#20379;&#32473;&#23481;&#22120;&#30340;&#22238;&#35843;&#26041;&#27861;&#12290;&#21487;&#20197;&#26681;&#25454;&#19981;&#21516;&#24773;&#20917;&#36873;&#25321;&#20197;&#19979;&#19977;&#31181;&#26041;&#24335;&#20043;&#19968;&#65306;</P>
<UL>
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#23454;&#29616; <CODE>InitializingBean</CODE> &#21644; <CODE>DisposableBean</CODE> &#25509;&#21475;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#20351;&#29992; JSR-250 &#30340; <CODE>@PostConstruct</CODE> &#21644; <CODE>@PreDestroy</CODE> &#27880;&#35299;&#65307; 
<LI>
<P>&#22312; <CODE>&lt;bean/&gt;</CODE> &#25110; <CODE>@Bean</CODE> &#37324;&#37197;&#32622;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#26041;&#27861;&#12290;</P>
<LI>
<P><STRONG>&#21019;&#24314; Bean &#21518;&#30340;&#22238;&#35843;&#21160;&#20316;</STRONG></P>
<P>&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#22312;&#21019;&#24314; Bean &#21518;&#20570;&#19968;&#20123;&#29305;&#21035;&#30340;&#25805;&#20316;&#65292;&#27604;&#22914;&#26597;&#35810;&#25968;&#25454;&#24211;&#21021;&#22987;&#21270;&#32531;&#23384;&#31561;&#65292;Spring Framework &#21487;&#20197;&#25552;&#20379;&#19968;&#20010;&#21021;&#22987;&#21270;&#26041;&#27861;&#12290;<CODE>InitializingBean</CODE> &#25509;&#21475;&#26377;&#19968;&#20010; <CODE>afterPropertiesSet()</CODE> &#26041;&#27861;&#8212;&#8212;&#39038;&#21517;&#24605;&#20041;&#65292;&#23601;&#26159;&#22312;&#25152;&#26377;&#20381;&#36182;&#37117;&#27880;&#20837;&#21518;&#33258;&#21160;&#35843;&#29992;&#35813;&#26041;&#27861;&#12290;&#22312;&#26041;&#27861;&#19978;&#28155;&#21152; <CODE>@PostConstruct</CODE> &#27880;&#35299;&#20063;&#26377;&#30456;&#21516;&#30340;&#25928;&#26524;&#12290;</P>
<P>&#20063;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#65292;&#22312; XML &#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;bean id="hello" class="learning.spring.helloworld.Hello" init-method="init" /&gt;</CODE></PRE>
<P>&#25110;&#32773;&#22312; Java &#37197;&#32622;&#20013;&#25351;&#23450;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Bean(initMethod="init")
public Hello hello() {...}</CODE></PRE>
<P>&nbsp;</P>
<LI>
<P><STRONG>&#38144;&#27585; Bean &#21069;&#30340;&#22238;&#35843;&#21160;&#20316;</STRONG></P>
<P>Spring Framework &#26082;&#28982;&#26377;&#21019;&#24314; Bean &#21518;&#30340;&#22238;&#35843;&#21160;&#20316;&#65292;&#33258;&#28982;&#20063;&#26377;&#38144;&#27585; Bean &#21069;&#30340;&#35302;&#21457;&#25805;&#20316;&#12290;<CODE>DisposableBean</CODE> &#25509;&#21475;&#20013;&#30340; <CODE>destroy()</CODE> &#26041;&#27861;&#21644;&#28155;&#21152;&#20102; <CODE>@PreDestroy</CODE> &#27880;&#35299;&#30340;&#26041;&#27861;&#37117;&#33021;&#23454;&#29616;&#36825;&#20010;&#30446;&#30340;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-16 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-16</STRONG>&#12288;&#23454;&#29616;&#20102; <CODE>DisposableBean</CODE> &#25509;&#21475;&#30340;&#31867;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>package learning.spring.helloworld;

import org.springframework.beans.factory.DisposableBean;

public class Hello implements DisposableBean {
    public String hello() {
        return "Hello World!";
    }

    @Override
    public void destroy() throws Exception {
        System.out.println("See you next time.");
    }
}</CODE></PRE>
<P>&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#22312; <CODE>&lt;bean/&gt;</CODE> &#20013;&#25351;&#23450; <CODE>destroy-method</CODE>&#65292;&#25110;&#32773;&#22312; <CODE>@Bean</CODE> &#20013;&#25351;&#23450; <CODE>destroyMethod</CODE>&#12290;</P>
<P>&nbsp;</P>
<LI>
<P><STRONG>&#29983;&#21629;&#21608;&#26399;&#21160;&#20316;&#30340;&#32452;&#21512;</STRONG></P>
<P>&#22914;&#26524;&#25105;&#20204;&#28151;&#21512;&#20351;&#29992;&#19978;&#25991;&#25552;&#21040;&#30340;&#20960;&#31181;&#19981;&#21516;&#30340;&#26041;&#24335;&#65292;&#32780;&#19988;&#36825;&#20123;&#26041;&#24335;&#25351;&#23450;&#30340;&#26041;&#27861;&#36824;&#19981;&#23613;&#30456;&#21516;&#65292;&#37027;&#23601;&#38656;&#35201;&#26126;&#30830;&#23427;&#20204;&#30340;&#25191;&#34892;&#39034;&#24207;&#20102;&#12290;</P>
<P>&#26080;&#35770;&#26159;&#21021;&#22987;&#21270;&#36824;&#26159;&#38144;&#27585;&#65292;Spring &#37117;&#20250;&#25353;&#29031;&#22914;&#19979;&#39034;&#24207;&#20381;&#27425;&#36827;&#34892;&#35843;&#29992;&#65306;</P>
<P>(1) &#28155;&#21152;&#20102; <CODE>@PostConstruct</CODE> &#25110; <CODE>@PreDestroy</CODE> &#30340;&#26041;&#27861;&#65307;</P>
<P>(2) &#23454;&#29616;&#20102; <CODE>InitializingBean</CODE> &#30340; <CODE>afterPropertiesSet()</CODE> &#26041;&#27861;&#65292;&#25110; <CODE>DisposableBean</CODE> &#30340; <CODE>destroy()</CODE> &#26041;&#27861;&#65307;</P>
<P>(3) &#22312; <CODE>&lt;bean/&gt;</CODE> &#20013;&#37197;&#32622;&#30340; <CODE>init-method</CODE> &#25110; <CODE>destroy-method</CODE>&#65292;<CODE>@Bean</CODE> &#20013;&#37197;&#32622;&#30340; <CODE>initMethod</CODE> &#25110; <CODE>destroyMethod</CODE>&#12290;</P>
<P>&#22312;&#20195;&#30721;&#31034;&#20363; 2-17<SPAN class=&#27880;&#37322;&#32534;&#21495;>19</SPAN> &#30340; Java &#31867;&#20013;&#65292;&#21516;&#26102;&#25552;&#20379;&#20102;&#19977;&#20010;&#38144;&#27585;&#30340;&#26041;&#27861;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-17</STRONG>&#12288;&#28155;&#21152;&#20102;&#22810;&#20010;&#38144;&#27585;&#26041;&#27861;&#30340; <CODE>Hello</CODE> &#31867;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>package learning.spring.helloworld;

import javax.annotation.PreDestroy;
import org.springframework.beans.factory.DisposableBean;

public class Hello implements DisposableBean {
    public String hello() {
        return "Hello World!";
    }

    @Override
    public void destroy() throws Exception {
        System.out.println("destroy()");
    }

    public void close() {
        System.out.println("close()");
    }

    @PreDestroy
    public void shutdown() {
        System.out.println("shutdown()");
    }
}</CODE></PRE>
<P>&#22312;&#23545;&#24212;&#30340; XML &#25991;&#20214;&#20013;&#37197;&#32622; <CODE>destroy-method</CODE>&#65292;&#35201;&#29992; <CODE>&lt;context:annotation-config /&gt;</CODE> &#24320;&#21551;&#27880;&#35299;&#25903;&#25345;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-18 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-18</STRONG>&#12288;&#23545;&#24212;&#30340; beans.xml &#25991;&#20214;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd"&gt;

    &lt;context:annotation-config /&gt;

    &lt;bean id="hello" class="learning.spring.helloworld.Hello" destroy-method="close" /&gt;
&lt;/beans&gt;</CODE></PRE>
<P>&#20195;&#30721;&#31034;&#20363; 2-19 &#23545;&#36816;&#34892;&#31867;&#31616;&#21333;&#20570;&#20102;&#20123;&#35843;&#25972;&#65292;&#22686;&#21152;&#20102;&#20851;&#38381;&#23481;&#22120;&#30340;&#21160;&#20316;&#65292;&#20197;&#20415;&#33021;&#35753;&#25105;&#20204;&#35266;&#23519;&#21040; Bean &#38144;&#27585;&#30340;&#21160;&#20316;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-19</STRONG>&#12288;&#21551;&#21160;&#29992;&#30340; <CODE>Application</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Application {
    private ClassPathXmlApplicationContext applicationContext;

    public static void main(String[] args) {
        Application application = new Application();
        application.sayHello();
        application.close();
    }

    public Application() {
        applicationContext = new ClassPathXmlApplicationContext("beans.xml");
    }

    public void sayHello() {
        Hello hello = (Hello) applicationContext.getBean("hello");
        System.out.println(hello.hello());
    }

    public void close() {
        applicationContext.close();
    }
}</CODE></PRE>
<P>&#36825;&#27573;&#20195;&#30721;&#36816;&#34892;&#21518;&#30340;&#36755;&#20986;&#21363;&#20195;&#34920;&#20102;&#19977;&#20010;&#26041;&#27861;&#30340;&#35843;&#29992;&#39034;&#24207;&#65292;&#26159;&#19982;&#19978;&#36848;&#39034;&#24207;&#19968;&#33268;&#30340;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>Hello World!
shutdown()
destroy()
close()</CODE></PRE>
<P>&#24403;&#28982;&#65292;&#22312;&#19968;&#33324;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#24182;&#19981;&#20250;&#22312;&#19968;&#20010; Bean &#19978;&#20889;&#20960;&#20010;&#20316;&#29992;&#19981;&#21516;&#30340;&#21021;&#22987;&#21270;&#25110;&#38144;&#27585;&#26041;&#27861;&#12290;&#36825;&#31181;&#24773;&#20917;&#24182;&#19981;&#24120;&#35265;&#65292;&#22823;&#23478;&#20102;&#35299;&#21363;&#21487;&#12290;</P></LI></UL>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>19</SPAN>&#36825;&#20010;&#31034;&#20363;&#20301;&#20110; ch2/helloworld-lifecycle &#39033;&#30446;&#20013;&#12290;</P>
<H3 id=nav_point_35>2.3.2&#12288;Aware &#25509;&#21475;&#30340;&#24212;&#29992;</H3>
<P>&#22312;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#30340; Bean &#24863;&#30693;&#19981;&#21040; Spring &#23481;&#22120;&#30340;&#23384;&#22312;&#65292;&#20063;&#26080;&#39035;&#24863;&#30693;&#12290;&#20294;&#24635;&#26377;&#37027;&#20040;&#19968;&#20123;&#22330;&#26223;&#20013;&#25105;&#20204;&#35201;&#29992;&#21040;&#23481;&#22120;&#30340;&#19968;&#20123;&#29305;&#27530;&#21151;&#33021;&#65292;&#36825;&#26102;&#23601;&#21487;&#20197;&#20351;&#29992; Spring Framework &#25552;&#20379;&#30340;&#24456;&#22810; <CODE>Aware</CODE> &#25509;&#21475;&#65292;&#35753; Bean &#33021;&#24863;&#30693;&#21040;&#23481;&#22120;&#30340;&#35832;&#22810;&#20449;&#24687;&#12290;&#27492;&#22806;&#65292;&#26377;&#20123;&#23481;&#22120;&#30456;&#20851;&#30340; Bean &#19981;&#33021;&#30001;&#25105;&#20204;&#33258;&#24049;&#26469;&#21019;&#24314;&#65292;&#24517;&#39035;&#30001;&#23481;&#22120;&#21019;&#24314;&#21518;&#27880;&#20837;&#25105;&#20204;&#30340; Bean &#20013;&#12290;</P>
<P>&#20363;&#22914;&#65292;&#22914;&#26524;&#24076;&#26395;&#22312; Bean &#20013;&#33719;&#21462;&#23481;&#22120;&#20449;&#24687;&#65292;&#21487;&#20197;&#36890;&#36807;&#22914;&#19979;&#20004;&#31181;&#26041;&#24335;&#65306;</P>
<UL>
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#23454;&#29616; <CODE>BeanFactoryAware</CODE> &#25110; <CODE>ApplicationContextAware</CODE> &#25509;&#21475;&#65307; 
<LI class=&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;>&#29992; <CODE>@Autowired</CODE> &#27880;&#35299;&#26469;&#27880;&#20837; <CODE>BeanFactory</CODE> &#25110; <CODE>ApplicationContext</CODE>&#12290; </LI></UL>
<P>&#20004;&#31181;&#26041;&#24335;&#30340;&#26412;&#36136;&#37117;&#26159;&#19968;&#26679;&#30340;&#65292;&#21363;&#35753;&#23481;&#22120;&#27880;&#20837;&#19968;&#20010; <CODE>BeanFactory</CODE> &#25110; <CODE>ApplicationContext</CODE> &#23545;&#35937;&#12290;<CODE>ApplicationContextAware</CODE> &#26159;&#19979;&#38754;&#36825;&#26679;&#30340;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public interface ApplicationContextAware {
    void setApplicationContext(ApplicationContext applicationContext) throws BeansException;
}</CODE></PRE>
<P>&#22312;&#25343;&#21040; <CODE>ApplicationContext</CODE> &#21518;&#65292;&#23601;&#33021;&#25805;&#20316;&#35813;&#23545;&#35937;&#65292;&#27604;&#22914;&#35843;&#29992; <CODE>getBean()</CODE> &#26041;&#27861;&#21462;&#24471;&#24819;&#35201;&#30340; Bean&#12290;&#33021;&#30452;&#25509;&#25805;&#20316; <CODE>ApplicationContext</CODE> &#26377;&#26102;&#21487;&#20197;&#24102;&#26469;&#24456;&#22810;&#20415;&#21033;&#65292;&#22240;&#27492;&#36825;&#20010;&#25509;&#21475;&#30456;&#27604;&#20854;&#20182;&#30340; <CODE>Aware</CODE> &#25509;&#21475;&#8220;&#20986;&#38236;&#29575;&#8221;&#26356;&#39640;&#19968;&#20123;&#12290;</P>
<P>&#22914;&#26524; Bean &#24076;&#26395;&#33719;&#24471;&#33258;&#24049;&#22312;&#23481;&#22120;&#20013;&#23450;&#20041;&#30340; Bean &#21517;&#31216;&#65292;&#21487;&#20197;&#23454;&#29616; <CODE>BeanNameAware</CODE> &#25509;&#21475;&#12290;&#36825;&#20010;&#25509;&#21475;&#30340; <CODE>setBeanName()</CODE> &#26041;&#27861;&#23601;&#26159;&#27880;&#20837;&#19968;&#20010;&#20195;&#34920;&#21517;&#31216;&#30340;&#23383;&#31526;&#20018;&#65292;&#20063;&#31639;&#26159;&#19968;&#20010;&#20381;&#36182;&#65292;&#22240;&#27492;&#20250;&#22312; 2.3.1 &#33410;&#25552;&#21040;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#21069;&#34987;&#25191;&#34892;&#12290;</P>
<P>&#22312; 2.3.3 &#33410;&#20013;&#20250;&#25552;&#21040; Spring &#23481;&#22120;&#30340;&#20107;&#20214;&#26426;&#21046;&#65292;&#36825;&#26102;&#23601;&#20250;&#29992;&#21040; <CODE>ApplicationEventPublisher</CODE> &#26469;&#21457;&#36865;&#20107;&#20214;&#65292;&#21487;&#20197;&#23454;&#29616; <CODE>ApplicationEventPublisherAware</CODE> &#25509;&#21475;&#65292;&#20174;&#23481;&#22120;&#20013;&#33719;&#24471; <CODE>ApplicationEventPublisher</CODE> &#23454;&#20363;&#12290;</P>
<P>Spring Framework &#20013;&#36824;&#26377;&#24456;&#22810;&#20854;&#20182; <CODE>Aware</CODE> &#25509;&#21475;&#65292;&#24863;&#20852;&#36259;&#30340;&#35805;&#65292;&#22823;&#23478;&#21487;&#20197;&#26597;&#38405;&#23448;&#26041;&#25991;&#26723;&#20102;&#35299;&#26356;&#22810;&#35814;&#24773;&#12290;</P>
<H3 id=nav_point_36>2.3.3&#12288;&#20107;&#20214;&#26426;&#21046;</H3>
<P><CODE>ApplicationContext</CODE> &#25552;&#20379;&#20102;&#19968;&#22871;&#20107;&#20214;&#26426;&#21046;&#65292;&#22312;&#23481;&#22120;&#21457;&#29983;&#21464;&#21160;&#26102;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807; <CODE>ApplicationEvent</CODE> &#30340;&#23376;&#31867;&#36890;&#30693;&#21040; <CODE>ApplicationListener</CODE> &#25509;&#21475;&#30340;&#23454;&#29616;&#31867;&#65292;&#20570;&#23545;&#24212;&#30340;&#22788;&#29702;&#12290;&#20363;&#22914;&#65292;<CODE>ApplicationContext</CODE> &#22312;&#21551;&#21160;&#12289;&#20572;&#27490;&#12289;&#20851;&#38381;&#21644;&#21047;&#26032; <SPAN class=&#27880;&#37322;&#32534;&#21495;>20</SPAN> &#26102;&#65292;&#20998;&#21035;&#20250;&#21457;&#20986; <CODE>ContextStartedEvent</CODE>&#12289;<CODE>ContextStoppedEvent</CODE>&#12289;<CODE>ContextClosedEvent</CODE> &#21644; <CODE>ContextRefreshedEvent</CODE> &#20107;&#20214;&#65292;&#36825;&#20123;&#20107;&#20214;&#23601;&#35753;&#25105;&#20204;&#26377;&#26426;&#20250;&#24863;&#30693;&#24403;&#21069;&#23481;&#22120;&#30340;&#29366;&#24577;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>20</SPAN>&#20165;&#36866;&#29992;&#20110;&#25903;&#25345;&#21047;&#26032;&#30340; <CODE>ApplicationContext</CODE> &#23454;&#29616;&#65292;&#26377;&#30340;&#23481;&#22120;&#21487;&#20197;&#25903;&#25345;&#22810;&#27425;&#21047;&#26032;&#12290;</P>
<P>&#25105;&#20204;&#20063;&#21487;&#20197;&#33258;&#24049;&#30417;&#21548;&#36825;&#20123;&#20107;&#20214;&#65292;&#21482;&#38656;&#23454;&#29616; <CODE>ApplicationListener</CODE> &#25509;&#21475;&#25110;&#32773;&#22312;&#26576;&#20010; Bean &#30340;&#26041;&#27861;&#19978;&#22686;&#21152; <CODE>@EventListener</CODE> &#27880;&#35299;&#21363;&#21487;&#65292;&#20363;&#22914;&#20195;&#30721;&#31034;&#20363; 2-20 &#21644;&#20195;&#30721;&#31034;&#20363; 2-21<SPAN class=&#27880;&#37322;&#32534;&#21495;>21</SPAN> &#23601;&#29992;&#20197;&#19978;&#20004;&#31181;&#26041;&#24335;&#20998;&#21035;&#22788;&#29702;&#20102; <CODE>ContextClosedEvent</CODE> &#20107;&#20214;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>21</SPAN>&#36825;&#37096;&#20998;&#30340;&#20363;&#23376;&#22312; ch2/helloworld-event &#39033;&#30446;&#20013;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-20</STRONG>&#12288;&#29992; <CODE>ApplicationListener</CODE> &#25509;&#21475;&#22788;&#29702; <CODE>ContextClosedEvent</CODE> &#20107;&#20214;&#30340; <CODE>ContextClosedEventListener</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Component
@Order(1)
public class ContextClosedEventListener implements ApplicationListener&lt;ContextClosedEvent&gt; {
    @Override
    public void onApplicationEvent(ContextClosedEvent event) {
        System.out.println("[ApplicationListener]ApplicationContext closed.");
    }
}</CODE></PRE>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-21</STRONG>&#12288;&#29992; <CODE>@EventListener</CODE> &#27880;&#35299;&#22788;&#29702; <CODE>ContextClosedEvent</CODE> &#20107;&#20214;&#30340; <CODE>ContextClosedEventAnnotationListener</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Component
public class ContextClosedEventAnnotationListener {
    @EventListener
    @Order(2)
    public void onEvent(ContextClosedEvent event) {
        System.out.println("[@EventListener]ApplicationContext closed.");
    }
}</CODE></PRE>
<P>&#22312;&#36816;&#34892; ch2/helloworld-event &#20013;&#30340; <CODE>Application</CODE> &#21518;&#20250;&#24471;&#21040;&#22914;&#19979;&#36755;&#20986;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&#19978;&#30053;&#8230;&#8230;
[ApplicationListener]ApplicationContext closed.
[@EventListener]ApplicationContext closed.</CODE></PRE>
<P>&#21487;&#20197;&#30475;&#21040;&#20004;&#20010;&#31867;&#37117;&#22788;&#29702;&#20102; <CODE>ContextClosedEvent</CODE> &#20107;&#20214;&#65292;&#25105;&#20204;&#36890;&#36807; <CODE>@Order</CODE> &#21487;&#20197;&#25351;&#23450;&#22788;&#29702;&#30340;&#39034;&#24207;&#12290;</P>
<P>&#36825;&#22871;&#26426;&#21046;&#19981;&#20165;&#36866;&#29992;&#20110; Spring Framework &#30340;&#20869;&#32622;&#20107;&#20214;&#65292;&#20063;&#38750;&#24120;&#26041;&#20415;&#25105;&#20204;&#23450;&#20041;&#33258;&#24049;&#30340;&#20107;&#20214;&#65292;&#19981;&#36807;&#35813;&#20107;&#20214;&#24517;&#39035;&#32487;&#25215; <CODE>ApplicationEvent</CODE>&#65292;&#32780;&#19988;&#20135;&#29983;&#20107;&#20214;&#30340;&#31867;&#38656;&#35201;&#23454;&#29616; <CODE>ApplicationEventPublisherAware</CODE>&#65292;&#36824;&#35201;&#20174;&#19978;&#19979;&#25991;&#20013;&#33719;&#21462;&#21040; <CODE>ApplicationEventPublisher</CODE>&#65292;&#29992;&#23427;&#26469;&#21457;&#36865;&#20107;&#20214;&#12290;&#20195;&#30721;&#31034;&#20363; 2-22 &#26159;&#20107;&#20214;&#29983;&#20135;&#32773; <CODE>CustomEventPublisher</CODE> &#31867;&#30340;&#20195;&#30721;&#29255;&#27573;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-22</STRONG>&#12288;&#29983;&#20135;&#20107;&#20214;&#30340; <CODE>CustomEventPublisher</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Component
public class CustomEventPublisher implements ApplicationEventPublisherAware {
    private ApplicationEventPublisher publisher;

    public void fire() {
        publisher.publishEvent(new CustomEvent("Hello"));
    }

    @Override
    public void setApplicationEventPublisher( ApplicationEventPublisher applicationEventPublisher) {
        this.publisher = applicationEventPublisher;
    }
}</CODE></PRE>
<P>&#23545;&#24212;&#30340;&#20107;&#20214;&#30417;&#21548;&#20195;&#30721;&#20063;&#38750;&#24120;&#31616;&#21333;&#65292;&#23545;&#24212;&#26041;&#27861;&#22914;&#19979;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@EventListener
public void onEvent(CustomEvent customEvent) {
    System.out.println("CustomEvent Source: " + customEvent.getSource());
}</CODE></PRE>
<P>&#22312;&#36816;&#34892; ch2/helloworld-event &#20013;&#30340; <CODE>Application</CODE> &#21518;&#20250;&#24471;&#21040;&#22914;&#19979;&#36755;&#20986;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&#19978;&#30053;&#8230;&#8230;
CustomEvent Source: Hello
&#19979;&#30053;&#8230;&#8230;</CODE></PRE>
<P><CODE>@EventListener</CODE> &#36824;&#26377;&#19968;&#20123;&#20854;&#20182;&#30340;&#29992;&#27861;&#65292;&#27604;&#22914;&#65292;&#22312;&#30417;&#21548;&#21040;&#20107;&#20214;&#21518;&#24076;&#26395;&#20877;&#21457;&#20986;&#21478;&#19968;&#20010;&#20107;&#20214;&#65292;&#36825;&#26102;&#21487;&#20197;&#23558;&#26041;&#27861;&#36820;&#22238;&#20540;&#20174; <CODE>void</CODE> &#20462;&#25913;&#20026;&#23545;&#24212;&#20107;&#20214;&#30340;&#31867;&#22411;&#65307;<CODE>@EventListener</CODE> &#20063;&#21487;&#20197;&#19982; <CODE>@Async</CODE> &#27880;&#35299;&#32467;&#21512;&#65292;&#23454;&#29616;&#22312;&#21478;&#19968;&#20010;&#32447;&#31243;&#20013;&#22788;&#29702;&#20107;&#20214;&#12290;&#20851;&#20110; <CODE>@Async</CODE> &#27880;&#35299;&#65292;&#25105;&#20204;&#20250;&#22312; 2.4.2 &#33410;&#20013;&#36827;&#34892;&#35828;&#26126;&#12290;</P>
<H3 id=nav_point_37>2.3.4&#12288;&#23481;&#22120;&#30340;&#25193;&#23637;&#28857;</H3>
<P>Spring &#23481;&#22120;&#26159;&#38750;&#24120;&#28789;&#27963;&#30340;&#65292;Spring Framework &#20013;&#26377;&#24456;&#22810;&#26426;&#21046;&#26159;&#36890;&#36807;&#23481;&#22120;&#33258;&#36523;&#30340;&#25193;&#23637;&#28857;&#26469;&#23454;&#29616;&#30340;&#65292;&#27604;&#22914; Spring AOP &#31561;&#12290;&#22914;&#26524;&#25105;&#20204;&#24819;&#22312; Spring Framework &#19978;&#23553;&#35013;&#33258;&#24049;&#30340;&#26694;&#26550;&#25110;&#21151;&#33021;&#65292;&#20063;&#21487;&#20197;&#20805;&#20998;&#21033;&#29992;&#23481;&#22120;&#30340;&#25193;&#23637;&#28857;&#12290;</P>
<P><CODE>BeanPostProcessor</CODE> &#25509;&#21475;&#26159;&#29992;&#26469;&#23450;&#21046; Bean &#30340;&#65292;&#39038;&#21517;&#24605;&#20041;&#65292;&#36825;&#20010;&#25509;&#21475;&#26159; Bean &#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#22312; Spring &#23481;&#22120;&#21021;&#22987;&#21270; Bean &#26102;&#21487;&#20197;&#21152;&#20837;&#25105;&#20204;&#33258;&#24049;&#30340;&#36923;&#36753;&#12290;&#35813;&#25509;&#21475;&#20013;&#26377;&#20004;&#20010;&#26041;&#27861;&#65292;<CODE>postProcessBeforeInitialization()</CODE> &#26041;&#27861;&#22312; Bean &#21021;&#22987;&#21270;&#21069;&#25191;&#34892;&#65292;<CODE>postProcessAfterInitialization()</CODE> &#26041;&#27861;&#22312; Bean &#21021;&#22987;&#21270;&#20043;&#21518;&#25191;&#34892;&#12290;&#22914;&#26524;&#26377;&#22810;&#20010; <CODE>BeanPostProcessor</CODE>&#65292;&#21487;&#20197;&#36890;&#36807; <CODE>Ordered</CODE> &#25509;&#21475;&#25110;&#32773; <CODE>@Order</CODE> &#27880;&#35299;&#26469;&#25351;&#23450;&#36816;&#34892;&#30340;&#39034;&#24207;&#12290;&#20195;&#30721;&#31034;&#20363; 2-23<SPAN class=&#27880;&#37322;&#32534;&#21495;>22</SPAN> &#28436;&#31034;&#20102; <CODE>BeanPostProcessor</CODE> &#30340;&#22522;&#26412;&#29992;&#27861;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>22</SPAN>&#36825;&#20010;&#31034;&#20363;&#22312; ch2/helloworld-processor &#39033;&#30446;&#20013;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-23</STRONG>&#12288;&#25171;&#21360;&#20449;&#24687;&#30340; <CODE>HelloBeanPostProcessor</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class HelloBeanPostProcessor implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        if ("hello".equals(beanName)) {
            System.out.println("Hello postProcessBeforeInitialization");
        }
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        if ("hello".equals(beanName)) {
            System.out.println("Hello postProcessAfterInitialization");
        }
        return bean;
    }
}</CODE></PRE>
<P>&#25105;&#20204;&#22312;&#23545;&#24212;&#30340; <CODE>Hello</CODE> &#20013;&#65292;&#20063;&#22686;&#21152;&#19968;&#20010;&#24102; <CODE>@PostConstruct</CODE> &#27880;&#35299;&#30340;&#26041;&#27861;&#65292;&#25191;&#34892; ch2/helloworld-processor &#20013;&#30340; <CODE>Application</CODE> &#31867;&#65292;&#39564;&#35777;&#19968;&#19979;&#26041;&#27861;&#30340;&#25191;&#34892;&#39034;&#24207;&#26159;&#21542;&#19982;&#22823;&#23478;&#39044;&#24819;&#30340;&#19968;&#26679;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>Hello postProcessBeforeInitialization
Hello PostConstruct
Hello postProcessAfterInitialization</CODE></PRE>
<P>&#22914;&#26524;&#35828; <CODE>BeanPostProcessor</CODE> &#26159; Bean &#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#37027; <CODE>BeanFactoryPostProcessor</CODE> &#23601;&#26159; <CODE>BeanFactory</CODE> &#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#23427;&#26469;&#23450;&#21046; Bean &#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;&#20854;&#20013;&#30340; <CODE>postProcessBeanFactory()</CODE> &#26041;&#27861;&#20250;&#22312; <CODE>BeanFactory</CODE> &#21152;&#36733;&#25152;&#26377; Bean &#23450;&#20041;&#20294;&#23578;&#26410;&#23545;&#20854;&#36827;&#34892;&#21021;&#22987;&#21270;&#26102;&#20171;&#20837;&#12290;&#23427;&#30340;&#29992;&#27861;&#19982; <CODE>BeanPostProcessor</CODE> &#31867;&#20284;&#65292;&#27492;&#22788;&#23601;&#19981;&#20877;&#36184;&#36848;&#20102;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#22914;&#26524;&#29992; Java &#37197;&#32622;&#31867;&#26469;&#27880;&#20876;&#65292;&#37027;&#20040;&#26041;&#27861;&#38656;&#35201;&#22768;&#26126;&#20026; <CODE>static</CODE>&#12290;2.4.1 &#33410;&#20013;&#20250;&#35762;&#21040;&#30340; <CODE>PropertySourcesPlaceholderConfigurer</CODE> &#23601;&#26159;&#19968;&#20010; <CODE>BeanFactoryPostProcessor</CODE> &#30340;&#23454;&#29616;&#12290;</P>
<P>&#38656;&#35201;&#37325;&#28857;&#35828;&#26126;&#19968;&#19979;&#65292;&#30001;&#20110; Spring AOP &#20063;&#26159;&#36890;&#36807; <CODE>BeanPostProcessor</CODE> &#23454;&#29616;&#30340;&#65292;&#22240;&#27492;&#23454;&#29616;&#35813;&#25509;&#21475;&#30340;&#31867;&#65292;&#20197;&#21450;&#20854;&#20013;&#30452;&#25509;&#24341;&#29992;&#30340; Bean &#37117;&#20250;&#34987;&#29305;&#27530;&#23545;&#24453;&#65292;<STRONG>&#19981;&#20250;</STRONG>&#34987; AOP &#22686;&#24378;&#12290;&#27492;&#22806;&#65292;<CODE>BeanPostProcessor</CODE> &#21644; <CODE>BeanFactoryPostProcessor</CODE> &#37117;&#20165;&#23545;&#24403;&#21069;&#23481;&#22120;&#19978;&#19979;&#25991;&#30340; Bean &#26377;&#25928;&#65292;&#19981;&#20250;&#21435;&#22788;&#29702;&#20854;&#20182;&#19978;&#19979;&#25991;&#12290;</P>
<H3 id=nav_point_38>2.3.5&#12288;&#20248;&#38597;&#22320;&#20851;&#38381;&#23481;&#22120;</H3>
<P>Java &#36827;&#31243;&#22312;&#36864;&#20986;&#26102;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807; <CODE>Runtime.getRuntime().addShutdownHook()</CODE> &#26041;&#27861;&#28155;&#21152;&#19968;&#20123;&#38057;&#23376;&#65292;&#22312;&#20851;&#38381;&#36827;&#31243;&#26102;&#25191;&#34892;&#29305;&#23450;&#30340;&#25805;&#20316;&#12290;&#22914;&#26524;&#26159; Spring &#24212;&#29992;&#65292;&#22312;&#36827;&#31243;&#36864;&#20986;&#26102;&#20063;&#35201;&#33021;&#27491;&#30830;&#22320;&#25191;&#34892;&#19968;&#20123;&#28165;&#29702;&#30340;&#26041;&#27861;&#12290;</P>
<P><CODE>ConfigurableApplicationContext</CODE> &#25509;&#21475;&#25193;&#23637;&#33258; <CODE>ApplicationContext</CODE>&#65292;&#20854;&#20013;&#25552;&#20379;&#20102;&#19968;&#20010; <CODE>registerShutdownHook()</CODE>&#12290;<CODE>AbstractApplicationContext</CODE> &#31867;&#23454;&#29616;&#20102;&#35813;&#26041;&#27861;&#65292;&#27491;&#26159;&#35843;&#29992;&#20102;&#21069;&#38754;&#35828;&#21040;&#30340; <CODE>Runtime.getRuntime().addShutdownHook()</CODE>&#65292;&#24182;&#19988;&#22312;&#20854;&#20869;&#37096;&#35843;&#29992;&#20102; <CODE>doClose()</CODE> &#26041;&#27861;&#12290;</P>
<P>&#35774;&#24819;&#22312;&#29983;&#20135;&#20195;&#30721;&#37324;&#26377;&#36825;&#20040;&#19968;&#31181;&#24773;&#20917;&#65306;&#19968;&#20010; Bean &#36890;&#36807; <CODE>ApplicationContextAware</CODE> &#27880;&#20837;&#20102; <CODE>ApplicationContext</CODE>&#65292;&#19994;&#21153;&#20195;&#30721;&#26681;&#25454;&#36923;&#36753;&#21028;&#26029;&#20174; <CODE>ApplicationContext</CODE> &#20013;&#21462;&#20986;&#23545;&#24212;&#21517;&#31216;&#30340; Bean&#65292;&#20877;&#36827;&#34892;&#35843;&#29992;&#65307;&#38382;&#39064;&#20986;&#29616;&#22312;&#24212;&#29992;&#31243;&#24207;&#20851;&#38381;&#26102;&#65292;&#23481;&#22120;&#24050;&#32463;&#24320;&#22987;&#38144;&#27585; Bean &#20102;&#65292;&#21487;&#26159;&#36825;&#27573;&#19994;&#21153;&#20195;&#30721;&#36824;&#22312;&#25191;&#34892;&#65292;&#20173;&#22312;&#32487;&#32493;&#23581;&#35797;&#20174;&#23481;&#22120;&#20013;&#33719;&#21462; Bean&#65292;&#32780;&#19988;&#20195;&#30721;&#36824;&#27809;&#27491;&#30830;&#22788;&#29702;&#27492;&#22788;&#30340;&#24322;&#24120;&#8230;&#8230;&#36825;&#35813;&#22914;&#20309;&#26159;&#22909;&#65311;</P>
<P>&#38024;&#23545;&#36825;&#31181;&#24773;&#20917;&#65292;&#25105;&#20204;&#21487;&#20197;&#20511;&#21161; Spring Framework &#25552;&#20379;&#30340; <CODE>Lifecycle</CODE> &#26469;&#24863;&#30693;&#23481;&#22120;&#30340;&#21551;&#21160;&#21644;&#20572;&#27490;&#65292;&#23481;&#22120;&#20250;&#23558;&#21551;&#21160;&#21644;&#20572;&#27490;&#30340;&#20449;&#21495;&#20256;&#25773;&#32473;&#23454;&#29616;&#20102;&#35813;&#25509;&#21475;&#30340;&#32452;&#20214;&#21644;&#19978;&#19979;&#25991;&#12290;&#20026;&#20102;&#35753;&#20363;&#23376;&#33021;&#22815;&#31616;&#21333;&#19968;&#20123;&#65292;&#25105;&#20204;&#25226;&#38382;&#39064;&#31616;&#21270;&#19968;&#19979;&#65306;<CODE>Hello.hello()</CODE> &#22312;&#23481;&#22120;&#20851;&#38381;&#21069;&#21518;&#36820;&#22238;&#19981;&#21516;&#30340;&#20869;&#23481;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 2-24<SPAN class=&#27880;&#37322;&#32534;&#21495;>23</SPAN> &#25152;&#31034;&#12290;</P>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>23</SPAN>&#36825;&#20010;&#31034;&#20363;&#22312; ch2/helloworld-shutdown &#39033;&#30446;&#20013;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-24</STRONG>&#12288;&#23454;&#29616;&#20102; <CODE>Lifecycle</CODE> &#25509;&#21475;&#30340; <CODE>Hello</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Hello implements Lifecycle {
    private boolean flag = false;

    public String hello() {
        return flag ? "Hello World!" : "Bye!";
    }

    @Override
    public void start() {
        System.out.println("Context Started.");
        flag = true;
    }

    @Override
    public void stop() {
        System.out.println("Context Stopped.");
        flag = false;
    }

    @Override
    public boolean isRunning() {
        return flag;
    }
}</CODE></PRE>
<P>&#25105;&#20204;&#23558;&#23545;&#24212;&#30340; <CODE>Application</CODE> &#31867;&#20063;&#20570;&#30456;&#24212;&#35843;&#25972;&#65292;&#20855;&#20307;&#22914;&#20195;&#30721;&#31034;&#20363; 2-25 &#25152;&#31034;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-25</STRONG>&#12288;&#35843;&#25972;&#21518;&#30340; <CODE>Application</CODE> &#31867;&#20195;&#30721;&#29255;&#27573;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
public class Application {
    public static void main(String[] args) {
        AnnotationConfigApplicationContext applicationContext =
            new AnnotationConfigApplicationContext(Application.class);
        applicationContext.start(); // &#36825;&#20250;&#35302;&#21457;Lifecycle&#30340;start()
        Hello hello = applicationContext.getBean("hello", Hello.class);
        System.out.println(hello.hello());
        applicationContext.close(); // &#36825;&#20250;&#35302;&#21457;Lifecycle&#30340;stop()
        System.out.println(hello.hello());
    }

    @Bean
    public Hello hello() {
        return new Hello();
    }
}</CODE></PRE>
<P>&#19978;&#36848;&#20195;&#30721;&#30340;&#25191;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>Context Started.
Hello World!
Context Stopped.
Bye!</CODE></PRE>
<P>&#38500;&#27492;&#20043;&#22806;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#20511;&#21161; Spring Framework &#30340;&#20107;&#20214;&#26426;&#21046;&#65292;&#22312;&#19978;&#19979;&#25991;&#20851;&#38381;&#26102;&#20250;&#21457;&#20986; <CODE>ContextClosedEvent</CODE>&#65292;&#30417;&#21548;&#35813;&#20107;&#20214;&#20063;&#21487;&#20197;&#35302;&#21457;&#19994;&#21153;&#20195;&#30721;&#20570;&#23545;&#24212;&#30340;&#25805;&#20316;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#33590;&#27463;&#26102;&#38388;&#65306;Linux &#29615;&#22659;&#19979;&#22914;&#20309;&#20851;&#38381;&#36827;&#31243;</STRONG></P>
<P>&#22312; Linux &#29615;&#22659;&#19979;&#65292;&#22823;&#23478;&#24120;&#29992; <CODE>kill</CODE> &#21629;&#20196;&#26469;&#20851;&#38381;&#36827;&#31243;&#65292;&#20854;&#23454;&#26159; <CODE>kill</CODE> &#21629;&#20196;&#32473;&#36827;&#31243;&#21457;&#36865;&#20102;&#19968;&#20010;&#20449;&#21495;&#65288;&#36890;&#36807; <CODE>kill -l</CODE> &#21629;&#20196;&#21487;&#20197;&#26597;&#30475;&#20449;&#21495;&#21015;&#34920;&#65289;&#12290;&#19981;&#24102;&#21442;&#25968;&#30340;&#8220;<CODE>kill &#36827;&#31243;&#21495;</CODE>&#8221;&#21457;&#36865;&#30340;&#26159; <CODE>SIGTERM(15)</CODE>&#65292;&#19968;&#33324;&#31243;&#24207;&#22312;&#25910;&#21040;&#36825;&#20010;&#20449;&#21495;&#21518;&#37117;&#20250;&#20808;&#37322;&#25918;&#36164;&#28304;&#65292;&#20877;&#20572;&#27490;&#65307;&#20294;&#26377;&#26102;&#31243;&#24207;&#21487;&#33021;&#36824;&#26159;&#26080;&#27861;&#36864;&#20986;&#65292;&#36825;&#26102;&#23601;&#21487;&#20197;&#20351;&#29992;&#8220;<CODE>kill -9 &#36827;&#31243;&#21495;</CODE>&#8221;&#65292;&#21457;&#36865; <CODE>SIGKILL(9)</CODE>&#65292;&#30452;&#25509;&#26432;&#27515;&#36827;&#31243;&#12290;</P>
<P>&#19968;&#33324;&#19981;&#24314;&#35758;&#30452;&#25509;&#20351;&#29992; <CODE>-9</CODE>&#65292;&#22240;&#20026;&#38750;&#27491;&#24120;&#22320;&#20013;&#26029;&#31243;&#24207;&#21487;&#33021;&#20250;&#36896;&#25104;&#19968;&#20123;&#24847;&#26009;&#20043;&#22806;&#30340;&#24773;&#20917;&#65292;&#27604;&#22914;&#19994;&#21153;&#36923;&#36753;&#22788;&#29702;&#21040;&#19968;&#21322;&#65292;&#24674;&#22797;&#25163;&#27573;&#19981;&#22815;&#20581;&#20840;&#30340;&#35805;&#65292;&#21487;&#33021;&#38656;&#35201;&#20154;&#24037;&#20171;&#20837;&#22788;&#29702;&#37027;&#20123;&#25191;&#34892;&#21040;&#19968;&#21322;&#30340;&#20869;&#23481;&#12290;</P></BLOCKQUOTE>
<H2 id=nav_point_39>2.4&#12288;&#23481;&#22120;&#20013;&#30340;&#20960;&#31181;&#25277;&#35937;</H2>
<P>Spring Framework &#38024;&#23545;&#30740;&#21457;&#21644;&#36816;&#32500;&#36807;&#31243;&#20013;&#30340;&#24456;&#22810;&#24120;&#35265;&#22330;&#26223;&#20570;&#20102;&#25277;&#35937;&#22788;&#29702;&#65292;&#27604;&#22914;&#26412;&#33410;&#20013;&#20250;&#35762;&#21040;&#30340;&#38024;&#23545;&#36816;&#34892;&#29615;&#22659;&#30340;&#25277;&#35937;&#65292;&#21518;&#32493;&#31456;&#33410;&#20013;&#20250;&#32842;&#21040;&#30340;&#20107;&#21153;&#25277;&#35937;&#31561;&#12290;&#27491;&#26159;&#22240;&#20026;&#23384;&#22312;&#36825;&#20123;&#25277;&#35937;&#23618;&#65292;Spring Framework &#25165;&#33021;&#20026;&#25105;&#20204;&#23631;&#34109;&#24213;&#23618;&#30340;&#24456;&#22810;&#32454;&#33410;&#12290;</P>
<H3 id=nav_point_40>2.4.1&#12288;&#29615;&#22659;&#25277;&#35937;</H3>
<P>&#33258;&#35806;&#29983;&#20043;&#26085;&#36215;&#65292;Java &#31243;&#24207;&#23601;&#19968;&#30452;&#23459;&#20256;&#33258;&#24049;&#26159;&#8220;Write once, run anywhere&#8221;&#65292;&#20294;&#24448;&#24448;&#29616;&#23454;&#24182;&#38750;&#22914;&#27492;&#8212;&#8212;&#34429;&#28982;&#26377; JVM &#36825;&#23618;&#38548;&#31163;&#65292;&#20294;&#25105;&#20204;&#30340;&#31243;&#24207;&#36824;&#26159;&#38656;&#35201;&#24212;&#23545;&#19981;&#21516;&#30340;&#36816;&#34892;&#29615;&#22659;&#32454;&#33410;&#65306;&#27604;&#22914;&#20351;&#29992;&#20102; WebLogic &#30340;&#26576;&#20123;&#29305;&#24615;&#20250;&#23548;&#33268;&#31243;&#24207;&#24456;&#38590;&#36801;&#31227;&#21040; Tomcat &#19978;&#65307;&#27492;&#22806;&#65292;&#31243;&#24207;&#36824;&#35201;&#38754;&#23545;&#24320;&#21457;&#12289;&#27979;&#35797;&#12289;&#39044;&#21457;&#24067;&#12289;&#29983;&#20135;&#31561;&#29615;&#22659;&#30340;&#37197;&#32622;&#24046;&#24322;&#65307;&#22312;&#20113;&#19978;&#65292;&#19981;&#21516;&#21487;&#29992;&#21306;&#65288;availability zone&#65289;&#21487;&#33021;&#20063;&#26377;&#32454;&#24494;&#30340;&#24046;&#24322;&#12290;Spring Framework &#30340;&#29615;&#22659;&#25277;&#35937;&#21487;&#20197;&#31616;&#21270;&#22823;&#23478;&#22312;&#22788;&#29702;&#36825;&#20123;&#38382;&#39064;&#26102;&#30340;&#22797;&#26434;&#24230;&#65292;&#20195;&#34920;&#31243;&#24207;&#36816;&#34892;&#29615;&#22659;&#30340; <CODE>Environment</CODE> &#25509;&#21475;&#21253;&#21547;&#20004;&#20010;&#20851;&#38190;&#20449;&#24687;&#8212;&#8212;Profile &#21644; Properties&#65292;&#19979;&#38754;&#25105;&#20204;&#23558;&#35814;&#32454;&#23637;&#24320;&#36825;&#20004;&#39033;&#20869;&#23481;&#12290;</P>
<OL>
<LI>
<P><STRONG>Profile &#25277;&#35937;</STRONG></P>
<P>&#20551;&#35774;&#25105;&#20204;&#30340;&#31995;&#32479;&#22312;&#27979;&#35797;&#29615;&#22659;&#20013;&#19981;&#38656;&#35201;&#21152;&#36733;&#30417;&#25511;&#30456;&#20851;&#30340; Bean&#65292;&#32780;&#22312;&#29983;&#20135;&#29615;&#22659;&#20013;&#21017;&#38656;&#35201;&#21152;&#36733;&#65307;&#20134;&#25110;&#32773;&#38024;&#23545;&#19981;&#21516;&#30340;&#23458;&#25143;&#35201;&#27714;&#65292;A &#23458;&#25143;&#35201;&#27714;&#25105;&#20204;&#37096;&#32626;&#30340;&#31995;&#32479;&#30452;&#25509;&#37197;&#32622;&#25968;&#25454;&#24211;&#36830;&#25509;&#27744;&#65292;&#32780; B &#23458;&#25143;&#35201;&#27714;&#36890;&#36807; JNDI &#33719;&#21462;&#36830;&#25509;&#27744;&#12290;&#27492;&#26102;&#65292;&#23601;&#21487;&#20197;&#21033;&#29992; Profile &#24110;&#25105;&#20204;&#35299;&#20915;&#36825;&#20123;&#38382;&#39064;&#12290;</P>
<P>&#22914;&#26524;&#20351;&#29992; XML &#36827;&#34892;&#37197;&#32622;&#65292;&#21487;&#20197;&#22312; <CODE>&lt;beans/&gt;</CODE> &#30340; <CODE>profile</CODE> &#23646;&#24615;&#20013;&#36827;&#34892;&#35774;&#32622;&#12290;&#22914;&#26524;&#20351;&#29992; Java &#31867;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#21487;&#20197;&#22312;&#24102;&#26377; <CODE>@Configuration</CODE> &#27880;&#35299;&#30340;&#31867;&#19978;&#65292;&#25110;&#32773;&#22312;&#24102;&#26377; <CODE>@Bean</CODE> &#27880;&#35299;&#30340;&#26041;&#27861;&#19978;&#28155;&#21152; <CODE>@Profile</CODE> &#27880;&#35299;&#65292;&#24182;&#22312;&#20854;&#20013;&#25351;&#23450;&#35813;&#37197;&#32622;&#29983;&#25928;&#30340;&#20855;&#20307; Profile&#65292;&#23601;&#20687;&#20195;&#30721;&#31034;&#20363; 2-26 &#37027;&#26679;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#20195;&#30721;&#31034;&#20363; 2-26</STRONG>&#12288;&#38024;&#23545;&#24320;&#21457;&#21644;&#27979;&#35797;&#29615;&#22659;&#30340;&#19981;&#21516; Java &#37197;&#32622;</P></BLOCKQUOTE><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@Profile("dev")
public class DevConfig {
    @Bean
    public Hello hello() {
        Hello hello = new Hello();
        hello.setName("dev");
        return hello;
    }
}

@Configuration
@Profile("test")
public class TestConfig {
    @Bean
    public Hello hello() {
        Hello hello = new Hello();
        hello.setName("test");
        return hello;
    }
}</CODE></PRE>
<P>&#36890;&#36807;&#22914;&#19979;&#20004;&#31181;&#26041;&#24335;&#21487;&#20197;&#25351;&#23450;&#35201;&#28608;&#27963;&#30340; Profile&#65288;&#22810;&#20010; Profile &#29992;&#36887;&#21495;&#20998;&#38548;&#65289;&#65306;</P>
<UL>
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;><CODE>ConfigurableEnvironment.setActiveProfiles()</CODE> &#26041;&#27861;&#25351;&#23450;&#35201;&#28608;&#27963;&#30340; Profile&#65288;&#36890;&#36807; <CODE>ApplicationContext.getEnvironment()</CODE> &#26041;&#27861;&#21487;&#33719;&#24471; <CODE>Environment</CODE>&#65289;&#65307; 
<LI class=&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;><CODE>spring.profiles.active</CODE> &#23646;&#24615;&#25351;&#23450;&#35201;&#28608;&#27963;&#30340; Profile&#65288;&#21487;&#20197;&#29992;&#31995;&#32479;&#29615;&#22659;&#21464;&#37327;&#12289;JVM &#21442;&#25968;&#31561;&#26041;&#24335;&#25351;&#23450;&#65292;&#33021;&#36890;&#36807; <CODE>PropertySource</CODE> &#25214;&#21040;&#21363;&#21487;&#65292;&#22312;&#31532; 4 &#31456;&#20250;&#35814;&#32454;&#20171;&#32461; Spring Boot &#30340;&#23646;&#24615;&#21152;&#36733;&#26426;&#21046;&#65289;&#12290; </LI></UL>
<P>&#20363;&#22914;&#65292;&#21551;&#21160;&#31243;&#24207;&#26102;&#65292;&#22312;&#21629;&#20196;&#34892;&#20013;&#22686;&#21152; <CODE>spring.profiles.active</CODE>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&#9656; java -Dspring.profiles.active="dev" -jar xxx.jar</CODE></PRE>
<P>Spring Framework &#36824;&#25552;&#20379;&#20102;&#40664;&#35748;&#30340; Profile&#65292;&#19968;&#33324;&#21517;&#20026; <CODE>default</CODE>&#65292;&#20294;&#20063;&#21487;&#20197;&#36890;&#36807; <CODE>ConfigurableEnvironment.setDefaultProfiles()</CODE> &#21644; <CODE>spring.profiles.default</CODE> &#26469;&#20462;&#25913;&#36825;&#20010;&#21517;&#31216;&#12290;</P>
<P>&nbsp;</P>
<LI>
<P><STRONG>PropertySource &#25277;&#35937;</STRONG></P>
<P>Spring Framework &#20013;&#20250;&#39057;&#32321;&#29992;&#21040;&#23646;&#24615;&#20540;&#65292;&#32780;&#36825;&#20123;&#23646;&#24615;&#21448;&#26469;&#33258;&#20110;&#24456;&#22810;&#22320;&#26041;&#65292;<CODE>PropertySource</CODE> &#25277;&#35937;&#23601;&#23631;&#34109;&#20102;&#36825;&#23618;&#24046;&#24322;&#65292;&#20363;&#22914;&#65292;&#21487;&#20197;&#20174; JNDI&#12289;JVM &#31995;&#32479;&#23646;&#24615;&#65288;<CODE>-D</CODE> &#21629;&#20196;&#34892;&#21442;&#25968;&#65292;<CODE>System.getProperties()</CODE> &#26041;&#27861;&#33021;&#21462;&#24471;&#31995;&#32479;&#23646;&#24615;&#65289;&#21644;&#25805;&#20316;&#31995;&#32479;&#29615;&#22659;&#21464;&#37327;&#20013;&#21152;&#36733;&#23646;&#24615;&#12290;</P>
<P>&#22312; Spring &#20013;&#65292;&#19968;&#33324;&#23646;&#24615;&#29992;&#23567;&#20889;&#21333;&#35789;&#34920;&#31034;&#24182;&#29992;&#28857;&#20998;&#38548;&#65292;&#27604;&#22914; <CODE>foo.bar</CODE>&#65292;&#22914;&#26524;&#26159;&#20174;&#29615;&#22659;&#21464;&#37327;&#20013;&#33719;&#21462;&#23646;&#24615;&#65292;&#20250;&#25353;&#29031; <CODE>foo.bar</CODE>&#12289;<CODE>foo_bar</CODE>&#12289;<CODE>FOO.BAR</CODE> &#21644; <CODE>FOO_BAR</CODE> &#30340;&#39034;&#24207;&#26469;&#26597;&#25214;&#12290;4.3.2 &#33410;&#36824;&#26377;&#21152;&#36733;&#23646;&#24615;&#30456;&#20851;&#30340;&#20869;&#23481;&#65292;&#23626;&#26102;&#36824;&#20250;&#36827;&#19968;&#27493;&#35828;&#26126;&#12290;</P>
<P>&#25105;&#20204;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#26469;&#33719;&#24471;&#23646;&#24615; <CODE>foo.bar</CODE>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Hello {
    @Autowired
    private Environment environment;

    public void hello() {
        System.out.println("foo.bar: " + environment.getProperty("foo.bar"));
    }
}</CODE></PRE>
<P>&#25105;&#20204;&#22312; 2.2.3 &#33410;&#20013;&#30475;&#21040;&#36807; <CODE>@Value</CODE> &#27880;&#35299;&#65292;&#23427;&#20063;&#33021;&#33719;&#21462;&#23646;&#24615;&#65292;&#33719;&#21462;&#19981;&#21040;&#26102;&#21017;&#36820;&#22238;&#40664;&#35748;&#20540;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>public class Hello {
    @Value("${foo.bar:NONE}") // :&#21518;&#26159;&#40664;&#35748;&#20540;
    private String value;

    public void hello() {
        System.out.println("foo.bar: " + value);
    }
}</CODE></PRE>
<P><CODE>${}</CODE> &#21344;&#20301;&#31526;&#21487;&#20197;&#20986;&#29616;&#22312; Java &#31867;&#37197;&#32622;&#25110; XML &#25991;&#20214;&#20013;&#65292;Spring &#23481;&#22120;&#20250;&#35797;&#22270;&#20174;&#21508;&#31181;&#24050;&#32463;&#37197;&#32622;&#20102;&#30340;&#26469;&#28304;&#20013;&#35299;&#26512;&#23646;&#24615;&#12290;&#35201;&#28155;&#21152;&#23646;&#24615;&#26469;&#28304;&#65292;&#21487;&#20197;&#22312; <CODE>@Configuration</CODE> &#31867;&#19978;&#22686;&#21152; <CODE>@PropertySource</CODE> &#27880;&#35299;&#65292;&#20363;&#22914;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@PropertySource("classpath:/META-INF/resources/app.properties")
public class Config {...}</CODE></PRE>
<P>&#22914;&#26524;&#20351;&#29992; XML &#36827;&#34892;&#37197;&#32622;&#65292;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;context:property-placeholder location="classpath:/META-INF/resources/app.properties" /&gt;</CODE></PRE>
<P>&#36890;&#24120;&#25105;&#20204;&#30340;&#39044;&#26399;&#26159;&#19968;&#23450;&#33021;&#25214;&#21040;&#38656;&#35201;&#30340;&#23646;&#24615;&#65292;&#20294;&#20063;&#26377;&#36825;&#20010;&#23646;&#24615;&#21487;&#26377;&#21487;&#26080;&#30340;&#24773;&#20917;&#65292;&#36825;&#26102;&#23558;&#27880;&#35299;&#30340; <CODE>ignoreResourceNotFound</CODE> &#25110;&#32773; XML &#25991;&#20214;&#30340; <CODE>ignore-resource-not-found</CODE> &#35774;&#32622;&#20026; <CODE>true</CODE> &#21363;&#21487;&#12290;&#22914;&#26524;&#23384;&#22312;&#22810;&#20010;&#37197;&#32622;&#65292;&#21017;&#21487;&#20197;&#36890;&#36807; <CODE>@Order</CODE> &#27880;&#35299;&#25110; XML &#25991;&#20214;&#30340; <CODE>order</CODE> &#23646;&#24615;&#26469;&#25351;&#23450;&#39034;&#24207;&#12290;</P>
<P>&#20063;&#35768;&#22823;&#23478;&#20250;&#22909;&#22855;&#65292;Spring Framework &#26159;&#22914;&#20309;&#23454;&#29616;&#21344;&#20301;&#31526;&#35299;&#26512;&#30340;&#65292;&#36825;&#19968;&#20999;&#35201;&#24402;&#21151;&#20110; <CODE>PropertySourcesPlaceholderConfigurer</CODE> &#36825;&#20010; <CODE>BeanFactoryPostProcessor</CODE>&#12290;&#22914;&#26524;&#20351;&#29992; <CODE>&lt;context:property-placeholder/&gt;</CODE>&#65292;Spring Framework &#20250;&#33258;&#21160;&#27880;&#20876;&#19968;&#20010; <CODE>PropertySourcesPlaceholderConfigurer</CODE><SPAN class=&#27880;&#37322;&#32534;&#21495;>24</SPAN>&#65292;&#22914;&#26524;&#26159; Java &#37197;&#32622;&#65292;&#21017;&#38656;&#35201;&#25105;&#20204;&#33258;&#24049;&#29992; <CODE>@Bean</CODE> &#26469;&#27880;&#20876;&#19968;&#20010;&#65292;&#20363;&#22914;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Bean
public static PropertySourcesPlaceholderConfigurer configurer() {
    return new PropertySourcesPlaceholderConfigurer();
}</CODE></PRE>
<P>&#22312;&#23427;&#30340; <CODE>postProcessBeanFactory()</CODE> &#26041;&#27861;&#20013;&#65292;Spring &#20250;&#23581;&#35797;&#29992;&#25214;&#21040;&#30340;&#23646;&#24615;&#20540;&#26469;&#26367;&#25442;&#19978;&#19979;&#25991;&#20013;&#30340;&#23545;&#24212;&#21344;&#20301;&#31526;&#65292;&#36825;&#26679;&#22312; Bean &#27491;&#24335;&#21021;&#22987;&#21270;&#26102;&#25105;&#20204;&#23601;&#19981;&#20250;&#20877;&#30475;&#21040;&#21344;&#20301;&#31526;&#65292;&#32780;&#26159;&#23454;&#38469;&#26367;&#25442;&#21518;&#30340;&#20540;&#12290;</P>
<P>&#25105;&#20204;&#20063;&#21487;&#20197;&#23450;&#20041;&#33258;&#24049;&#30340; <CODE>PropertySource</CODE> &#23454;&#29616;&#65292;&#23558;&#23427;&#28155;&#21152;&#21040; <CODE>ConfigurableEnvironment.getPropertySources()</CODE> &#36820;&#22238;&#30340; <CODE>PropertySources</CODE> &#20013;&#21363;&#21487;&#65292;Spring Cloud Config &#20854;&#23454;&#23601;&#20351;&#29992;&#20102;&#36825;&#31181;&#26041;&#24335;&#12290;</P></LI></OL>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>24</SPAN><CODE>PropertySourcesPlaceholderConfigurer</CODE> &#26159; Spring Framework 3.1 &#24341;&#20837;&#30340;&#65292;&#20043;&#21069;&#22823;&#23478;&#19968;&#30452;&#20351;&#29992; <CODE>PropertyPlaceholderConfigurer</CODE>&#65292;&#30456;&#27604;&#20043;&#19979;&#65292;&#21518;&#32773;&#26377;&#35832;&#22810;&#19981;&#20415;&#12290;&#26412;&#20070;&#24314;&#35758;&#26080;&#35770;&#20160;&#20040;&#24773;&#20917;&#19979;&#37117;&#20351;&#29992;&#21069;&#32773;&#12290;</P>
<H3 id=nav_point_41>2.4.2&#12288;&#20219;&#21153;&#25277;&#35937;</H3>
<P>&#30475;&#36807;&#20102;&#19982;&#29615;&#22659;&#30456;&#20851;&#30340;&#25277;&#35937;&#21518;&#65292;&#25105;&#20204;&#20877;&#26469;&#30475;&#30475;&#19982;&#20219;&#21153;&#25191;&#34892;&#30456;&#20851;&#30340;&#20869;&#23481;&#12290;Spring Framework &#36890;&#36807; <CODE>TaskExecutor</CODE> &#21644; <CODE>TaskScheduler</CODE> &#36825;&#20004;&#20010;&#25509;&#21475;&#20998;&#21035;&#23545;&#20219;&#21153;&#30340;&#24322;&#27493;&#25191;&#34892;&#19982;&#23450;&#26102;&#25191;&#34892;&#36827;&#34892;&#20102;&#25277;&#35937;&#65292;&#25509;&#19979;&#26469;&#23601;&#35753;&#25105;&#20204;&#19968;&#36215;&#26469;&#20102;&#35299;&#19968;&#19979;&#12290;</P>
<OL>
<LI>
<P><STRONG>&#24322;&#27493;&#25191;&#34892;</STRONG></P>
<P>Spring Framework &#30340; <CODE>TaskExecutor</CODE> &#25277;&#35937;&#26159;&#22312; 2.0 &#29256;&#26412;&#26102;&#24341;&#20837;&#30340;&#65292;<CODE>Executor</CODE> &#26159; Java 5 &#23545;&#32447;&#31243;&#27744;&#27010;&#24565;&#30340;&#25277;&#35937;&#65292;&#22914;&#26524;&#20102;&#35299; JUC&#65288;<CODE>java.util.concurrent</CODE>&#65289;&#30340;&#35805;&#65292;&#19968;&#23450;&#20250;&#30693;&#36947; <CODE>java.util.concurrent.Executor</CODE> &#36825;&#20010;&#25509;&#21475;&#65292;&#32780; <CODE>TaskExecutor</CODE> &#23601;&#26159;&#22312;&#23427;&#30340;&#22522;&#30784;&#19978;&#21448;&#20570;&#20102;&#19968;&#23618;&#23553;&#35013;&#65292;&#35753;&#25105;&#20204;&#21487;&#20197;&#26041;&#20415;&#22320;&#22312; Spring &#23481;&#22120;&#20013;&#37197;&#32622;&#22810;&#32447;&#31243;&#30456;&#20851;&#30340;&#32454;&#33410;&#12290;</P>
<P><CODE>TaskExecutor</CODE> &#26377;&#24456;&#22810;&#23454;&#29616;&#65292;&#20363;&#22914;&#65292;&#21516;&#27493;&#30340; <CODE>SyncTaskExecutor</CODE>&#65307;&#27599;&#27425;&#21019;&#24314;&#19968;&#20010;&#26032;&#32447;&#31243;&#30340; <CODE>SimpleAsyncTaskExecutor</CODE>&#65307;&#20869;&#37096;&#23553;&#35013;&#20102; <CODE>Executor</CODE>&#65292;&#38750;&#24120;&#28789;&#27963;&#30340; <CODE>ConcurrentTaskExecutor</CODE>&#65307;&#36824;&#26377;&#25105;&#20204;&#29992;&#30340;&#26368;&#22810;&#30340; <CODE>ThreadPoolTaskExecutor</CODE>&#12290;</P>
<P>&#25105;&#20204;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#30452;&#25509;&#37197;&#32622;&#19968;&#20010; <CODE>ThreadPoolTaskExecutor</CODE>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"&gt;
    &lt;property name="corePoolSize" value="4"/&gt;
    &lt;property name="maxPoolSize" value="8"/&gt;
    &lt;property name="queueCapacity" value="32"/&gt;
&lt;/bean&gt;</CODE></PRE>
<P>&#20063;&#21487;&#20351;&#29992; <CODE>&lt;task:executor/&gt;</CODE>&#65292;&#19979;&#38754;&#26159;&#19968;&#20010;&#31561;&#20215;&#30340;&#37197;&#32622;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;task:executor id="taskExecutor" pool-size="4-8" queue-capacity="32"/&gt;</CODE></PRE>
<BLOCKQUOTE>
<P><STRONG>&#33590;&#27463;&#26102;&#38388;&#65306;&#35813;&#24590;&#20040;&#37197;&#32622;&#32447;&#31243;&#27744;</STRONG></P>
<P>&#22914;&#26524;&#35201;&#22312;&#31243;&#24207;&#20013;&#20351;&#29992;&#32447;&#31243;&#65292;&#35831;&#19981;&#35201;&#33258;&#34892;&#21019;&#24314; <CODE>Thread</CODE>&#65292;&#32780;&#24212;&#35813;&#23613;&#21487;&#33021;&#32771;&#34385;&#20351;&#29992;&#32447;&#31243;&#27744;&#65292;&#24182;&#19988;&#26126;&#30830;&#32447;&#31243;&#27744;&#30340;&#22823;&#23567;&#8212;&#19981;&#33021;&#26080;&#38480;&#21046;&#22320;&#21019;&#24314;&#32447;&#31243;&#12290;</P>
<P>&#32593;&#19978;&#26377;&#36825;&#26679;&#30340;&#24314;&#35758;&#65292;&#23545;&#20110; CPU &#23494;&#38598;&#22411;&#30340;&#31995;&#32479;&#65292;&#35201;&#23613;&#21487;&#33021;&#20943;&#23569;&#32447;&#31243;&#25968;&#65292;&#24314;&#35758;&#32447;&#31243;&#27744;&#22823;&#23567;&#37197;&#32622;&#20026;&#8220;CPU &#26680;&#25968; +1&#8221;&#65307;&#23545;&#20110; IO &#23494;&#38598;&#22411;&#31995;&#32479;&#65292;&#20026;&#20102;&#36991;&#20813; CPU &#28010;&#36153;&#22312;&#31561;&#24453; IO &#19978;&#65292;&#24314;&#35758;&#32447;&#31243;&#27744;&#22823;&#23567;&#20026;&#8220;CPU &#26680;&#25968; &#215;2&#8221;&#12290;&#24403;&#28982;&#65292;&#36825;&#21482;&#26159;&#19968;&#20010;&#24314;&#35758;&#20540;&#65292;&#20855;&#20307;&#36824;&#26159;&#21487;&#20197;&#26681;&#25454;&#24773;&#20917;&#26469;&#20570;&#35843;&#25972;&#30340;&#12290;</P>
<P>&#32447;&#31243;&#27744;&#30340;&#31561;&#24453;&#38431;&#21015;&#40664;&#35748;&#20026; <CODE>Integer.MAX_VALUE</CODE>&#65292;&#36825;&#26679;&#21487;&#33021;&#20250;&#36896;&#25104;&#20219;&#21153;&#30340;&#22823;&#37327;&#22534;&#31215;&#65292;&#25152;&#20197;&#35774;&#32622;&#19968;&#20010;&#21512;&#29702;&#30340;&#31561;&#24453;&#38431;&#21015;&#22823;&#23567;&#21518;&#65292;&#23601;&#35201;&#24212;&#23545;&#8220;&#38431;&#21015;&#28385;&#8221;&#30340;&#24773;&#20917;&#12290;&#8220;&#38431;&#21015;&#28385;&#8221;&#26102;&#30340;&#22788;&#29702;&#31574;&#30053;&#26159;&#30001; <CODE>RejectedExecutionHandler</CODE> &#20915;&#23450;&#30340;&#65292;&#40664;&#35748;&#26159; <CODE>ThreadPoolExecutor.AbortPolicy</CODE>&#65292;&#21363;&#30452;&#25509;&#25243;&#20986;&#19968;&#20010; <CODE>RejectedExecutionException</CODE> &#24322;&#24120;&#12290;&#22914;&#26524;&#25105;&#20204;&#33021;&#25509;&#21463;&#30452;&#25509;&#25243;&#24323;&#20219;&#21153;&#65292;&#20063;&#21487;&#20197;&#23558;&#31574;&#30053;&#35774;&#32622;&#20026; <CODE>ThreadPoolExecutor.DiscardPolicy</CODE> &#25110; <CODE>ThreadPoolExecutor.DiscardOldestPolicy</CODE>&#12290;</P>
<P>&#27492;&#22806;&#65292;<CODE>ThreadPoolTaskExecutor</CODE> &#36824;&#26377;&#19968;&#20010; <CODE>keepAliveSeconds</CODE> &#30340;&#23646;&#24615;&#65292;&#36890;&#36807;&#23427;&#21487;&#20197;&#35843;&#25972;&#31354;&#38386;&#29366;&#24577;&#32447;&#31243;&#30340;&#23384;&#27963;&#26102;&#38388;&#12290;&#22914;&#26524;&#24403;&#21069;&#32447;&#31243;&#25968;&#22823;&#20110;&#26680;&#24515;&#32447;&#31243;&#25968;&#65292;&#21040;&#23384;&#27963;&#26102;&#38388;&#21518;&#23601;&#20250;&#28165;&#29702;&#32447;&#31243;&#12290;</P></BLOCKQUOTE>
<P>&#22312;&#37197;&#32622;&#22909;&#20102; <CODE>TaskExecutor</CODE> &#21518;&#65292;&#21487;&#20197;&#30452;&#25509;&#35843;&#29992;&#23427;&#30340; <CODE>execute()</CODE> &#26041;&#27861;&#65292;&#20256;&#20837;&#19968;&#20010; <CODE>Runnable</CODE> &#23545;&#35937;&#65307;&#20063;&#21487;&#20197;&#22312;&#26041;&#27861;&#19978;&#20351;&#29992; <CODE>@Async</CODE> &#27880;&#35299;&#65292;&#36825;&#20010;&#26041;&#27861;&#21487;&#20197;&#26159;&#31354;&#36820;&#22238;&#20540;&#65292;&#20063;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010; <CODE>Future</CODE>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Async
public void runAsynchronous() {...}</CODE></PRE>
<P>&#20026;&#20102;&#35753;&#35813;&#27880;&#35299;&#29983;&#25928;&#65292;&#38656;&#35201;&#22312;&#37197;&#32622;&#31867;&#19978;&#22686;&#21152; <CODE>@EnableAsync</CODE> &#27880;&#35299;&#65292;&#25110;&#32773;&#22312; XML &#25991;&#20214;&#20013;&#22686;&#21152; <CODE>&lt;task:annotation-driven/&gt;</CODE> &#37197;&#32622;&#65292;&#24320;&#21551;&#23545;&#23427;&#30340;&#25903;&#25345;&#12290;</P>
<P>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Spring &#20250;&#20026; <CODE>@Async</CODE> &#23547;&#25214;&#21512;&#36866;&#30340;&#32447;&#31243;&#27744;&#23450;&#20041;&#65306;&#20363;&#22914;&#19978;&#19979;&#25991;&#37324;&#21807;&#19968;&#30340; <CODE>TaskExecutor</CODE>&#65307;&#22914;&#26524;&#23384;&#22312;&#22810;&#20010;&#65292;&#21017;&#29992; ID &#20026; <CODE>taskExecutor</CODE> &#30340;&#37027;&#20010;&#65307;&#21069;&#38754;&#20004;&#20010;&#37117;&#25214;&#19981;&#21040;&#30340;&#35805;&#20250;&#38477;&#32423;&#20351;&#29992; <CODE>SimpleAsyncTaskExecutor</CODE>&#12290;&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#22312; <CODE>@Async</CODE> &#27880;&#35299;&#20013;&#25351;&#23450;&#19968;&#20010;&#12290;</P>
<BLOCKQUOTE>
<P><STRONG>&#35831;&#27880;&#24847;</STRONG>&#12288;&#23545;&#20110;&#24322;&#27493;&#25191;&#34892;&#30340;&#26041;&#27861;&#65292;&#30001;&#20110;&#22312;&#35302;&#21457;&#26102;&#20027;&#32447;&#31243;&#23601;&#36820;&#22238;&#20102;&#65292;&#25105;&#20204;&#30340;&#20195;&#30721;&#22312;&#36935;&#21040;&#24322;&#24120;&#26102;&#21487;&#33021;&#26681;&#26412;&#26080;&#27861;&#24863;&#30693;&#65292;&#32780;&#19988;&#25243;&#20986;&#30340;&#24322;&#24120;&#20063;&#19981;&#20250;&#34987;&#25429;&#33719;&#65292;&#22240;&#27492;&#26368;&#22909;&#25105;&#20204;&#33021;&#33258;&#24049;&#23454;&#29616;&#19968;&#20010; <CODE>AsyncUncaughtExceptionHandler</CODE> &#23545;&#35937;&#26469;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;&#26368;&#36215;&#30721;&#25171;&#21360;&#19968;&#20010;&#24322;&#24120;&#26085;&#24535;&#65292;&#26041;&#20415;&#38382;&#39064;&#25490;&#26597;&#12290;</P></BLOCKQUOTE>
<P>&nbsp;</P>
<LI>
<P><STRONG>&#23450;&#26102;&#20219;&#21153;</STRONG></P>
<P>&#23450;&#26102;&#20219;&#21153;&#65292;&#39038;&#21517;&#24605;&#20041;&#65292;&#23601;&#26159;&#22312;&#29305;&#23450;&#30340;&#26102;&#38388;&#25191;&#34892;&#30340;&#20219;&#21153;&#65292;&#26082;&#21487;&#20197;&#26159;&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#26102;&#38388;&#28857;&#25191;&#34892;&#19968;&#27425;&#30340;&#20219;&#21153;&#65292;&#20063;&#21487;&#20197;&#26159;&#22810;&#27425;&#37325;&#22797;&#25191;&#34892;&#30340;&#20219;&#21153;&#12290;</P>
<P><CODE>TaskScheduler</CODE> &#23545;&#20004;&#32773;&#37117;&#26377;&#24456;&#22909;&#30340;&#25903;&#25345;&#65292;&#20854;&#20013;&#30340;&#20960;&#20010; <CODE>schedule()</CODE> &#26041;&#27861;&#26159;&#22788;&#29702;&#21333;&#27425;&#20219;&#21153;&#30340;&#65292;&#32780; <CODE>scheduleAtFixedRate()</CODE> &#21644; <CODE>scheduleWithFixedDelay()</CODE> &#21017;&#26159;&#22788;&#29702;&#22810;&#27425;&#20219;&#21153;&#30340;&#12290;<CODE>scheduleAtFixedRate()</CODE> &#25353;&#22266;&#23450;&#39057;&#29575;&#35302;&#21457;&#20219;&#21153;&#25191;&#34892;&#65292;<CODE>scheduleWithFixedDelay()</CODE> &#22312;&#31532;&#19968;&#27425;&#20219;&#21153;&#25191;&#34892;&#23436;&#27605;&#21518;&#31561;&#24453;&#25351;&#23450;&#30340;&#26102;&#38388;&#21518;&#20877;&#35302;&#21457;&#31532;&#20108;&#27425;&#20219;&#21153;&#12290;</P>
<P><CODE>TaskScheduler.schedule()</CODE> &#21487;&#20197;&#36890;&#36807; <CODE>Trigger</CODE> &#26469;&#25351;&#23450;&#35302;&#21457;&#30340;&#26102;&#38388;&#65292;&#20854;&#20013;&#26368;&#24120;&#29992;&#30340;&#23601;&#26159;&#25509;&#25910; Cron &#34920;&#36798;&#24335; <SPAN class=&#27880;&#37322;&#32534;&#21495;>25</SPAN> &#30340; <CODE>CronTrigger</CODE> &#20102;&#65292;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#22312;&#21608;&#19968;&#21040;&#21608;&#20116;&#30340;&#19979;&#21320; 3 &#28857; 15 &#20998;&#35302;&#21457;&#20219;&#21153;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>scheduler.schedule(task, new CronTrigger("0 15 15 * * 1-5"));</CODE></PRE>
<P>&#19982; <CODE>TaskExecutor</CODE> &#31867;&#20284;&#65292;Spring Framework &#20063;&#25552;&#20379;&#20102;&#19981;&#23569; <CODE>TaskScheduler</CODE> &#30340;&#23454;&#29616;&#65292;&#20854;&#20013;&#26368;&#24120;&#29992;&#30340;&#20063;&#26159; <CODE>ThreadPoolTaskScheduler</CODE>&#12290;&#19978;&#36848;&#20363;&#23376;&#20013;&#30340; <CODE>scheduler</CODE> &#23601;&#21487;&#20197;&#26159;&#19968;&#20010;&#27880;&#20837;&#30340; <CODE>ThreadPoolTaskScheduler</CODE> Bean&#12290;</P>
<P>&#25105;&#20204;&#21487;&#20197;&#36873;&#25321;&#29992; <CODE>&lt;task:scheduler/&gt;</CODE> &#26469;&#37197;&#32622; <CODE>TaskScheduler</CODE>&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>&lt;task:scheduler id="taskScheduler" pool-size="10" /&gt;</CODE></PRE>
<P>&#20063;&#21487;&#20197;&#20351;&#29992;&#27880;&#35299;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Spring &#20250;&#22312;&#21516;&#19968;&#19978;&#19979;&#25991;&#20013;&#23547;&#25214;&#21807;&#19968;&#30340; <CODE>TaskScheduler</CODE> Bean&#65292;&#26377;&#22810;&#20010;&#30340;&#35805;&#29992; ID &#26159; <CODE>taskScheduler</CODE> &#30340;&#65292;&#20877;&#19981;&#34892;&#23601;&#29992;&#19968;&#20010;&#21333;&#32447;&#31243;&#30340; <CODE>TaskScheduler</CODE>&#12290;&#22312;&#37197;&#32622;&#20219;&#21153;&#21069;&#65292;&#38656;&#35201;&#20808;&#22312;&#37197;&#32622;&#31867;&#19978;&#28155;&#21152; <CODE>@EnableScheduling</CODE> &#27880;&#35299;&#25110;&#22312; XML &#25991;&#20214;&#20013;&#28155;&#21152; <CODE>&lt;task:annotation-driven/&gt;</CODE> &#24320;&#21551;&#27880;&#35299;&#25903;&#25345;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Configuration
@EnableScheduling
public class Config {...}</CODE></PRE>
<P>&#38543;&#21518;&#65292;&#22312;&#26041;&#27861;&#19978;&#28155;&#21152; <CODE>@Scheduled</CODE> &#27880;&#35299;&#23601;&#33021;&#35753;&#26041;&#27861;&#23450;&#26102;&#25191;&#34892;&#65292;&#20363;&#22914;&#65306;</P><PRE class=&#20195;&#30721;&#26080;&#34892;&#21495;><CODE>@Scheduled(fixedRate=1000) // &#27599;&#38548;1000ms&#25191;&#34892;
public void task1() {...}

@Scheduled(fixedDelay=1000) // &#27599;&#27425;&#25191;&#34892;&#23436;&#21518;&#31561;&#24453;1000ms&#20877;&#25191;&#34892;&#19979;&#19968;&#27425;
public void task2() {...}

@Scheduled(initialDelay=5000, fixedRate=1000) // &#20808;&#31561;&#24453;5000ms&#24320;&#22987;&#25191;&#34892;&#31532;&#19968;&#27425;&#65292;&#21518;&#32493;&#27599;&#38548;1000ms&#25191;&#34892;&#19968;&#27425;
public void task3() {...}

@Scheduled(cron="0 15 15 * * 1-5") // &#25353;Cron&#34920;&#36798;&#24335;&#25191;&#34892;
public void task4() {...}</CODE></PRE>
<BLOCKQUOTE>
<P><STRONG>&#33590;&#27463;&#26102;&#38388;&#65306;&#26412;&#22320;&#35843;&#24230; vs. &#20998;&#24067;&#24335;&#35843;&#24230;</STRONG></P>
<P>&#19978;&#25991;&#25552;&#21040;&#30340;&#35843;&#24230;&#20219;&#21153;&#37117;&#26159;&#22312;&#19968;&#20010; JVM &#20869;&#37096;&#25191;&#34892;&#30340;&#65292;&#19968;&#33324;&#25105;&#20204;&#30340;&#31995;&#32479;&#37117;&#26159;&#20197;&#38598;&#32676;&#26041;&#24335;&#37096;&#32626;&#30340;&#65292;&#22240;&#27492;&#24182;&#38750;&#25152;&#26377;&#20219;&#21153;&#37117;&#38656;&#35201;&#22312;&#27599;&#21488;&#26381;&#21153;&#22120;&#19978;&#25191;&#34892;&#65292;&#21516;&#19968;&#26102;&#38388;&#65292;&#38598;&#32676;&#20013;&#30340;&#19968;&#21488;&#26381;&#21153;&#22120;&#33021;&#25191;&#34892;&#23601;&#22815;&#20102;&#12290;&#36825;&#26102;&#65292;&#20165;&#26377;&#26412;&#33410;&#25152;&#25552;&#20379;&#30340;&#35843;&#24230;&#20219;&#21153;&#25903;&#25345;&#26159;&#19981;&#22815;&#30340;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#20511;&#21161;&#20854;&#20182;&#35843;&#24230;&#26381;&#21153;&#26469;&#23454;&#29616;&#25105;&#20204;&#30340;&#38656;&#27714;&#65292;&#20363;&#22914;&#65292;&#24403;&#24403;&#24320;&#28304;&#30340; ElasticJob&#12290;</P>
<P>&#20030;&#20010;&#20363;&#23376;&#65292;&#20026;&#20102;&#25552;&#21319;&#24615;&#33021;&#65292;&#25105;&#20204;&#20250;&#20351;&#29992;&#22810;&#32423;&#32531;&#23384;&#65292;&#20195;&#30721;&#20248;&#20808;&#35835;&#21462; JVM &#26412;&#22320;&#32531;&#23384;&#65292;&#27809;&#26377;&#21629;&#20013;&#30340;&#35805;&#20877;&#21435;&#35835;&#21462; Redis &#20998;&#24067;&#24335;&#32531;&#23384;&#12290;&#32531;&#23384;&#35201;&#38752;&#23450;&#26102;&#20219;&#21153;&#26469;&#21047;&#26032;&#65292;&#27492;&#26102;&#26412;&#22320;&#35843;&#24230;&#20219;&#21153;&#23601;&#29992;&#26469;&#21047;&#26032; JVM &#32531;&#23384;&#65292;&#32780;&#20998;&#24067;&#24335;&#35843;&#24230;&#20219;&#21153;&#23601;&#29992;&#26469;&#21047;&#26032; Redis &#32531;&#23384;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#36890;&#36807;&#20998;&#24067;&#24335;&#35843;&#24230;&#26469;&#31649;&#29702;&#27599;&#21488;&#26426;&#22120;&#19978;&#30340;&#35843;&#24230;&#20219;&#21153;&#12290;</P>
<P>&#29978;&#33267;&#22312;&#19968;&#20123;&#22330;&#26223;&#20013;&#25105;&#20204;&#36824;&#38656;&#35201;&#23545;&#35843;&#24230;&#20219;&#21153;&#36827;&#34892;&#22797;&#26434;&#30340;&#25286;&#20998;&#65306;&#19968;&#21488;&#26426;&#22120;&#25509;&#25910;&#21040;&#20219;&#21153;&#34987;&#35302;&#21457;&#65292;&#25509;&#30528;&#36827;&#34892;&#19968;&#31995;&#21015;&#30340;&#20934;&#22791;&#24037;&#20316;&#65292;&#38543;&#21518;&#23558;&#20219;&#21153;&#20998;&#21457;&#21040;&#38598;&#32676;&#20013;&#30340;&#20854;&#20182;&#33410;&#28857;&#19978;&#36827;&#34892;&#21518;&#32493;&#22788;&#29702;&#65292;&#20197;&#27492;&#20805;&#20998;&#21457;&#25381;&#38598;&#32676;&#30340;&#20316;&#29992;&#12290;</P>
<P>&#24635;&#20043;&#65292;&#35843;&#24230;&#20219;&#21153;&#21487;&#20197;&#26159;&#38750;&#24120;&#22797;&#26434;&#30340;&#65292;&#26412;&#33410;&#21482;&#26159;&#31616;&#21333;&#22320;&#24341;&#20837;&#36825;&#20010;&#35805;&#39064;&#65292;&#24863;&#20852;&#36259;&#30340;&#35805;&#65292;&#22823;&#23478;&#21487;&#20197;&#20877;&#28145;&#20837;&#30740;&#31350;&#12290;</P></BLOCKQUOTE></LI></OL>
<P class=&#27880;&#37322;&#20869;&#23481;><SPAN class=&#27880;&#37322;&#32534;&#21495;&#19979;>25</SPAN>Cron &#26159; Linux &#31995;&#32479;&#19979;&#30340;&#19968;&#20010;&#26381;&#21153;&#65292;&#21487;&#20197;&#26681;&#25454;&#37197;&#32622;&#22312;&#29305;&#23450;&#26102;&#38388;&#25191;&#34892;&#29305;&#23450;&#20219;&#21153;&#65292;&#25191;&#34892;&#26102;&#38388;&#23601;&#26159;&#29992; Cron &#34920;&#36798;&#24335;&#26469;&#37197;&#32622;&#30340;&#12290;&#20851;&#20110; Cron &#34920;&#36798;&#24335;&#30340;&#35814;&#32454;&#35828;&#26126;&#65292;&#22823;&#23478;&#21487;&#20197;&#22312;&#32593;&#19978;&#25628;&#21040;&#22823;&#37327;&#36164;&#26009;&#65292;&#26412;&#20070;&#23601;&#19981;&#35814;&#32454;&#23637;&#24320;&#20102;&#12290;</P>
<H2 id=nav_point_42>2.5&#12288;&#23567;&#32467;</H2>
<P>&#36890;&#36807;&#26412;&#31456;&#30340;&#23398;&#20064;&#65292;&#25105;&#20204;&#23545; Spring Framework &#30340;&#26680;&#24515;&#23481;&#22120;&#21450; Bean &#30340;&#27010;&#24565;&#24050;&#32463;&#26377;&#20102;&#19968;&#20010;&#22823;&#27010;&#30340;&#20102;&#35299;&#12290;&#19981;&#20165;&#30693;&#36947;&#20102;&#22914;&#20309;&#21435;&#20351;&#29992;&#23427;&#20204;&#65292;&#26356;&#26159;&#28145;&#20837;&#20102;&#35299;&#20102;&#22914;&#20309;&#23545;&#19968;&#20123;&#29305;&#24615;&#36827;&#34892;&#23450;&#21046;&#65292;&#22914;&#20309;&#36890;&#36807;&#31867;&#20284;&#20107;&#20214;&#36890;&#30693;&#36825;&#26679;&#30340;&#26426;&#21046;&#26469;&#24212;&#23545;&#26576;&#20123;&#38382;&#39064;&#12290;</P>
<P>Spring Framework &#20026;&#20102;&#35753;&#22823;&#23478;&#19987;&#24515;&#20110;&#19994;&#21153;&#36923;&#36753;&#65292;&#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#24456;&#22810;&#25277;&#35937;&#26469;&#23631;&#34109;&#24213;&#23618;&#30340;&#23454;&#29616;&#12290;&#26412;&#31456;&#20013;&#30340;&#29615;&#22659;&#25277;&#35937;&#21644;&#20219;&#21153;&#25277;&#35937;&#23601;&#26159;&#24456;&#22909;&#30340;&#20363;&#23376;&#12290;</P>
<P>&#19979;&#19968;&#31456;&#65292;&#25105;&#20204;&#23558;&#30475;&#21040; Spring Framework &#20013;&#30340;&#21478;&#19968;&#20010;&#37325;&#35201;&#20869;&#23481;&#8212;&#8212;AOP &#25903;&#25345;&#12290;</P><BR style="PAGE-BREAK-AFTER: always">
<DIV style="PAGE-BREAK-AFTER: always"></DIV>
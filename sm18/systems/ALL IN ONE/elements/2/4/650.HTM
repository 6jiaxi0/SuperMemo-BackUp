<h1 id="nav_point_202">&#31532; 13 &#31456;&#12288;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;</h1><blockquote>
<p><strong>&#26412;&#31456;&#20869;&#23481;</strong></p>
<ul>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;">&#24120;&#35265;&#30340;&#24494;&#26381;&#21153;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;">&#22522;&#20110; Spring Cloud &#30340;&#24494;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;">Spring Cloud DiscoveryClient &#30340;&#23454;&#29616;&#21407;&#29702;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;">Spring Cloud &#20013;&#30340;&#20960;&#31181;&#24120;&#35265;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;</li>
</ul>
</blockquote><p>&#20026;&#20102;&#25552;&#20379;&#31283;&#23450;&#30340;&#26381;&#21153;&#65292;&#31995;&#32479;&#36890;&#24120;&#37117;&#20250;&#37319;&#21462;&#19968;&#20123;&#39640;&#21487;&#29992;&#26041;&#26696;&#65292;&#20854;&#20013;&#38598;&#32676;&#21270;&#23601;&#26159;&#27604;&#36739;&#24120;&#29992;&#30340;&#20570;&#27861;&#12290;&#31995;&#32479;&#19968;&#33324;&#20250;&#37096;&#32626;&#20026;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#38598;&#32676;&#65292;&#38598;&#32676;&#20869;&#30340;&#23454;&#20363;&#37117;&#26159;&#26080;&#29366;&#24577;&#30340;&#65292;&#27492;&#26102;&#23601;&#38656;&#35201;&#32771;&#34385;&#22914;&#20309;&#23558;&#35831;&#27714;&#21512;&#29702;&#22320;&#20998;&#21457;&#21040;&#38598;&#32676;&#20013;&#30340;&#21508;&#20010;&#23454;&#20363;&#19978;&#8212;&#8212;&#36825;&#23601;&#26159;&#36127;&#36733;&#22343;&#34913;&#12290;&#36127;&#36733;&#22343;&#34913;&#26377;&#24456;&#22810;&#31181;&#26041;&#26696;&#65292;&#26377;&#30828;&#20214;&#30340;&#65292;&#20063;&#26377;&#36719;&#20214;&#30340;&#65292;&#26377;&#38598;&#20013;&#24335;&#30340;&#65292;&#20063;&#26377;&#20998;&#24067;&#24335;&#30340;&#12290;&#26412;&#31456;&#23601;&#35753;&#25105;&#20204;&#26469;&#20102;&#35299;&#19968;&#19979; Spring Cloud &#20026;&#25105;&#20204;&#25552;&#20379;&#30340;&#24494;&#26381;&#21153;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;&#8212;&#8212;&#36825;&#26159;&#19968;&#22871;&#20998;&#24067;&#24335;&#30340;&#36719;&#36127;&#36733;&#35299;&#20915;&#26041;&#26696;&#65292;&#32780;&#19988;&#36824;&#25903;&#25345;&#22810;&#31181;&#27880;&#20876;&#20013;&#24515;&#65292;&#20351;&#29992;&#36215;&#26469;&#38750;&#24120;&#26041;&#20415;&#28789;&#27963;&#12290;</p><h2 id="nav_point_203">13.1&#12288;&#24120;&#35265;&#30340;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;</h2><p>&#22312;&#24320;&#22987;&#25509;&#35302; Spring Cloud &#30340;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;&#21069;&#65292;&#20808;&#35753;&#25105;&#20204;&#26469;&#20102;&#35299;&#19968;&#19979;&#19994;&#30028;&#19968;&#30452;&#20197;&#26469;&#25152;&#20351;&#29992;&#30340;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;&#65292;&#20854;&#20013;&#29992;&#21040;&#30340;&#19968;&#20123;&#25216;&#26415;&#26377;&#30340;&#21382;&#21490;&#24736;&#20037;&#65292;&#32780;&#26377;&#30340;&#31639;&#26159;&#26032;&#25216;&#26415;&#12290;</p><h3 id="nav_point_204">13.1.1&#12288;&#38598;&#20013;&#24335;&#26041;&#26696;</h3><p>&#25152;&#35859;&#38598;&#20013;&#24335;&#26041;&#26696;&#65292;&#36890;&#24120;&#20250;&#26377;&#20010;&#38598;&#20013;&#30340;&#27969;&#37327;&#20837;&#21475;&#65292;&#23601;&#20687;&#22270; 13-1 &#37324;&#30011;&#30340;&#37027;&#26679;&#12290;&#20854;&#20013;&#26381;&#21153;&#28040;&#36153;&#32773;&#23601;&#26159;&#26381;&#21153;&#30340;&#35843;&#29992;&#26041;&#65292;&#23427;&#21487;&#20197;&#26159;&#19968;&#20010;&#38598;&#32676;&#65292;&#20063;&#21487;&#20197;&#26159;&#30495;&#23454;&#29992;&#25143;&#65288;&#38024;&#23545;&#23545;&#22806;&#30340;&#26381;&#21153;&#25110;&#32773;&#39029;&#38754;&#65289;&#12290;&#36127;&#36733;&#32972;&#21518;&#30495;&#27491;&#25552;&#20379;&#26381;&#21153;&#30340;&#33410;&#28857;&#65292;&#25105;&#20204;&#21487;&#20197;&#31216;&#20854;&#20026; Real Server&#65292;&#21363;&#30495;&#23454;&#26381;&#21153;&#22120;&#12290;&#26381;&#21153;&#28040;&#36153;&#32773;&#24182;&#19981;&#33021;&#30452;&#25509;&#35775;&#38382;&#30495;&#23454;&#30340;&#26381;&#21153;&#25552;&#20379;&#32773;&#65292;&#38656;&#35201;&#36890;&#36807;&#36127;&#36733;&#22343;&#34913;&#22120;&#26469;&#36827;&#34892;&#20013;&#36716;&#65292;&#36825;&#37324;&#20171;&#32461;&#30340;&#36127;&#36733;&#22343;&#34913;&#22120;&#26159;&#38598;&#20013;&#24335;&#30340;&#65292;&#22240;&#27492;&#22312;&#22270;&#20013;&#23558;&#20854;&#26631;&#27880;&#20026;&#38598;&#20013;&#36127;&#36733;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00788.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-1&#12288;&#24120;&#35265;&#30340;&#38598;&#20013;&#24335;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;</strong></p><ol>
<li><p><strong>&#21830;&#19994;&#30828;&#20214;&#26041;&#26696;</strong></p>
<p>&#35848;&#21040;&#21830;&#19994;&#36127;&#36733;&#22343;&#34913;&#65292;&#27604;&#36739;&#26377;&#21517;&#30340;&#23601;&#26159; F5 Networks &#30340; BIG-IP &#20102;&#12290;&#26377;&#20123;&#26102;&#20505;&#25105;&#20204;&#22312;&#20132;&#27969;&#26102;&#29978;&#33267;&#20250;&#29992; F5 &#26469;&#25351;&#20195;&#30828;&#20214;&#36127;&#36733;&#22343;&#34913;&#35774;&#22791;&#12290;F5 &#21487;&#20197;&#24037;&#20316;&#22312; OSI<span class="&#27880;&#37322;&#32534;&#21495;">1</span> &#30340;&#22235;&#23618;&#21040;&#19971;&#23618;&#65292;&#19968;&#33324;&#25105;&#20204;&#20250;&#20351;&#29992;&#22235;&#23618;&#36127;&#36733;&#21644;&#19971;&#23618;&#36127;&#36733;&#12290;&#22235;&#23618;&#36127;&#36733;&#30452;&#25509;&#26681;&#25454; IP &#21644;&#31471;&#21475;&#23545;&#35831;&#27714;&#36827;&#34892;&#36127;&#36733;&#65292;&#21457;&#36865;&#21040;&#21518;&#31471;&#30340;&#26381;&#21153;&#22120;&#19978;&#12290;&#19971;&#23618;&#36127;&#36733;&#21017;&#22312;&#22235;&#23618;&#30340;&#22522;&#30784;&#19978;&#65292;&#21487;&#20197;&#26681;&#25454;&#24212;&#29992;&#30340;&#29305;&#28857;&#20877;&#20570;&#20998;&#21457;&#65292;&#20363;&#22914;&#19968;&#20010; HTTP &#30340;&#36127;&#36733;&#22343;&#34913;&#22120;&#65292;&#38500;&#20102; IP &#21644;&#31471;&#21475;&#65292;&#36824;&#33021;&#26681;&#25454; URL&#12289;HTTP &#22836;&#31561;&#20449;&#24687;&#20915;&#23450;&#35831;&#27714;&#22914;&#20309;&#36127;&#36733;&#12290;</p>
<p>&#30828;&#20214;&#36127;&#36733;&#22343;&#34913;&#35774;&#22791;&#30340;&#29305;&#28857;&#23601;&#26159;&#22788;&#29702;&#33021;&#21147;&#24378;&#65292;&#21333;&#21488;&#35774;&#22791;&#23601;&#33021;&#25179;&#19979;&#24040;&#22823;&#30340;&#27969;&#37327;&#65307;&#20294;&#32570;&#28857;&#20063;&#24456;&#26126;&#26174;&#65292;&#25104;&#26412;&#22826;&#39640;&#65292;&#32780;&#20026;&#20102;&#20445;&#38556;&#31995;&#32479;&#30340;&#39640;&#21487;&#29992;&#24615;&#65292;&#36890;&#24120;&#36824;&#38656;&#35201;&#20934;&#22791;&#20887;&#20313;&#30340;&#30828;&#20214;&#65292;&#26356;&#26159;&#36827;&#19968;&#27493;&#21152;&#22823;&#20102;&#25237;&#20837;&#12290;&#38500;&#20102;&#21069;&#38754;&#25552;&#21040;&#30340; F5&#65292;&#34892;&#19994;&#37324;&#36824;&#26377;&#20123;&#21378;&#21830;&#20063;&#25552;&#20379;&#19987;&#19994;&#30340;&#36127;&#36733;&#22343;&#34913;&#30828;&#20214;&#65292;&#20363;&#22914; Array&#12289;A10 &#21644; Citrix &#31561;&#12290;&#22312;&#20570;&#21830;&#19994;&#30828;&#20214;&#26041;&#26696;&#26102;&#65292;&#19981;&#22952;&#36135;&#27604;&#19977;&#23478;&#65292;&#38500;&#20102;&#20808;&#26399;&#25237;&#20837;&#65292;&#21518;&#32493;&#30340;&#32500;&#20445;&#21644;&#25216;&#26415;&#25903;&#25345;&#37117;&#26159;&#19981;&#23567;&#30340;&#33457;&#38144;&#12290;</p>
<p>&#160;</p>
</li>
<li><p><strong>&#24320;&#28304;&#36719;&#20214;&#26041;&#26696;</strong></p>
<p>&#26377;&#30828;&#20214;&#26041;&#26696;&#65292;&#33258;&#28982;&#23601;&#20250;&#26377;&#36719;&#20214;&#26041;&#26696;&#65307;&#26377;&#36719;&#20214;&#26041;&#26696;&#65292;&#25105;&#20204;&#23601;&#19968;&#23450;&#20250;&#24819;&#26377;&#27809;&#26377;&#24320;&#28304;&#30340;&#26041;&#26696;&#12290;&#35762;&#21040;&#36127;&#36733;&#22343;&#34913;&#36719;&#20214;&#65292;&#23601;&#19968;&#23450;&#35201;&#20808;&#20171;&#32461;&#19968;&#19979; LVS&#65288;Linux Virtual Server&#65289;&#12290;LVS &#26159;&#30001;&#31456;&#25991;&#23913;&#21338;&#22763;&#20027;&#23548;&#24320;&#21457;&#30340;&#19968;&#20010;&#24320;&#28304;&#36127;&#36733;&#22343;&#34913;&#22120;&#39033;&#30446;&#65292;&#33258; 1998 &#24180; 5 &#26376;&#31532;&#19968;&#34892; LVS &#20195;&#30721;&#35806;&#29983;&#21518;&#65292;&#24050;&#32463;&#34987;&#26080;&#25968;&#20154;&#29992;&#22312;&#20102;&#30495;&#23454;&#30340;&#39033;&#30446;&#20013;&#12290;&#32780;&#19988;&#65292;LVS &#20063;&#26089;&#24050;&#26159; Linux &#20869;&#26680;&#30340;&#19968;&#37096;&#20998;&#20102;&#12290;LVS &#22312;&#20869;&#26680;&#20013;&#23454;&#29616;&#20102;&#22522;&#20110; IP &#30340;&#35831;&#27714;&#36127;&#36733;&#22343;&#34913;&#65292;&#23427;&#23646;&#20110;&#22235;&#23618;&#36127;&#36733;&#22343;&#34913;&#65292;&#22312;&#29992;&#25143;&#35775;&#38382;&#36127;&#36733;&#22343;&#34913;&#22120;&#21518;&#65292;&#33021;&#26681;&#25454;&#39044;&#20808;&#35774;&#23450;&#22909;&#30340;&#31574;&#30053;&#23558;&#35831;&#27714;&#21457;&#36865;&#21040;&#21518;&#31471;&#20855;&#20307;&#30340;&#26576;&#21488;&#26381;&#21153;&#22120;&#19978;&#12290;LVS &#30340;&#24120;&#29992;&#24037;&#20316;&#27169;&#24335;&#26377; NAT&#65288;Network Address Translation&#65292;&#32593;&#32476;&#22320;&#22336;&#36716;&#25442;&#65289;&#27169;&#24335;&#12289;DR&#65288;Direct Routing&#65292;&#30452;&#25509;&#36335;&#30001;&#65289;&#27169;&#24335;&#21644; TUN&#65288;Tunneling&#65292;&#38567;&#36947;&#65289;&#27169;&#24335;&#31561;&#12290;&#24120;&#29992;&#30340;&#35843;&#24230;&#31574;&#30053;&#26377;&#36718;&#35810;&#35843;&#24230;&#65288;Round Robin&#65289;&#12289;&#26368;&#23567;&#36830;&#25509;&#35843;&#24230;&#12289;&#30446;&#26631;&#22320;&#22336; Hash &#35843;&#24230;&#12289;&#28304;&#22320;&#22336; Hash &#35843;&#24230;&#21644;&#26368;&#30701;&#26399;&#26395;&#24310;&#36831;&#31561;&#12290;</p>
<p>LVS &#20316;&#20026;&#35831;&#27714;&#30340;&#20837;&#21475;&#65292;&#33258;&#28982;&#20063;&#35201;&#23454;&#29616;&#39640;&#21487;&#29992;&#65292;&#19981;&#28982;&#22270; 13-1 &#20013;&#30340;&#38598;&#20013;&#36127;&#36733;&#19968;&#20986;&#38382;&#39064;&#65292;&#23601;&#31639;&#21518;&#31471;&#30340;&#26381;&#21153;&#25552;&#20379;&#32773;&#37117;&#26159;&#22909;&#30340;&#65292;&#20063;&#27809;&#26377;&#21150;&#27861;&#25552;&#20379;&#26381;&#21153;&#12290;&#32593;&#19978;&#29992;&#30340;&#26368;&#22810;&#30340;&#23601;&#26159;&#25645;&#20004;&#21488; LVS&#65292;&#19968;&#20027;&#19968;&#22791;&#65292;&#36890;&#36807; Keepalived &#26469;&#30417;&#25511;&#33410;&#28857;&#30340;&#29366;&#24577;&#65292;&#19968;&#26086;&#20027;&#33410;&#28857;&#20986;&#38382;&#39064;&#20102;&#65292;&#22791;&#33410;&#28857;&#23601;&#33021;&#33258;&#21160;&#25509;&#31649;&#12290;Keepalived &#20043;&#25152;&#20197;&#33021;&#23454;&#29616;&#36825;&#19968;&#21151;&#33021;&#65292;&#32972;&#21518;&#38752;&#30340;&#26159; VRRP&#65288;Virtual Router Redundancy Protocol&#65292;&#34394;&#25311;&#36335;&#30001;&#20887;&#20313;&#21327;&#35758;&#65289;&#12290;&#23427;&#25226;&#20960;&#21488;&#36335;&#30001;&#35774;&#22791;&#32852;&#21512;&#32452;&#25104;&#19968;&#21488;&#34394;&#25311;&#30340;&#36335;&#30001;&#35774;&#22791;&#65292;&#24403;&#20027;&#26426;&#30340;&#19979;&#19968;&#36339;&#36335;&#30001;&#35774;&#22791;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#21450;&#26102;&#23558;&#19994;&#21153;&#20999;&#25442;&#21040;&#22791;&#20221;&#36335;&#30001;&#35774;&#22791;&#12290;&#36825;&#26679;&#19968;&#26469;&#65292;&#23545;&#22806;&#26159;&#21516;&#19968;&#20010; VIP&#65288;Virtual IP&#65292;&#34394;&#25311; IP&#65289;&#65292;&#25105;&#20204;&#26080;&#39035;&#20851;&#27880;&#32972;&#21518;&#20855;&#20307;&#36830;&#30340;&#26159;&#21738;&#20010; LVS &#33410;&#28857;&#65292;&#31995;&#32479;&#20250;&#33258;&#24049;&#26469;&#20445;&#35777;&#24635;&#26377;&#21487;&#29992;&#30340; LVS&#12290;</p>
<p>&#32842;&#23436;&#20102;&#22235;&#23618;&#19978;&#30340; LVS&#65292;&#20877;&#26469;&#30475;&#30475;&#24120;&#29992;&#20110;&#19971;&#23618;&#30340; Nginx&#12290;Nginx &#26159;&#30001;&#20420;&#32599;&#26031;&#31243;&#24207;&#21592; Igor Sysoev &#24320;&#21457;&#30340;&#19968;&#27454;&#39640;&#24615;&#33021; Web &#26381;&#21153;&#22120;&#21644;&#21453;&#21521;&#20195;&#29702;&#26381;&#21153;&#22120;&#65292;&#29616;&#22312;&#23427;&#26089;&#24050;&#25104;&#21151;&#21462;&#20195;&#20102; Apache HTTP Server &#30340;&#20301;&#32622;&#65292;&#25104;&#20026;&#39318;&#36873;&#30340; Web &#26381;&#21153;&#22120;&#12290;Nginx &#22312;&#24320;&#28304;&#19971;&#23618;&#36127;&#36733;&#22343;&#34913;&#22120;&#20013;&#30340;&#22320;&#20301;&#20284;&#20046;&#20063;&#24050;&#32463;&#38590;&#20197;&#25788;&#21160;&#20102;&#12290;Nginx &#30340;&#19971;&#23618;&#36127;&#36733;&#38750;&#24120;&#28789;&#27963;&#65292;&#38500;&#20102;&#26681;&#25454; URL&#12289;HTTP &#22836;&#21305;&#37197;&#35268;&#21017;&#65292;&#36824;&#33021;&#23545;&#35831;&#27714;&#36827;&#34892;&#25913;&#20889;&#65292;&#22914;&#26524;&#25645;&#37197; Lua &#33050;&#26412;&#65292;&#21487;&#20197;&#23454;&#29616;&#26356;&#22810;&#8220;&#31070;&#22855;&#8221;&#30340;&#25928;&#26524;&#65292;&#21487;&#23450;&#21046;&#24615;&#26497;&#24378;&#12290;Nginx &#21516;&#26679;&#25903;&#25345;&#22810;&#31181;&#35843;&#24230;&#31574;&#30053;&#65292;&#20363;&#22914;&#36718;&#35810;&#12289;&#21152;&#26435;&#36718;&#35810;&#12289;&#22522;&#20110; IP Hash&#12289;&#22522;&#20110; URL Hash &#31561;&#12290;&#20174; 1.9.0 &#29256;&#26412;&#24320;&#22987;&#65292;Nginx &#20013;&#22686;&#21152;&#20102; Stream &#27169;&#22359;&#65292;&#20063;&#24320;&#22987;&#25903;&#25345; TCP &#20195;&#29702;&#21644;&#36127;&#36733;&#22343;&#34913;&#65292;&#33021;&#22815;&#25552;&#20379;&#22235;&#23618;&#36127;&#36733;&#22343;&#34913;&#12290;</p>
<p>&#24635;&#20307;&#19978;&#26469;&#30475;&#65292;&#22235;&#23618;&#36127;&#36733;&#22343;&#34913;&#21482;&#38656;&#22788;&#29702;&#24213;&#23618;&#30340;&#25968;&#25454;&#21253;&#65292;&#27809;&#26377;&#22797;&#26434;&#30340;&#36923;&#36753;&#65292;&#24615;&#33021;&#26356;&#22909;&#65307;&#20294;&#19971;&#23618;&#36127;&#36733;&#22343;&#34913;&#26356;&#36148;&#36817;&#24212;&#29992;&#65292;&#26356;&#21152;&#28789;&#27963;&#8212;&#8212;&#20004;&#32773;&#21508;&#26377;&#21033;&#24330;&#12290;&#22312;&#23454;&#38469;&#20351;&#29992;&#36807;&#31243;&#20013;&#65292;&#36890;&#24120;&#20250;&#23558;&#20004;&#32773;&#32467;&#21512;&#36215;&#26469;&#65292;&#26368;&#22806;&#23618;&#29992; LVS &#25645;&#37197; Keepalived &#25552;&#20379;&#39640;&#24615;&#33021;&#39640;&#21487;&#38752;&#30340;&#22235;&#23618;&#36127;&#36733;&#65292;&#20027;&#22791; LVS &#32972;&#21518;&#37117;&#25346;&#19978;&#19968;&#32452;&#23545;&#31561;&#30340; Nginx &#38598;&#32676;&#25552;&#20379;&#19971;&#23618;&#36127;&#36733;&#65292;&#20877;&#22312; Nginx &#20013;&#37197;&#32622;&#20855;&#20307;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#22320;&#22336;&#21644;&#31471;&#21475;&#12290;&#20855;&#20307;&#22914;&#22270; 13-2 &#25152;&#31034;&#12290;</p>
<p class="p-img"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00789.jpeg"/></p>
<p class="p-img-title"><strong>&#22270; 13-2&#12288;LVS &#19982; Nginx &#25645;&#37197;&#30340;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;</strong></p>
<p>&#38500;&#20102;&#19978;&#38754;&#25552;&#21040;&#30340; LVS &#21644; Nginx&#65292;&#19994;&#30028;&#36824;&#26377;&#19968;&#20123;&#20854;&#20182;&#30340;&#30693;&#21517;&#24320;&#28304;&#36127;&#36733;&#22343;&#34913;&#36719;&#20214;&#65292;&#20363;&#22914; HAProxy &#26159;&#19968;&#27454;&#21516;&#26102;&#25903;&#25345;&#22235;&#23618;&#21644;&#19971;&#23618;&#39640;&#24615;&#33021;&#36127;&#36733;&#22343;&#34913;&#30340;&#32769;&#29260;&#36719;&#20214;&#65292;&#22269;&#20869;&#30340;&#29233;&#22855;&#33402;&#22522;&#20110; DPDK &#24320;&#21457;&#20102;&#19968;&#27454;&#39640;&#25928;&#30340;&#22235;&#23618;&#36127;&#36733;&#22343;&#34913;&#22120; DPVS&#12290;DPVS &#20840;&#31216;&#26159; DPDK-LVS&#65292;&#20174;&#21517;&#23383;&#20013;&#23601;&#33021;&#30475;&#20986;&#23427;&#26159;&#20174; LVS &#20462;&#25913;&#32780;&#26469;&#30340;&#65292;&#20004;&#32773;&#30340;&#20027;&#35201;&#21306;&#21035;&#23601;&#26159; DPVS &#24341;&#20837;&#20102; DPDK&#12290;DPDK &#30340;&#20840;&#31216;&#26159; Data Plane Development Kit&#65292;&#33021;&#20026;&#31995;&#32479;&#25552;&#20379;&#26356;&#39640;&#25928;&#30340;&#25968;&#25454;&#21253;&#22788;&#29702;&#33021;&#21147;&#65292;&#26680;&#24515;&#24605;&#24819;&#23601;&#26159; DPDK &#24212;&#29992;&#22312; Linux &#29992;&#25143;&#24577;&#30452;&#25509;&#29992;&#33258;&#24049;&#30340;&#24211;&#26469;&#25910;&#21457;&#25968;&#25454;&#21253;&#65292;&#32469;&#36807; Linux &#20869;&#26680;&#21327;&#35758;&#26632;&#30340;&#22788;&#29702;&#36807;&#31243;&#65292;&#33410;&#30465;&#20102;&#24456;&#22810;&#24320;&#38144;&#12290;&#30456;&#27604;&#20256;&#32479; LVS&#65292;&#37319;&#29992; DPDK &#25216;&#26415;&#21518;&#33021;&#22823;&#24133;&#25552;&#21319;&#25968;&#25454;&#21253;&#30340;&#36716;&#21457;&#24615;&#33021;&#12290;</p>
</li>
</ol><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">1</span>ISO/OSI &#27169;&#22411;&#65292;&#21363;&#22269;&#38469;&#26631;&#20934;&#21270;&#32452;&#32455;&#30340;&#24320;&#25918;&#24335;&#36890;&#20449;&#31995;&#32479;&#20114;&#32852;&#21442;&#32771;&#27169;&#22411;&#65288;Open System Interconnection Reference Model&#65289;&#65292;&#20849;&#20998;&#20026;&#19971;&#23618;&#65292;&#20174;&#19979;&#24448;&#19978;&#20998;&#21035;&#26159;&#29289;&#29702;&#23618;&#12289;&#25968;&#25454;&#38142;&#36335;&#23618;&#12289;&#32593;&#32476;&#23618;&#12289;&#20256;&#36755;&#23618;&#12289;&#20250;&#35805;&#23618;&#12289;&#34920;&#31034;&#23618;&#21644;&#24212;&#29992;&#23618;&#12290;</p><h3 id="nav_point_205">13.1.2&#12288;&#20998;&#24067;&#24335;&#26041;&#26696;</h3><p>13.1.1 &#33410;&#20013;&#20171;&#32461;&#30340;&#26041;&#26696;&#37117;&#38656;&#35201;&#32463;&#36807;&#19968;&#20010;&#38598;&#20013;&#30340;&#28857;&#65292;&#34429;&#28982;&#36825;&#20010;&#28857;&#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#38598;&#32676;&#65292;&#20294;&#36923;&#36753;&#19978;&#20250;&#26377;&#20010;&#27969;&#37327;&#36827;&#20837;&#30340;&#20013;&#24515;&#12290;&#21482;&#35201;&#23384;&#22312;&#20013;&#24515;&#28857;&#65292;&#37027;&#36825;&#20010;&#20013;&#24515;&#28857;&#23601;&#21487;&#33021;&#25104;&#20026;&#31995;&#32479;&#30340;&#29942;&#39048;&#25110;&#32773;&#39640;&#21361;&#21306;&#22495;&#65292;&#25105;&#20204;&#33021;&#19981;&#33021;&#28040;&#38500;&#23427;&#21602;&#65311;&#31572;&#26696;&#24517;&#28982;&#26159;&#32943;&#23450;&#30340;&#12290;</p><p>&#22823;&#23478;&#21487;&#20197;&#35797;&#24819;&#19968;&#19979;&#24179;&#26102;&#19979;&#36733;&#19996;&#35199;&#30340;&#36807;&#31243;&#12290;&#24403;&#20320;&#20174;&#19968;&#20010;&#32593;&#31449;&#29992; HTTP &#21327;&#35758;&#19979;&#36733;&#25991;&#20214;&#26102;&#65292;&#32593;&#31449;&#23601;&#26159;&#19979;&#36733;&#36807;&#31243;&#20013;&#30340;&#20013;&#24515;&#28857;&#65292;&#19968;&#26086;&#32593;&#31449;&#23849;&#28291;&#65292;&#19979;&#36733;&#23601;&#20250;&#22833;&#36133;&#12290;&#20294;&#22914;&#26524;&#29992; P2P&#65288;Point-to-Point&#65292;&#28857;&#23545;&#28857;&#65289;&#21327;&#35758;&#26469;&#19979;&#36733;&#65292;&#20363;&#22914;&#29992; BT &#24037;&#20855;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#20174; Tracker &#26381;&#21153;&#22120;&#19978;&#33719;&#21462;&#30446;&#21069;&#27491;&#22312;&#19979;&#36733;&#21644;&#8220;&#20570;&#31181;&#8221;&#30340;&#33410;&#28857;&#20449;&#24687;&#65292;&#38543;&#21518;&#23601;&#33021;&#30452;&#25509;&#36830;&#19978;&#20998;&#25955;&#22312;&#21508;&#22320;&#30340;&#33410;&#28857;&#21435;&#19979;&#36733;&#65292;&#36825;&#26679;&#23601;&#19981;&#23384;&#22312;&#20013;&#24515;&#20102;&#12290;</p><p>&#22312;&#31995;&#32479;&#20869;&#37096;&#30340;&#26381;&#21153;&#35843;&#29992;&#26041;&#24335;&#19978;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#21442;&#32771; P2P &#30340;&#26041;&#26696;&#65292;&#23454;&#29616;&#20998;&#24067;&#24335;&#36127;&#36733;&#22343;&#34913;&#12290;&#26381;&#21153;&#30340;&#25552;&#20379;&#32773;&#22312;&#21551;&#21160;&#21518;&#23558;&#33258;&#24049;&#25552;&#20379;&#30340;&#26381;&#21153;&#20449;&#24687;&#27880;&#20876;&#21040;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#65292;&#32780;&#26381;&#21153;&#30340;&#28040;&#36153;&#32773;&#21017;&#20174;&#27880;&#20876;&#20013;&#24515;&#33719;&#21462;&#33258;&#24049;&#38656;&#35201;&#30340;&#26381;&#21153;&#30340;&#25552;&#20379;&#32773;&#20449;&#24687;&#12290;&#22312;&#21457;&#29983;&#23454;&#38469;&#35843;&#29992;&#26102;&#65292;&#28040;&#36153;&#32773;&#30452;&#25509;&#26681;&#25454;&#31574;&#30053;&#20174;&#25552;&#20379;&#32773;&#21015;&#34920;&#20013;&#36873;&#25321;&#19968;&#20010;&#33410;&#28857;&#21457;&#36215;&#35843;&#29992;&#65292;&#20855;&#20307;&#22914;&#22270; 13-3 &#25152;&#31034;&#12290;&#19982;&#38598;&#20013;&#24335;&#26041;&#26696;&#30456;&#27604;&#65292;&#20998;&#24067;&#24335;&#26041;&#26696;&#27599;&#27425;&#35843;&#29992;&#26080;&#39035;&#32463;&#36807;&#29420;&#31435;&#30340;&#36127;&#36733;&#22343;&#34913;&#22120;&#65292;&#32780;&#26159;&#30452;&#25509;&#35831;&#27714;&#23454;&#38469;&#30340;&#25552;&#20379;&#32773;&#12290;&#22312;&#20855;&#20307;&#23454;&#29616;&#35813;&#26041;&#26696;&#26102;&#24403;&#28982;&#24773;&#20917;&#20250;&#22797;&#26434;&#24456;&#22810;&#65292;&#25105;&#20204;&#35201;&#32771;&#34385;&#21508;&#31181;&#24322;&#24120;&#21644;&#29305;&#27530;&#22330;&#26223;&#65292;&#20363;&#22914;&#22914;&#20309;&#24212;&#23545;&#27880;&#20876;&#20013;&#24515;&#25972;&#20307;&#25925;&#38556;&#65292;&#22914;&#20309;&#24863;&#30693;&#33410;&#28857;&#21457;&#29983;&#21464;&#21270;&#65292;&#31561;&#31561;&#65292;&#20294;&#25972;&#20307;&#30340;&#27969;&#31243;&#21644;&#32467;&#26500;&#22823;&#33268;&#19978;&#26159;&#36825;&#26679;&#30340;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00790.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-3&#12288;&#20998;&#24067;&#24335;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;</strong></p><p>Spring Cloud &#26089;&#26399;&#25903;&#25345; Netflix &#20844;&#21496;&#24320;&#28304;&#30340; Eureka &#26469;&#20805;&#24403;&#26381;&#21153;&#30340;&#27880;&#20876;&#20013;&#24515;&#65292;&#21518;&#26469;&#36824;&#25552;&#20379;&#20102;&#23545; HashiCorp Consul &#21644; Apache Zookeeper &#30340;&#25903;&#25345;&#65292;&#38463;&#37324;&#24052;&#24052;&#20063;&#36129;&#29486;&#20102; Nacos &#30456;&#20851;&#30340;&#25903;&#25345;&#12290;&#22312;&#26412;&#31456;&#30340;&#21518;&#32493;&#37096;&#20998;&#65292;&#25105;&#20204;&#20250;&#20998;&#21035;&#26469;&#30475;&#30475;&#36825;&#20123;&#32452;&#20214;&#30340;&#27010;&#20917;&#21644;&#20855;&#20307;&#20351;&#29992;&#26041;&#27861;&#12290;</p><h2 id="nav_point_206">13.2&#12288;&#20351;&#29992; Spring Cloud &#23454;&#29616;&#36127;&#36733;&#22343;&#34913;</h2><p>&#27491;&#22914;&#22312; 12.3 &#33410;&#20013;&#25152;&#20171;&#32461;&#30340;&#37027;&#26679;&#65292;Spring Cloud &#20026;&#26500;&#24314;&#20113;&#21407;&#29983;&#24212;&#29992;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;&#23436;&#25972;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#20854;&#20013;&#20043;&#19968;&#23601;&#26159;&#26381;&#21153;&#30340;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#12290;Spring Cloud &#21487;&#20197;&#36731;&#26494;&#23454;&#29616;&#24494;&#26381;&#21153;&#30340;&#36719;&#36127;&#36733;&#22343;&#34913;&#65292;&#36824;&#33258;&#24102;&#20102;&#23545;&#22810;&#31181;&#27880;&#20876;&#20013;&#24515;&#30340;&#25903;&#25345;&#12290;&#24471;&#30410;&#20110; Spring &#19968;&#36143;&#24378;&#22823;&#30340;&#25277;&#35937;&#65292;&#22312;&#20999;&#25442;&#19981;&#21516;&#30340;&#37197;&#32622;&#20013;&#24515;&#26102;&#65292;&#24212;&#29992;&#20195;&#30721;&#20960;&#20046;&#26080;&#39035;&#25913;&#21160;&#12290;&#22312;&#25509;&#19979;&#26469;&#30340;&#37096;&#20998;&#20013;&#65292;&#35753;&#25105;&#20204;&#36890;&#36807;&#20108;&#36827;&#21046;&#22902;&#33590;&#24215;&#30340;&#19968;&#20010;&#20363;&#23376;&#26469;&#20102;&#35299;&#19968;&#19979;&#22914;&#20309;&#20351;&#29992; Spring Cloud &#23454;&#29616;&#36127;&#36733;&#22343;&#34913;&#12290;</p><blockquote>
<p><strong>&#38656;&#27714;&#25551;&#36848;</strong>&#12288;&#25105;&#20204;&#30340;&#20108;&#36827;&#21046;&#22902;&#33590;&#24215;&#31995;&#32479;&#24930;&#24930;&#21464;&#22823;&#20102;&#65292;&#19981;&#20877;&#26159;&#21333;&#26426;&#31995;&#32479;&#65292;&#26381;&#21153;&#31471;&#21464;&#25104;&#20102;&#38598;&#32676;&#12290;&#22240;&#20026;&#19981;&#24819;&#36816;&#32500;&#38598;&#20013;&#24335;&#30340;&#30828;&#20214;&#25110;&#32773;&#36719;&#20214;&#36127;&#36733;&#22343;&#34913;&#35774;&#26045;&#65292;&#25105;&#20204;&#36873;&#25321;&#20102;&#20998;&#24067;&#24335;&#26041;&#26696;&#65292;&#25171;&#31639;&#29992; Spring Cloud &#26469;&#23454;&#29616;&#26381;&#21153;&#30340;&#27880;&#20876;&#21644;&#21457;&#29616;&#12290;&#33267;&#20110;&#27880;&#20876;&#20013;&#24515;&#65292;&#20808;&#19981;&#30528;&#24613;&#20915;&#23450;&#65292;&#37117;&#35797;&#35797;&#21543;&#12290;</p>
</blockquote><h3 id="nav_point_207">13.2.1&#12288;&#22312; Zookeeper &#20013;&#27880;&#20876;&#26381;&#21153;</h3><p>&#35201;&#22312;&#39033;&#30446;&#20013;&#20351;&#29992; Spring Cloud &#30456;&#20851;&#30340;&#33021;&#21147;&#65292;&#36890;&#24120;&#30340;&#20570;&#27861;&#26159;&#20808;&#22312; <code>&lt;dependencyManagement/&gt;</code> &#20013;&#23548;&#20837; Spring Cloud &#30340; pom &#25991;&#20214;&#65292;&#20855;&#20307;&#30340;&#29256;&#26412;&#21487;&#20197;&#37197;&#32622;&#22312; <code>&lt;properties/&gt;</code> &#20013;&#65292;&#21518;&#38754;&#29992;&#21040; Spring Cloud &#30340;&#20381;&#36182;&#26102;&#65292;&#22823;&#22810;&#37117;&#38656;&#35201;&#20808;&#22312;&#36825;&#37324;&#23548;&#20837; <code>spring-cloud-dependencies</code>&#65292;&#23626;&#26102;&#23601;&#19981;&#20877;&#36184;&#36848;&#20102;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;properties&gt;
    &lt;spring-cloud.version&gt;2021.0.1&lt;/spring-cloud.version&gt;
&lt;/properties&gt;

&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre><p>&#38543;&#21518;&#65292;&#24341;&#20837;&#25152;&#38656;&#30340;&#20381;&#36182;&#65292;&#20363;&#22914;&#25105;&#20204;&#36825;&#37324;&#24076;&#26395;&#20351;&#29992; Zookeeper &#26469;&#20570;&#26381;&#21153;&#30340;&#27880;&#20876;&#20013;&#24515;&#65292;&#33258;&#21160;&#23454;&#29616;&#26381;&#21153;&#30340;&#27880;&#20876;&#19982;&#21457;&#29616;&#65292;&#23601;&#22312; pom.xml &#30340; <code>&lt;dependencies/&gt;</code> &#20013;&#22686;&#21152;&#22914;&#19979;&#30340;&#36215;&#27493;&#20381;&#36182;&#65292;&#29256;&#26412;&#30001;&#19978;&#38754;&#30340; <code>spring-cloud-dependencies</code> &#32479;&#19968;&#31649;&#29702;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-zookeeper-discovery&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#20316;&#20026;&#26381;&#21153;&#25552;&#20379;&#32773;&#30340;&#31243;&#24207;&#22312;&#24341;&#20837;&#20381;&#36182;&#21518;&#65292;&#19981;&#38656;&#35201;&#25105;&#20204;&#20570;&#20160;&#20040;&#25913;&#21160;&#65292;&#21482;&#38656;&#35843;&#25972;&#19968;&#20123;&#37197;&#32622;&#21363;&#21487;&#65292;&#20363;&#22914;&#65292;&#22312; <code>application.properties</code> &#37324;&#22686;&#21152;&#22914;&#19979;&#20869;&#23481; <span class="&#27880;&#37322;&#32534;&#21495;">2</span>&#65306;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">2</span>&#36825;&#37324;&#30340;&#20363;&#23376;&#20197; 11.1 &#33410;&#30340; binarytea-controller-advice &#20026;&#22522;&#30784;&#65292;&#25918;&#22312; ch13/binarytea-zookeeper &#39033;&#30446;&#20013;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=binarytea
spring.cloud.zookeeper.connect-string=localhost:2181</code></pre><p>&#31532;&#19968;&#34892;&#30340; <code>spring.application.name</code> &#26159;&#20351;&#29992; Spring Cloud &#30340;&#26381;&#21153;&#27880;&#20876;&#12289;&#26381;&#21153;&#21457;&#29616;&#21644;&#37197;&#32622;&#31649;&#29702;&#21151;&#33021;&#31561;&#35832;&#22810;&#21151;&#33021;&#26102;&#37117;&#38656;&#35201;&#29992;&#21040;&#30340;&#37197;&#32622;&#65292;&#20195;&#34920;&#20102;&#24403;&#21069;&#24212;&#29992;&#30340;&#24212;&#29992;&#21517;&#31216;&#12290;&#31532;&#20108;&#34892;&#30340; <code>spring.cloud.zookeeper.connect-string</code> &#26159;&#20855;&#20307;&#35201;&#36830;&#25509;&#30340; Zookeeper &#22320;&#22336;&#65292;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#20102;&#30417;&#21548;&#26412;&#26426; <code>2181</code> &#31471;&#21475;&#30340; Zookeeper&#65292;&#35760;&#24471;&#20808;&#25226;&#23427;&#21551;&#21160;&#36215;&#26469;&#65292;&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#25442;&#21035;&#30340;&#22320;&#22336;&#12290;&#22914;&#26524;&#20351;&#29992; Docker &#30340;&#35805;&#65292;&#21487;&#20197;&#29992;&#22914;&#19979;&#21629;&#20196;&#22312;&#26412;&#22320;&#21551;&#21160;&#19968;&#20010; Zookeeper&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker pull zookeeper
&#9656; docker run --name zookeeper -p 2181:2181 -d zookeeper</code></pre><p>&#22312;&#21551;&#21160;&#25105;&#20204;&#30340; BinaryTea &#31243;&#24207;&#21518;&#65292;Spring Cloud &#20250;&#24110;&#25105;&#20204;&#25226;&#23454;&#20363;&#27880;&#20876;&#21040; Zookeeper &#19978;&#65292;&#22914;&#26524;&#25105;&#20204;&#29992; <code>zkCli.sh</code> &#21629;&#20196;&#36830;&#19978; Zookeepr&#65292;&#36890;&#36807;&#21629;&#20196;&#21487;&#20197;&#26597;&#30475;&#21040;&#20855;&#20307;&#30340;&#20449;&#24687;&#65292;&#22823;&#33268;&#26159;&#36825;&#26679;&#30340;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>[zk: localhost:2181(CONNECTED) 3] ls /services/binarytea
[5ff82111-04c2-4b13-ba52-3c69f5468691]
[zk: localhost:2181(CONNECTED) 5] get /services/binarytea/5ff82111-04c2-4b13-ba52-3c69f5468691
{"name":"binarytea","id":"5ff82111-04c2-4b13-ba52-3c69f5468691","address":"192.168.3.7","port":8080,
"sslPort":null,"payload":{"@class":"org.springframework.cloud.zookeeper.discovery.ZookeeperInstance",
"id":"binarytea","name":"binarytea","metadata":{"instance_status":"UP"}},"registrationTimeUTC":
1621778230330,"serviceType":"DYNAMIC","uriSpec":{"parts":[{"value":"scheme","variable":true},{"value":
"://","variable":false},{"value":"address","variable":true},{"value":":","variable":false},{"value":
"port","variable":true}]}}</code></pre><p>&#20174;&#19978;&#38754;&#30340;&#20449;&#24687;&#21487;&#20197;&#30475;&#21040;&#65292;&#26381;&#21153;&#21517;&#26159; <code>binarytea</code>&#65292;&#20063;&#23601;&#26159; <code>spring.application.name</code> &#37324;&#37197;&#32622;&#30340;&#20540;&#65292;&#23454;&#20363; ID &#40664;&#35748;&#26159; Spring &#19978;&#19979;&#25991; ID&#65292;&#22320;&#22336;&#23601;&#26159;&#27880;&#20876;&#19978;&#21435;&#30340;&#26412;&#26426; IP&#65292;&#31471;&#21475;&#26159; <code>server.port</code>&#65292;&#24403;&#21069;&#23454;&#20363;&#30340;&#29366;&#24577;&#26159; <code>UP</code>&#12290;</p><p>Spring Cloud &#30340; Zookeeper &#25903;&#25345;&#36824;&#26377;&#20123;&#21035;&#30340;&#37197;&#32622;&#65292;&#36890;&#24120;&#29992;&#40664;&#35748;&#20540;&#20063;&#22815;&#20102;&#65292;&#20294;&#36824;&#26159;&#21487;&#20197;&#20102;&#35299;&#19968;&#19979;&#65292;&#20855;&#20307;&#22914;&#34920; 13-1 &#25152;&#31034;&#12290;</p><p><strong>&#34920; 13-1&#12288;Spring Cloud Zookeeper &#19982;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26377;&#20851;&#30340;&#19968;&#20123;&#37197;&#32622;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#37197;&#32622;&#39033;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#40664;&#35748;&#20540;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.service-registry.auto-registration.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551;&#26381;&#21153;&#33258;&#21160;&#27880;&#20876;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Zookeeper &#30456;&#20851;&#25903;&#25345;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.connect-string</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>localhost:2181</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Zookeeper &#30340;&#36830;&#25509;&#20018;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.connection-timeout</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>15000ms</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Zookeeper &#30340;&#36830;&#25509;&#36229;&#26102;&#26102;&#38388;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.session-timeout</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>60000ms</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Zookeeper &#30340;&#20250;&#35805;&#36229;&#26102;&#26102;&#38388;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.discovery.register</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Zookeeper &#26381;&#21153;&#27880;&#20876;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.discovery.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Zookeeper &#26381;&#21153;&#21457;&#29616;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.discovery.prefer-ip-address</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>false</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#20248;&#20808;&#20351;&#29992; IP &#22320;&#22336;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.zookeeper.discovery.root</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>/services</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#30340;&#26681;&#30446;&#24405;</p></td>
</tr>
</tbody>
</table><blockquote>
<p><strong>&#33590;&#27463;&#26102;&#38388;&#65306;&#20026;&#20160;&#20040; Zookeeper &#19981;&#36866;&#21512;&#20570;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;</strong></p>
<p>&#34429;&#28982;&#22312;&#20070;&#20013;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#20102;&#22914;&#20309;&#20351;&#29992; Zookeeper &#26469;&#20805;&#24403;&#26381;&#21153;&#30340;&#27880;&#20876;&#20013;&#24515;&#65292;&#22312;&#23454;&#38469;&#24037;&#20316;&#20013;&#30340;&#30830;&#20063;&#26377;&#24456;&#22810;&#20154;&#26159;&#36825;&#20040;&#29992;&#30340;&#65292;&#20294;&#36825;<strong>&#24182;&#19981;&#20195;&#34920; Zookeeper &#23601;&#26159;&#26368;&#21512;&#36866;&#30340;&#36873;&#25321;&#65292;&#29978;&#33267;&#21487;&#20197;&#35828;&#23427;&#19981;&#26159;&#20010;&#29702;&#24819;&#30340;&#36873;&#25321;</strong>&#65292;&#36825;&#26159;&#20026;&#20160;&#20040;&#21602;&#65311;</p>
<p>&#22312;&#20998;&#24067;&#24335;&#31995;&#32479;&#20013;&#26377;&#19968;&#20010;&#33879;&#21517;&#30340; CAP &#23450;&#29702;&#65292;&#20854;&#20013; C &#26159;&#25351;&#19968;&#33268;&#24615;&#65288;Consistency&#65289;&#65292;A &#26159;&#25351;&#21487;&#29992;&#24615;&#65288;Availability&#65289;&#65292;&#32780; P &#21017;&#25351;&#20998;&#21306;&#23481;&#38169;&#24615;&#65288;Partition tolerance&#65289;&#12290;&#36825;&#26465;&#23450;&#29702;&#35828;&#30340;&#26159; <strong>CAP &#20013;&#30340;&#19977;&#20010;&#35201;&#32032;&#26368;&#22810;&#21482;&#33021;&#21516;&#26102;&#28385;&#36275;&#20004;&#20010;&#65292;&#19981;&#33021;&#19977;&#32773;&#20860;&#39038;</strong>&#12290;&#20063;&#23601;&#26159;&#35828;&#19968;&#20010;&#31995;&#32479;&#35201;&#20040;&#26159; CA &#30340;&#65292;&#35201;&#20040;&#26159; CP &#30340;&#65292;&#35201;&#20040;&#26159; AP &#30340;&#65292;&#19981;&#21487;&#33021;&#21516;&#26102;&#28385;&#36275; CAP &#19977;&#20010;&#35201;&#32032;&#12290;</p>
<p>Zookeeper &#20316;&#20026;&#19968;&#27454;&#30693;&#21517;&#30340;&#20998;&#24067;&#24335;&#21327;&#35843;&#31995;&#32479;&#65292;&#36861;&#27714;&#19968;&#33268;&#24615;&#65292;&#28385;&#36275; CP&#65292;&#22312;&#20851;&#38190;&#26102;&#21051;&#20250;&#25918;&#24323;&#21487;&#29992;&#24615;&#12290;&#36825;&#20010;&#20851;&#38190;&#30340;&#35774;&#35745;&#27880;&#23450;&#20102;&#22312;&#36825;&#20010;&#22330;&#26223;&#19979;&#23427;&#19981;&#26159;&#19968;&#20010;&#21512;&#29702;&#30340;&#36873;&#25321;&#65292;&#22240;&#20026;&#26381;&#21153;&#30340;&#27880;&#20876;&#20013;&#24515;&#38656;&#35201;&#26159;&#20010; AP &#31995;&#32479;&#12290;&#22312;&#26497;&#31471;&#24773;&#20917;&#19979;&#65292;&#27880;&#20876;&#20013;&#24515;&#27963;&#30528;&#24448;&#24448;&#27604;&#26381;&#21153;&#25552;&#20379;&#32773;&#21644;&#28040;&#36153;&#32773;&#30340;&#20934;&#30830;&#24615;&#26356;&#37325;&#35201;&#65292;&#23569;&#19968;&#20010;&#21487;&#29992;&#26381;&#21153;&#25552;&#20379;&#32773;&#24182;&#19981;&#20250;&#24433;&#21709;&#35831;&#27714;&#35843;&#29992;&#65292;&#20294;&#27880;&#20876;&#20013;&#24515;&#20840;&#23849;&#28291;&#20102;&#65292;&#25152;&#26377;&#26381;&#21153;&#37117;&#25214;&#19981;&#21040;&#33258;&#24049;&#38656;&#35201;&#35843;&#29992;&#30340;&#19979;&#28216;&#65292;&#37027;&#25165;&#26159;&#19968;&#20010;&#28798;&#38590;&#12290;</p>
<p>&#27492;&#22806;&#65292;Zookeeper &#26412;&#36523;&#22312;&#36873;&#20030;&#12289;&#20445;&#25345;&#19968;&#33268;&#24615;&#26041;&#38754;&#26377;&#36739;&#39640;&#35201;&#27714;&#65292;&#23448;&#26041;&#25512;&#33616;&#37197;&#32622;&#38598;&#32676;&#22312; 5 &#33410;&#28857;&#25110;&#32773; 7 &#33410;&#28857;&#36825;&#31181;&#35268;&#27169;&#65292;&#38754;&#23545;&#26085;&#30410;&#24222;&#22823;&#30340;&#24212;&#29992;&#31995;&#32479;&#35268;&#27169;&#65292;&#32456;&#23558;&#38754;&#23545;&#33258;&#24049;&#30340;&#24615;&#33021;&#29942;&#39048;&#65292;&#21363;&#20351;&#22686;&#21152;&#35266;&#23519;&#32773;&#27169;&#24335;&#30340;&#33410;&#28857;&#65292;&#20063;&#20250;&#24456;&#24555;&#38754;&#20020;&#38656;&#35201;&#25286;&#20998;&#30340;&#37027;&#19968;&#22825;&#12290;&#36824;&#26377;&#31867;&#20284;&#26381;&#21153;&#20581;&#24247;&#26816;&#26597;&#31561;&#20854;&#20182;&#30340;&#38382;&#39064;&#65292;&#37117;&#35753; Zookeeper &#36825;&#20010;&#26126;&#26143;&#22312;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#22330;&#26223;&#19979;&#30340;&#34920;&#29616;&#19981;&#23613;&#22914;&#20154;&#24847;&#12290;</p>
<p>&#20851;&#20110;&#36825;&#20010;&#38382;&#39064;&#30340;&#35752;&#35770;&#65292;&#38463;&#37324;&#24052;&#24052;&#21644; Netflix &#30340;&#25216;&#26415;&#19987;&#23478;&#37117;&#26366;&#32463;&#25776;&#20889;&#36807;&#25991;&#31456;&#65292;&#35762;&#36848;&#33258;&#24049;&#20026;&#20309;&#19981;&#36873;&#25321; Zookeeper &#32780;&#26159;&#33258;&#24049;&#24320;&#21457;&#20102;&#19968;&#22871;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#65292;&#24863;&#20852;&#36259;&#30340;&#26379;&#21451;&#21487;&#20197;&#35835;&#35835;&#12298;&#38463;&#37324;&#24052;&#24052;&#20026;&#20160;&#20040;&#19981;&#29992; ZooKeeper &#20570;&#26381;&#21153;&#21457;&#29616;&#65311;&#12299;&#21644;&#8220;Eureka! Why You Shouldn't Use ZooKeeper for Service Discovery&#8221;&#12290;</p>
</blockquote><h3 id="nav_point_208">13.2.2&#12288;&#20351;&#29992; Spring Cloud LoadBalancer &#35775;&#38382;&#26381;&#21153;</h3><p>&#26377;&#20102;&#26381;&#21153;&#30340;&#25552;&#20379;&#32773;&#65292;&#33258;&#28982;&#23601;&#20250;&#26377;&#26381;&#21153;&#30340;&#28040;&#36153;&#32773;&#65292;&#22312;&#28040;&#36153;&#32773;&#36825;&#19968;&#31471;&#65292;&#21516;&#26679;&#38656;&#35201;&#24341;&#20837; 13.1 &#20013;&#30340;&#21508;&#31181;&#20381;&#36182;&#12290;<span class="&#27880;&#37322;&#32534;&#21495;">3</span> &#26368;&#37325;&#35201;&#30340;&#26159;&#35753; <code>RestTemplate</code> &#25903;&#25345;&#20174;&#27880;&#20876;&#20013;&#24515;&#33719;&#21462;&#23545;&#24212;&#26381;&#21153;&#30340;&#21015;&#34920;&#65292;&#38656;&#35201;&#22312;&#22768;&#26126; Bean &#30340;&#26102;&#20505;&#22686;&#21152; <code>@LoadBalanced</code> &#27880;&#35299;&#65292;&#20197;&#20415;&#20026;&#25105;&#20204;&#30340; <code>RestTemplate</code> &#22686;&#21152; <code>LoadBalancerInterceptor</code>&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">3</span>&#22312;&#26089;&#26399;&#30340; Spring Cloud &#20013;&#65292;&#25105;&#20204;&#35201;&#22312;&#37197;&#32622;&#31867;&#19978;&#22686;&#21152; <code>@EnableDiscoveryClient</code> &#27880;&#35299;&#65292;&#22768;&#26126;&#24320;&#21551;&#26381;&#21153;&#21457;&#29616;&#30340;&#23458;&#25143;&#31471;&#65292;&#20294;&#29616;&#22312;&#19981;&#20877;&#38656;&#35201;&#36825;&#27493;&#21160;&#20316;&#20102;&#65292;CLASSPATH &#20013;&#21482;&#35201;&#23384;&#22312; <code>DiscoveryClient</code> &#23454;&#29616;&#21363;&#21487;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@Bean
@LoadBalanced
public RestTemplate restTemplate(RestTemplateBuilder builder) {}</code></pre><blockquote>
<p><strong>&#33590;&#27463;&#26102;&#38388;&#65306;<code>@LoadBalanced</code> &#26159;&#22914;&#20309;&#24037;&#20316;&#30340;</strong></p>
<p><code>RestTemplate</code> &#25193;&#23637;&#20102; <code>InterceptingHttpAccessor</code>&#65292;&#20854;&#20013;&#21253;&#21547;&#19968;&#20010; <code>List&lt;ClientHttpRequestInterceptor&gt;</code>&#65292;&#21487;&#20197;&#25554;&#20837;&#21508;&#31181;&#29992;&#20110;&#25318;&#25130;&#35831;&#27714;&#36827;&#34892;&#22788;&#29702;&#30340;&#25318;&#25130;&#22120;&#65292;&#19978;&#38754;&#25552;&#21040;&#30340; <code>LoadBalancerInterceptor</code> &#23601;&#26159;&#20854;&#20013;&#20043;&#19968;&#12290;&#23427;&#20250;&#20174;&#35831;&#27714;&#30340; URL &#20013;&#21462;&#20986;&#20027;&#26426;&#20449;&#24687;&#65292;&#23558;&#20854;&#35270;&#20026;&#26381;&#21153;&#21517;&#65292;&#38543;&#21518;&#36890;&#36807; <code>LoadBalancerRequestFactory</code> &#22522;&#20110;&#29616;&#26377;&#35831;&#27714;&#23553;&#35013;&#19968;&#20010;&#26032;&#30340; HTTP &#35831;&#27714;&#65292;&#29992; <code>LoadBalancerClient</code> &#26469;&#25191;&#34892;&#35831;&#27714;&#12290;</p>
<p>Spring Cloud Commons &#20013;&#30340;&#33258;&#21160;&#37197;&#32622;&#31867; <code>LoadBalancerAutoConfiguration.LoadBalancerInterceptorConfig</code> &#20013;&#20250;&#33258;&#21160;&#21019;&#24314;&#19968;&#20010; <code>LoadBalancerInterceptor</code>&#65292;&#24182;&#36890;&#36807; <code>RestTemplateCustomizer</code> &#23558;&#21069;&#32773;&#27880;&#20837;&#27599;&#20010;&#24102;&#26377; <code>@LoadBalanced</code> &#30340; <code>RestTemplate</code> &#20013;&#12290;</p>
</blockquote><p>&#38543;&#21518;&#65292;&#22312; <code>RestTemplate</code> &#21457;&#36215;&#35843;&#29992;&#26102;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;&#30446;&#26631; URL &#20013;&#20351;&#29992;&#30446;&#26631;&#26381;&#21153;&#21517;&#26469;&#20195;&#26367;&#20855;&#20307;&#30340;&#20027;&#26426;&#19982;&#31471;&#21475;&#65292;&#20363;&#22914; http://binarytea/token &#23601;&#21487;&#20197;&#20195;&#26367;&#20043;&#21069;&#30340; http://localhost:8080/token&#65292;<code>binarytea</code> &#20250;&#34987;&#26367;&#25442;&#25104;&#20855;&#20307;&#30340;&#30446;&#26631;&#12290;&#22312; <code>application.properties</code> &#20013;&#21516;&#26679;&#20570;&#20123;&#24494;&#35843;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=customer
spring.cloud.zookeeper.connect-string=localhost:2181

binarytea.url=http://binarytea</code></pre><p>&#36825;&#37324;&#22240;&#20026;&#23384;&#22312; <code>JwtClientHttpRequestInitializer</code>&#65292;&#25105;&#20204;&#22312;&#35831;&#27714;&#26102;&#20250;&#28155;&#21152; JWT &#20196;&#29260;&#65292;&#32780;&#20043;&#21069;&#30340;&#31034;&#20363;&#20013;&#65292;&#33719;&#21462;&#20196;&#29260;&#30340;&#21160;&#20316;&#27599;&#27425;&#20250;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340; <code>RestTemplate</code>&#65292;&#26174;&#28982;&#23427;&#27809;&#34987; <code>@LoadBalanced</code> &#22686;&#24378;&#36807;&#65292;&#25152;&#20197; 10.4 &#33410;&#20013;&#30340; Customer &#31034;&#20363;&#19981;&#33021;&#21482;&#25913;&#37197;&#32622;&#65292;&#36824;&#38656;&#23545; <code>JwtClientHttpRequestInitializer</code> &#20570;&#20123;&#24494;&#35843;&#65292;&#20855;&#20307;&#30340;&#25913;&#21160;&#22914;&#19979;&#65306;</p><ul>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#30452;&#25509;&#27880;&#20837;&#19968;&#20010;&#19978;&#19979;&#25991;&#20013;&#30340; <code>RestTemplate</code>&#65292;&#19981;&#20877;&#36890;&#36807; <code>ClientHttpRequestFactory</code> &#26469;&#33258;&#24049;&#21019;&#24314;&#65307;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#20026;&#20102;&#36991;&#20813;&#24490;&#29615;&#20381;&#36182;&#65292;&#27880;&#20837;&#30340; <code>RestTemplate</code> &#19978;&#35201;&#28155;&#21152; <code>@Lazy</code>&#65292;&#21516;&#26102; <code>initToken()</code> &#19981;&#33021;&#22312;&#26500;&#24314;&#21518;&#33258;&#21160;&#25191;&#34892;&#65292;&#20063;&#23601;&#26159;&#35201;&#21435;&#25481; <code>@PostConstruct</code>&#65307;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#30001;&#20110;&#27880;&#20837;&#30340; <code>RestTemplate</code> &#20063;&#20250;&#25191;&#34892; <code>JwtClientHttpRequestInitializer</code>&#65292;&#25152;&#20197;&#38024;&#23545; <em>/token</em> &#30340;&#35831;&#27714;&#35201;&#36339;&#36807;&#28155;&#21152;&#20196;&#29260;&#30340;&#21160;&#20316;&#12290;</li>
</ul><p>&#22823;&#33268;&#19978;&#30340;&#20195;&#30721;&#22914;&#20195;&#30721;&#31034;&#20363; 13-1 &#25152;&#31034;&#12290;<span class="&#27880;&#37322;&#32534;&#21495;">4</span></p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">4</span>&#36825;&#20010;&#20363;&#23376;&#22312; ch13/customer-zookeeper &#39033;&#30446;&#20013;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-1</strong>&#12288;&#20462;&#25913;&#21518;&#30340; <code>JwtClientHttpRequestInitializer</code></p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@Slf4j
public class JwtClientHttpRequestInitializer implements RestTemplateRequestCustomizer {
    // &#30465;&#30053;&#37096;&#20998;&#23646;&#24615;
    @Autowired
    @Lazy
    private RestTemplate restTemplate;
    // &#21435;&#25481;&#20102;@PostConstruct
    public void initToken() {...}

    @Override
    public void customize(ClientHttpRequest request) {
        if (request.getURI().getPath().equalsIgnoreCase("/token")) {
            // /token&#30340;&#36335;&#24452;&#19981;&#28155;&#21152;&#20196;&#29260;
            return;
        }
        // &#30465;&#30053;&#26410;&#25913;&#21160;&#30340;&#20195;&#30721;
    }

    private ResponseEntity&lt;TokenResponse&gt; acquireToken() {
        return restTemplate // &#30452;&#25509;&#29992;RestTemplate&#26469;&#33719;&#21462;Token&#65292;&#36825;&#37324;&#35201;&#36339;&#36807;&#20196;&#29260;&#26657;&#39564;
                .postForEntity(binarytea + "/token",
                        new TokenRequest(username, password), TokenResponse.class);
    }
}</code></pre><p>&#36890;&#24120;&#25105;&#20204;&#37117;&#20250;&#24076;&#26395;&#24320;&#30528;&#26381;&#21153;&#21457;&#29616;&#21151;&#33021;&#65292;&#20294;&#22914;&#26524;&#20986;&#20110;&#26576;&#20123;&#21407;&#22240;&#65292;CLASSPATH &#37324;&#23384;&#22312;&#30456;&#20851;&#20381;&#36182;&#65292;&#21448;&#24076;&#26395;&#20851;&#38381;&#36825;&#20010;&#21151;&#33021;&#65292;&#21487;&#20197;&#37197;&#32622; <code>spring.cloud.discovery.enabled=false</code>&#12290;&#20854;&#20182;&#36824;&#26377;&#19968;&#20123; <code>spring.cloud.loadbalancer</code> &#25171;&#22836;&#30340;&#37197;&#32622;&#39033;&#65292;&#21487;&#20197;&#21442;&#32771; <code>LoadBalancerProperties</code> &#31867;&#12290;</p><h3 id="nav_point_209">13.2.3&#12288;&#20351;&#29992; OpenFeign &#35775;&#38382;&#26381;&#21153;</h3><p>&#20351;&#29992; <code>RestTemplate</code> &#24050;&#32463;&#21487;&#20197;&#26041;&#20415;&#22320;&#35843;&#29992; REST &#26381;&#21153;&#20102;&#65292;&#21487;&#26159;&#22312;&#32534;&#20889;&#35843;&#29992;&#20195;&#30721;&#26102;&#22810;&#23569;&#36824;&#26377;&#20123;&#8220;&#21051;&#24847;&#8221;&#30340;&#21619;&#36947;&#65292;&#35201;&#19987;&#38376;&#29992; <code>RestTemplate</code> &#20013;&#19982; HTTP &#21160;&#20316;&#23545;&#24212;&#30340;&#26041;&#27861;&#65292;&#26082;&#35201;&#20256;&#36882;&#21442;&#25968;&#65292;&#21448;&#35201;&#22788;&#29702;&#32467;&#26524;&#31867;&#22411;&#12290;&#22914;&#26524;&#33021;&#20687;&#35843;&#29992;&#26222;&#36890;&#19994;&#21153;&#36923;&#36753;&#20195;&#30721;&#37027;&#26679;&#26469;&#35843;&#29992;&#36828;&#31243;&#30340;&#26381;&#21153;&#65292;&#20195;&#30721;&#30475;&#36215;&#26469;&#23601;&#20250;&#33298;&#26381;&#24456;&#22810;&#12290;</p><blockquote>
<p><strong>&#35831;&#27880;&#24847;</strong>&#12288;&#34429;&#28982;&#36825;&#37324;&#30340;&#20195;&#30721;&#35843;&#29992;&#30475;&#19978;&#21435;&#21644;&#26222;&#36890;&#30340;&#26412;&#22320;&#26041;&#27861;&#35843;&#29992;&#27809;&#20160;&#20040;&#21306;&#21035;&#65292;&#20294;&#19968;&#23450;&#35201;&#26102;&#21051;&#25552;&#37266;&#33258;&#24049;&#65292;&#36825;&#26159;&#20010;&#36828;&#31243;&#35843;&#29992;&#65292;&#21508;&#31181;&#24322;&#24120;&#12289;&#26102;&#24310;&#30340;&#38382;&#39064;&#36824;&#26159;&#35201;&#22788;&#29702;&#30340;&#12290;</p>
</blockquote><p>OpenFeign<span class="&#27880;&#37322;&#32534;&#21495;">5</span> &#26159;&#19968;&#27454;&#22768;&#26126;&#24335;&#30340; Web &#26381;&#21153;&#23458;&#25143;&#31471;&#65292;&#23558; Java &#20195;&#30721;&#21644; HTTP &#25509;&#21475;&#32465;&#23450;&#21040;&#19968;&#36215;&#65292;&#35753;&#24320;&#21457;&#32773;&#21487;&#20197;&#36731;&#26494;&#22320;&#32534;&#20889; Web &#26381;&#21153;&#23458;&#25143;&#31471;&#12290;&#21407;&#26412; OpenFeign &#35201;&#27714;&#21019;&#24314;&#19968;&#20010;&#25509;&#21475;&#65292;&#38543;&#21518;&#21152;&#19978; OpenFeign &#25110;&#32773; JAX-RS &#30340;&#27880;&#35299;&#26469;&#22768;&#26126;&#26381;&#21153;&#65307;&#22312; Spring Cloud OpenFeign &#30340;&#21152;&#25345;&#19979;&#65292;&#29616;&#22312;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992; Spring MVC &#30340;&#27880;&#35299;&#26469;&#20570;&#22768;&#26126;&#65292;&#36824;&#21487;&#20197;&#20805;&#20998;&#21033;&#29992; Spring Cloud &#25552;&#20379;&#30340;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#33021;&#21147;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">5</span>Feign &#26089;&#26399;&#26159; Netflix &#24320;&#21457;&#30340;&#19968;&#20010;&#20869;&#37096;&#39033;&#30446;&#65292;&#20294;&#22312; Netflix &#20869;&#37096;&#24182;&#26410;&#24471;&#21040;&#24191;&#27867;&#20351;&#29992;&#12290;&#21518;&#26469;&#36825;&#20010;&#39033;&#30446;&#33073;&#31163;&#20102; Netflix&#65292;&#19988;&#24037;&#31243;&#25913;&#21517;&#20026; OpenFeign&#65292;&#30446;&#21069; OpenFeign &#26159;&#19968;&#20010;&#38750;&#24120;&#28909;&#38376;&#30340;&#24320;&#28304;&#39033;&#30446;&#12290;</p><ol>
<li><p><strong>OpenFeign &#30340;&#22522;&#26412;&#29992;&#27861;</strong></p>
<p>&#36825;&#37324;&#25105;&#20204;&#20173;&#26087;&#20197; Customer &#39033;&#30446;&#20026;&#20363;&#65292;&#22312; 13.2 &#33410;&#20013;&#30340;&#20363;&#23376;&#30340;&#22522;&#30784;&#19978;&#65292;&#24341;&#20837; Spring Cloud OpenFeign &#30340;&#20381;&#36182;&#12290;&#20851;&#20110;&#26381;&#21153;&#36127;&#36733;&#22343;&#34913;&#30456;&#20851;&#30340;&#33021;&#21147;&#65292;&#24182;&#19981;&#21253;&#21547;&#22312;&#36825;&#20010;&#20381;&#36182;&#20013;&#65292;&#22914;&#26524;&#38656;&#35201;&#65292;&#25105;&#20204;&#21487;&#20197;&#33258;&#24049;&#28155;&#21152; <code>spring-cloud-starter-loadbalancer</code> &#20381;&#36182;&#65292;&#25110;&#32773;&#26159;&#28155;&#21152;&#38388;&#25509;&#21253;&#21547;&#23427;&#30340;&#20381;&#36182;&#65292;&#20363;&#22914; <code>spring-cloud-starter-zookeeper-discovery</code>&#12290;</p>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- &#19979;&#38754;&#19981;&#26159;&#24517;&#38656;&#30340; --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
<p>&#38543;&#21518;&#35843;&#25972;&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#23450;&#20041;&#36828;&#31243;&#26381;&#21153;&#30340;&#25509;&#21475;&#12290;&#20854;&#23454;&#26377;&#20102; Spring Cloud &#30340;&#24110;&#21161;&#65292;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#23558; BinaryTea &#20013;&#30340;&#25511;&#21046;&#22120;&#31867;&#22797;&#21046;&#36807;&#26469;&#65292;&#21024;&#25481;&#20855;&#20307;&#30340;&#26041;&#27861;&#23454;&#29616;&#65292;&#25353;&#38656;&#30041;&#19979;&#24102;&#26377;&#27880;&#35299;&#30340;&#26041;&#27861;&#22768;&#26126;&#23601;&#21487;&#20197;&#20102;&#12290;&#24403;&#28982;&#65292;&#22312;&#23454;&#38469;&#24037;&#20316;&#20013;&#65292;&#36824;&#26159;&#20250;&#31245;&#20316;&#20462;&#25913;&#65292;&#20363;&#22914;&#20195;&#30721;&#31034;&#20363; 13-2<span class="&#27880;&#37322;&#32534;&#21495;">6</span> &#23601;&#26159;&#25105;&#20204;&#36801;&#31227;&#21040;&#23458;&#25143;&#31471;&#30340;&#35746;&#21333;&#26381;&#21153;&#12290;</p>
<blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-2</strong>&#12288;&#23545;&#24212;&#20102; <code>OrderController</code> &#30340; Feign &#26381;&#21153;&#25509;&#21475;</p>
</blockquote>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@FeignClient(contextId = "orderService", name = "binarytea", path = "/order")
public interface OrderService {
    @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)
    List&lt;Order&gt; listOrders();

    @PostMapping(consumes = MediaType.APPLICATION_JSON_VALUE,
                  produces = MediaType.APPLICATION_JSON_VALUE)
    ResponseEntity&lt;Order&gt; createNewOrder(@RequestBody NewOrderForm form);
}</code></pre>
<p>&#22312;&#19978;&#38754;&#30340;&#25509;&#21475;&#23450;&#20041;&#20013;&#65292;&#25105;&#20204;&#21435;&#38500;&#20102;&#21576;&#29616;&#39029;&#38754;&#30340;&#37096;&#20998;&#65292;&#21482;&#30041;&#19979;&#20102; REST &#26381;&#21153;&#30340;&#25509;&#21475;&#12290;<code>@FeignClient</code> &#27880;&#35299;&#21578;&#35785; Spring Cloud &#36825;&#26159;&#19968;&#20010; Feign &#30340; <code>Client</code>&#65292;&#21482;&#38656;&#22312;&#37197;&#32622;&#31867;&#19978;&#28155;&#21152; <code>@EnableFeignClients</code>&#65292;Spring &#20250;&#33258;&#21160;&#25195;&#25551;&#24102;&#26377; <code>@FeignClient</code> &#30340;&#25509;&#21475;&#24182;&#27880;&#20876;&#23545;&#24212;&#30340; Bean&#65292;&#32780; Bean &#30340; ID &#23601;&#26159; <code>contextId</code> &#20013;&#25152;&#25351;&#23450;&#30340;&#12290;<code>name</code> &#23646;&#24615;&#26159;&#26381;&#21153;&#21517;&#65292;&#36890;&#36807;&#23427;&#22312;&#27880;&#20876;&#20013;&#24515;&#25214;&#21040;&#23545;&#24212;&#30340;&#26381;&#21153;&#25552;&#20379;&#32773;&#65292;&#20854;&#20013;&#21487;&#20197;&#24102;&#19978; <code>http://</code> &#36825;&#26679;&#30340;&#21327;&#35758;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992; <code>${}</code> &#36825;&#26679;&#30340;&#21344;&#20301;&#31526;&#12290;<code>path</code> &#26159;&#25509;&#21475;&#20013;&#25152;&#26377;&#26041;&#27861;&#30340;&#36335;&#24452;&#21069;&#32512;&#65292;&#23450;&#20041;&#26041;&#27861;&#26102;&#20063;&#21487;&#20197;&#22312;&#27880;&#35299;&#37324;&#28155;&#21152;&#33258;&#24049;&#30340; <code>path</code> &#23646;&#24615;&#65292;&#22914;&#26524;&#26377;&#20844;&#20849;&#30340;&#36335;&#24452;&#21069;&#32512;&#23601;&#29992;&#36825;&#31181;&#26041;&#24335;&#37197;&#32622;&#65292;&#19981;&#35201;&#20877;&#37197;&#32622; <code>@RequestMapping</code> &#20043;&#31867;&#30340;&#27880;&#35299;&#12290;&#36820;&#22238;&#30340; <code>Order</code> &#23545;&#35937;&#21487;&#20197;&#30452;&#25509;&#20174; BinaryTea &#24037;&#31243;&#20013;&#22797;&#21046;&#36807;&#26469;&#65292;&#21435;&#25481;&#19981;&#38656;&#35201;&#30340;&#27880;&#35299;&#21644;&#19968;&#20123;&#23646;&#24615;&#21363;&#21487;&#65292;&#27492;&#22788;&#23601;&#19981;&#20877;&#36184;&#36848;&#20102;&#65292;&#22823;&#23478;&#21487;&#20197;&#30452;&#25509;&#21442;&#32771;&#31034;&#20363;&#20195;&#30721;&#12290;</p>
<p>&#26377;&#20102; <code>OrderService</code> &#21518;&#65292;&#25105;&#20204;&#23601;&#19981;&#20877;&#38656;&#35201;&#29992; <code>RestTemplate</code> &#21457;&#36215;&#35746;&#21333;&#35843;&#29992;&#20102;&#65292;&#26032;&#30340; <code>OrderRunner</code> &#21487;&#20197;&#25913;&#25104;&#20195;&#30721;&#31034;&#20363; 13-3 &#36825;&#26679;&#65292;&#30452;&#25509;&#20351;&#29992; <code>OrderService</code> &#35753;&#20195;&#30721;&#36923;&#36753;&#30475;&#36215;&#26469;&#26356;&#33258;&#28982;&#20102;&#12290;</p>
<blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-3</strong>&#12288;&#20351;&#29992;&#20102; Feign &#23458;&#25143;&#31471;&#30340; <code>OrderRunner</code></p>
</blockquote>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@Component
@Order(5)
@Setter
@Slf4j
public class OrderRunner implements ApplicationRunner {
    @Autowired
    private OrderService orderService;

    @Override
    public void run(ApplicationArguments args) throws Exception {
        List&lt;learning.spring.customer.model.Order&gt; orders = orderService.listOrders();
        log.info("&#35843;&#29992;&#21069;&#30340;&#35746;&#21333;&#25968;&#37327;: {}", orders.size());
        NewOrderForm form = NewOrderForm.builder()
            .itemIdList(Arrays.asList("1"))
            .discount(90).build();
        ResponseEntity&lt;learning.spring.customer.model.Order&gt; response =
                orderService.createNewOrder(form);
        log.info("HTTP Status: {}, Headers: {}", response.getStatusCode(), response.getHeaders());
        log.info("Body: {}", response.getBody());
    }
}</code></pre>
<p>&#160;</p>
</li>
<li><p><strong>&#35831;&#27714;&#25318;&#25130;&#22120;</strong></p>
<p>&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340; <code>OrderRunner</code> &#36824;&#19981;&#33021;&#27491;&#24120;&#24037;&#20316;&#65292;&#22240;&#20026;&#26381;&#21153;&#31471;&#38024;&#23545; <code>/order</code> &#38656;&#35201;&#36827;&#34892; JWT &#20196;&#29260;&#35748;&#35777;&#12290;&#20043;&#21069;&#25105;&#20204;&#29992; <code>RestTemplate</code> &#26102;&#20889;&#36807;&#19968;&#20010; <code>JwtClientHttpRequestInitializer</code> &#23545;&#27599;&#20010;&#35831;&#27714;&#36827;&#34892;&#23450;&#21046;&#65292;&#29616;&#22312;&#20063;&#26159;&#19968;&#26679;&#30340;&#12290;OpenFeign &#25552;&#20379;&#20102;&#19968;&#20010; <code>RequestInterceptor</code> &#25509;&#21475;&#65292;&#29992;&#26469;&#23545;&#35831;&#27714;&#36827;&#34892;&#25318;&#25130;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#19968;&#20010;&#31867;&#20284;&#30340; <code>JwtClientHttpRequestInterceptor</code>&#65292;&#20026;&#35831;&#27714;&#28155;&#21152; JWT &#20196;&#29260;&#30456;&#20851;&#30340; HTTP &#22836;&#12290;&#20855;&#20307;&#22914;&#20195;&#30721;&#31034;&#20363; 13-4 &#25152;&#31034;&#65292;&#20854;&#20027;&#35201;&#20195;&#30721;&#19982; <code>JwtClientHttpRequestInitializer</code> &#20960;&#20046;&#30456;&#21516;&#12290;</p>
<blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-4</strong>&#12288;&#22788;&#29702; JWT &#35748;&#35777;&#30456;&#20851;&#25318;&#25130;&#24037;&#20316;&#30340; <code>JwtClientHttpRequestInterceptor</code></p>
</blockquote>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@Slf4j
public class JwtClientHttpRequestInterceptor implements RequestInterceptor {
    // &#25152;&#26377;&#35201;&#27880;&#20837;&#30340;&#23646;&#24615;&#19982;JwtClientHttpRequestInitializer&#30456;&#21516;&#65292;&#27492;&#22788;&#30465;&#30053;
    @Override
    public void apply(RequestTemplate requestTemplate) {
        if (StringUtils.isBlank(token)) {
            initToken();
        }
        requestTemplate.header(HttpHeaders.AUTHORIZATION, "Bearer " + token);
    }
    // initToken()&#31561;&#26041;&#27861;&#19982;JwtClientHttpRequestInitializer&#30456;&#21516;&#65292;&#27492;&#22788;&#30465;&#30053;
}</code></pre>
<p>&#21482;&#38656;&#25226;&#36825;&#20010;&#31867;&#37197;&#32622;&#20026; Bean&#65292;Spring &#20250;&#33258;&#21160;&#23558;&#19978;&#19979;&#25991;&#20013; <code>RequestInterceptor</code> &#31867;&#22411;&#30340; Bean &#27880;&#20837; OpenFeign &#23458;&#25143;&#31471;&#37324;&#65292;&#25152;&#20197;&#37197;&#32622;&#31867;&#22823;&#27010;&#23601;&#20687;&#20195;&#30721;&#31034;&#20363; 13-5 &#36825;&#26679;&#12290;&#29616;&#22312;&#21482;&#35201;&#21551;&#21160; BinaryTea &#24037;&#31243;&#65292;&#35753;&#20854;&#27880;&#20876;&#21040;&#27880;&#20876;&#20013;&#24515;&#19978;&#65292;&#25105;&#20204;&#30340;&#25972;&#20010;&#23458;&#25143;&#31471;&#20195;&#30721;&#23601;&#33021;&#27491;&#24120;&#24037;&#20316;&#20102;&#12290;</p>
<blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-5</strong>&#12288;&#22686;&#21152;&#20102; <code>@EnableFeignClients</code> &#21644; <code>JwtClientHttpRequestInterceptor</code> &#30340;&#37197;&#32622;&#31867;</p>
</blockquote>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@SpringBootApplication
@Slf4j
@EnableFeignClients
public class CustomerApplication {
    @Bean
    public JwtClientHttpRequestInterceptor jwtClientHttpRequestInterceptor() {
        return new JwtClientHttpRequestInterceptor();
    }
    // &#30465;&#30053;&#20854;&#20182;&#20869;&#23481;
}</code></pre>
<p>&#160;</p>
</li>
<li><p><strong>&#20999;&#25442;&#19981;&#21516;&#30340; HTTP &#23458;&#25143;&#31471;</strong></p>
<p>&#19982; <code>RestTemplate</code> &#19968;&#26679;&#65292;OpenFeign &#24213;&#23618;&#20063;&#25903;&#25345;&#22810;&#31181; HTTP &#23458;&#25143;&#31471;&#65292;&#40664;&#35748;&#30340; <code>Client.Default</code> &#23458;&#25143;&#31471;&#23454;&#20363;&#20351;&#29992; Java &#33258;&#24102;&#30340; <code>HttpURLConnnection</code>&#65292;&#22914;&#26524; CLASSPATH &#20013;&#23384;&#22312;&#23545;&#24212;&#30340;&#23458;&#25143;&#31471;&#19982;&#23553;&#35013;&#31867;&#65292;&#23601;&#33021;&#26367;&#25442;&#23458;&#25143;&#31471;&#65292;&#20855;&#20307;&#22914;&#34920; 13-2 &#25152;&#31034; <span class="&#27880;&#37322;&#32534;&#21495;">7</span>&#12290;</p>
<p><strong>&#34920; 13-2&#12288;OpenFeign &#25903;&#25345;&#30340; HTTP &#23458;&#25143;&#31471;</strong></p>
<table border="1" class="table table-bordered table-striped table-condensed" width="90%"><tr><th>&#23458;&#25143;&#31471;</th><th>&#23553;&#35013;&#31867;</th><th>&#20381;&#36182;</th><th>&#37197;&#32622;&#39033;</th></tr><tr><td>Apache Http Client</td><td><code>ApacheHttpClient</code></td><td>feign-httpclient</td><td><code>feign.httpclient.enabled</code></td></tr><tr><td>Apache HttpComponents Client 5</td><td><code>ApacheHttp5Client</code></td><td>feign-hc5</td><td><code>feign.httpclient.hc5.enabled</code></td></tr><tr><td>OkHttp3</td><td><code>OkHttpClient</code></td><td>feign-okhttp</td><td><code>feign.okhttp.enabled</code></td></tr></table>
<p>Spring Cloud OpenFeign &#30340; <code>FeignAutoConfiguration</code> &#33258;&#21160;&#37197;&#32622;&#31867;&#20250;&#26681;&#25454; CLASSPATH &#21644;&#19978;&#19979;&#25991;&#30340;&#24773;&#20917;&#33258;&#21160;&#20026;&#25105;&#20204;&#37197;&#32622;&#23545;&#24212;&#30340;&#23458;&#25143;&#31471;&#12290;&#19979;&#38754;&#30340;&#37197;&#32622;&#20195;&#30721;&#20250;&#33258;&#21160;&#21019;&#24314; Apache Http Client &#30340; <code>CloseableHttpClient</code>&#65292;&#24182;&#29992;&#23427;&#26469;&#21019;&#24314; <code>feignClient</code> Bean&#65292;<code>feign.httpclient.enabled</code> &#19981;&#37197;&#32622;&#30340;&#35805;&#40664;&#35748;&#26159; <code>true</code>&#65292;&#25152;&#20197;&#20063;&#21487;&#20197;&#19981;&#20889;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#33258;&#24049;&#21160;&#25163;&#35206;&#30422;&#36825;&#20123;&#37197;&#32622;&#65292;&#27604;&#22914;&#29992; <code>HttpClientBuilder</code> &#37197;&#32622;&#19968;&#20010;&#33258;&#24049;&#30340; <code>CloseableHttpClient</code>&#12290;</p>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@Configuration(proxyBeanMethods = false)
@ConditionalOnClass(Feign.class)
@EnableConfigurationProperties({ FeignClientProperties.class, FeignHttpClientProperties.class, FeignEncoderProperties.class })
@Import(DefaultGzipDecoderConfiguration.class)
public class FeignAutoConfiguration {
    @Configuration(proxyBeanMethods = false)
    @ConditionalOnClass(ApacheHttpClient.class)
    @ConditionalOnMissingBean(CloseableHttpClient.class)
    @ConditionalOnProperty(value = "feign.httpclient.enabled", matchIfMissing = true)
    @Conditional(HttpClient5DisabledConditions.class)
    protected static class HttpClientFeignConfiguration {}
    // &#30465;&#30053;&#20854;&#20182;&#20195;&#30721;
}</code></pre>
<p>&#20174;&#19978;&#38754;&#30340;&#20195;&#30721;&#20013;&#21487;&#20197;&#30475;&#20986;&#21482;&#35201; CLASSPATH &#37324;&#23384;&#22312; <code>ApacheHttpClient</code> &#31867;&#65292;&#19978;&#19979;&#25991;&#37324;&#27809;&#26377; <code>CloseableHttpClient</code> &#31867;&#22411;&#30340; Bean&#65292;&#21448;&#19981;&#26159; HC5 &#30340;&#24773;&#20917;&#65292;Spring Cloud &#23601;&#20250;&#33258;&#21160;&#20026;&#25105;&#20204;&#37197;&#32622;&#22522;&#20110; Http Client &#30340; Feign &#23458;&#25143;&#31471;&#65292;&#25152;&#20197;&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#23601;&#26159;&#22312; pom.xml &#30340; <code>&lt;dependencies/&gt;</code> &#37324;&#21152;&#19978;&#19979;&#38754;&#36825;&#20123;&#20381;&#36182;&#12290;&#22312;&#20043;&#21069;&#29992; <code>RestTemplate</code> &#26102;&#25105;&#20204;&#29992;&#36807; Http Client&#65292;&#32780; <code>feign-httpclient</code> &#23601;&#26159;&#21253;&#21547;&#20102; <code>ApacheHttpClient</code> &#23553;&#35013;&#31867;&#30340;&#20381;&#36182;&#12290;&#36825;&#37324;&#30340;&#29256;&#26412;&#38656;&#35201;&#25105;&#20204;&#26681;&#25454; Spring Cloud OpenFeign &#20381;&#36182;&#30340; OpenFeign &#29256;&#26412;&#36827;&#34892;&#24494;&#35843;&#65292;&#20363;&#22914;&#36825;&#37324;&#29992;&#30340;&#26159; 11.8&#12290;</p>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;
    &lt;artifactId&gt;feign-httpclient&lt;/artifactId&gt;
    &lt;version&gt;11.8&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
<p>&#160;</p>
</li>
<li><p><strong>OpenFeign &#30340;&#24120;&#29992;&#37197;&#32622;</strong></p>
<p>&#22312;&#21069;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#20102; Spring Cloud OpenFeign &#20250;&#20026;&#25105;&#20204;&#33258;&#21160;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#30340; <code>RequestInterceptor</code>&#12290;&#38500;&#20102;&#36825;&#20010;&#31867;&#22411;&#30340; Bean&#65292;&#36824;&#26377;&#19968;&#20123;&#20854;&#20182;&#31867;&#22411;&#30340; Bean &#20063;&#26377;&#31867;&#20284;&#30340;&#25928;&#26524;&#65292;&#25105;&#20204;&#22312;&#19978;&#19979;&#25991;&#37324;&#37197;&#32622;&#33258;&#24049;&#30340; Bean &#23601;&#34892;&#20102;&#65292;&#20363;&#22914;&#65306;</p>
<ul>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><code>Logger.Level</code>&#65292;OpenFeign &#30340;&#26085;&#24535;&#32423;&#21035;&#65292;&#21487;&#20197;&#26159; <code>NONE</code>&#12289;<code>BASIC</code>&#12289;<code>HEADERS</code> &#21644; <code>FULL</code>&#65307;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><code>Retryer</code>&#65292;&#37325;&#35797;&#30456;&#20851;&#30340;&#37197;&#32622;&#65292;&#40664;&#35748;&#20250;&#21019;&#24314;&#19968;&#20010; <code>Retryer.NEVER_RETRY</code> &#31867;&#22411;&#30340; Bean&#65292;&#34920;&#31034;&#19981;&#20570;&#37325;&#35797;&#65307;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><code>Request.Options</code>&#65292;&#35831;&#27714;&#30456;&#20851;&#30340;&#37197;&#32622;&#65292;&#20363;&#22914;&#36830;&#25509;&#36229;&#26102;&#12289;&#35835;&#21462;&#36229;&#26102;&#31561;&#65307;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><code>Capability</code>&#65292;&#21487;&#20197;&#22312;&#26500;&#24314;&#23458;&#25143;&#31471;&#26102;&#65292;&#38024;&#23545;&#37096;&#20998;&#26680;&#24515;&#33021;&#21147;&#36827;&#34892;&#33258;&#23450;&#20041;&#65292;&#20363;&#22914;&#22312;&#24341;&#20837;&#20102; <code>feign-micrometer</code> &#21518;&#33258;&#21160;&#37197;&#32622;&#30340; <code>MicrometerCapability</code>&#12290;</li>
</ul>
<p>&#24403;&#28982;&#65292;Spring Cloud OpenFeign &#36824;&#26159;&#20026;&#25105;&#20204;&#20570;&#20102;&#22823;&#37327;&#30340;&#33258;&#21160;&#37197;&#32622;&#24037;&#20316;&#30340;&#65292;&#20363;&#22914; <code>FeignLoadBalancerAutoConfiguration</code> &#21644;&#21069;&#38754;&#25552;&#21040;&#30340; <code>FeignAutoConfiguration</code>&#12290;&#40664;&#35748;&#30340; <code>FeignContext</code> &#20013;&#21253;&#21547;&#20102;&#24456;&#22810;&#19996;&#35199;&#65292;OpenFeign &#20013;&#38656;&#35201;&#29992;&#21040; <code>Contract</code>&#12289;<code>Encoder</code>&#12289;<code>Decoder</code> &#21644; <code>Logger</code>&#65292;<code>FeignClientsConfiguration</code> &#23601;&#20998;&#21035;&#37197;&#32622;&#20102; <code>SpringMvcContract</code>&#12289;<code>SpringEncoder</code>&#12289;<code>ResponseEntityDecoder</code> &#21644; <code>Slf4jLogger</code>&#65288;<code>DefaultFeignLoggerFactory</code> &#40664;&#35748;&#21019;&#24314;&#30340;&#23601;&#26159;&#36825;&#20010; <code>Logger</code>&#65289;&#12290;&#27492;&#22806;&#65292;&#36824;&#26377; <code>Feign.Builder</code> &#21644; <code>Client</code> &#30340;&#40664;&#35748;&#20540;&#12290;</p>
<p>&#19978;&#38754;&#25552;&#21040;&#30340;&#40664;&#35748;&#37197;&#32622;&#37117;&#21152;&#20102; <code>@ConditionalOnMissingBean</code> &#27880;&#35299;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#25105;&#20204;&#22312;&#37197;&#32622;&#31867;&#37324;&#25552;&#20379;&#33258;&#24049;&#30340; Bean &#23601;&#33021;&#21462;&#20195;&#40664;&#35748;&#20540;&#12290;&#22914;&#26524;&#26159;&#29992;&#20110;&#29305;&#23450;&#30340; <code>@FeignClient</code> &#20013;&#65292;&#27880;&#35299;&#37324;&#36824;&#26377;&#19968;&#20010; <code>configuration</code> &#23646;&#24615;&#65292;&#21487;&#20197;&#25552;&#20379;&#37197;&#32622;&#31867;&#65292;&#36825;&#37324;&#20026;&#20102;&#36991;&#20813;&#37197;&#32622;&#31867;&#34987;&#33258;&#21160;&#25195;&#25551;&#65292;&#21487;&#20197;&#19981;&#29992;&#28155;&#21152; <code>@Configuration</code> &#27880;&#35299;&#12290;</p>
<p>&#38500;&#20102;&#37197;&#32622;&#31867;&#30340;&#26041;&#24335;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#36873;&#25321;&#29992;&#37197;&#32622;&#25991;&#20214;&#26469;&#35774;&#32622; OpenFeign &#30340;&#21508;&#39033;&#23646;&#24615;&#65292;&#30456;&#20851;&#23646;&#24615;&#22823;&#37096;&#20998;&#37117;&#29992; <code>feign.client.config.&lt;contextId&gt;</code> &#24320;&#22836;&#65292;&#22914;&#26524;&#26159;&#40664;&#35748;&#23646;&#24615;&#21487;&#20197;&#29992; <code>feign.client.config.default</code> &#24320;&#22836;&#12290;&#34920; 13-3 &#32599;&#21015;&#20102;&#19968;&#20123;&#24120;&#29992;&#30340;&#37197;&#32622;&#12290;</p>
<p><strong>&#34920; 13-3&#12288;Spring Cloud OpenFeign &#25552;&#20379;&#30340;&#19968;&#20123;&#24120;&#29992;&#37197;&#32622;&#39033;</strong></p>
<table border="1" class="table table-bordered table-striped table-condensed" width="90%"><tr><th>&#37197;&#32622;&#39033;</th><th>&#35828;&#26126;</th></tr><tr><td><code>feign.client.default-to-properties</code></td><td>&#22914;&#26524;&#21516;&#26102;&#23384;&#22312;&#37197;&#32622;&#31867;&#21644;&#37197;&#32622;&#25991;&#20214;&#65292;&#26159;&#21542;&#40664;&#35748;&#29992;&#37197;&#32622;&#25991;&#20214;&#30340;&#20869;&#23481;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.connect-timeout</code></td><td>&#36830;&#25509;&#36229;&#26102;&#65292;&#21333;&#20301;&#27627;&#31186;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.read-timeout</code></td><td>&#35835;&#21462;&#36229;&#26102;&#65292;&#21333;&#20301;&#27627;&#31186;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.encoder</code></td><td><code>Encoder</code> &#31867;&#21517;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.decoder</code></td><td><code>Decoder</code> &#31867;&#21517;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.logger-level</code></td><td>&#26085;&#24535;&#32423;&#21035;&#65292;&#27880;&#24847;&#26159; Feign &#30340; <code>Logger.Level</code> &#26522;&#20030;&#20540;&#65292;&#19981;&#26159;&#19968;&#33324;&#30340;&#26085;&#24535;&#32423;&#21035;</td></tr><tr><td><code>feign.client.config.&lt;contextId&gt;.follow-redirects</code></td><td>&#26159;&#21542;&#20381;&#25454;&#21709;&#24212;&#20869;&#23481;&#20570;&#37325;&#23450;&#21521;</td></tr></table>
<p>&#26356;&#22810;&#30340;&#37197;&#32622;&#39033;&#21487;&#20197;&#21442;&#32771; <code>FeignClientProperties.FeignClientConfiguration</code> &#31867;&#65292;&#22914;&#26524;&#29992;&#20102; Apache Http Client&#65292;&#36824;&#26377;&#19968;&#20123; <code>feign.httpclient</code> &#24320;&#22836;&#30340;&#37197;&#32622;&#39033;&#65292;&#21487;&#20197;&#21442;&#32771; <code>FeignHttpClientProperties</code> &#31867;&#12290;</p>
</li>
</ol><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">6</span>&#36825;&#20010;&#20363;&#23376;&#22312; ch13/customer-feign &#39033;&#30446;&#20013;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">7</span>&#34920;&#20013;&#20381;&#36182;&#39033;&#30340; GroupId &#37117;&#26159; <code>io.github.openfeign</code>&#65292;&#36825;&#37324;&#23601;&#30465;&#30053;&#20102;&#12290;&#38656;&#35201;&#24341;&#20837;&#36825;&#20123;&#20381;&#36182;&#21644;&#20855;&#20307;&#23458;&#25143;&#31471;&#30340;&#20381;&#36182;&#25165;&#33021;&#24320;&#21551;&#19981;&#21516;&#23458;&#25143;&#31471;&#30340;&#25903;&#25345;&#12290;</p><h2 id="nav_point_210">13.3&#12288;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#30340;&#25277;&#35937;&#19982;&#24212;&#29992;</h2><p>Spring Cloud &#30340;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#27491;&#26159;&#22270; 13-3 &#20998;&#24067;&#24335;&#36127;&#36733;&#22343;&#34913;&#26041;&#26696;&#30340;&#19968;&#31181;&#23454;&#29616;&#65292;&#23427;&#25552;&#20379;&#20102;&#23450;&#20041;&#22909;&#30340;&#21508;&#31181;&#25509;&#21475;&#65292;&#38024;&#23545;&#19981;&#21516;&#30340;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#65292;&#25105;&#20204;&#21482;&#38656;&#25552;&#20379;&#19981;&#21516;&#30340;&#27880;&#20876;&#19982;&#21457;&#29616;&#23454;&#29616;&#31867;&#23601;&#33021;&#33719;&#24471;&#24819;&#35201;&#30340;&#36127;&#36733;&#22343;&#34913;&#33021;&#21147;&#12290;&#22312; 13.3 &#33410;&#20013;&#65292;&#25105;&#20204;&#20250;&#30475;&#21040;&#38500;&#20102; Zookeeper&#65292;&#36824;&#21487;&#20197;&#29992; Nacos&#12289;Consul &#21644; Eureka &#26469;&#20805;&#24403;&#27880;&#20876;&#20013;&#24515;&#65292;&#22312;&#27492;&#20043;&#21069;&#20808;&#35753;&#25105;&#20204;&#26469;&#20102;&#35299;&#19979;&#36825;&#22871;&#26426;&#21046;&#26159;&#22914;&#20309;&#23454;&#29616;&#30340;&#12290;</p><h3 id="nav_point_211">13.3.1&#12288;&#26381;&#21153;&#27880;&#20876;&#30340;&#25277;&#35937;</h3><p>&#26381;&#21153;&#26159;&#38745;&#24577;&#30340;&#27010;&#24565;&#65292;&#30495;&#27491;&#25552;&#20379;&#26381;&#21153;&#30340;&#26159;&#19968;&#20010;&#20010;&#36816;&#34892;&#20013;&#30340;&#26381;&#21153;&#23454;&#20363;&#65292;<code>ServiceInstance</code> &#25509;&#21475;&#23601;&#20195;&#34920;&#20102;&#36825;&#20010;&#27010;&#24565;&#65292;&#20854;&#20013;&#21253;&#21547;&#20102;&#26381;&#21153; ID&#12289;&#23454;&#20363; ID&#12289;&#20027;&#26426;&#12289;&#31471;&#21475;&#31561;&#20449;&#24687;&#12290;<code>Registration</code> &#25509;&#21475;&#27809;&#26377;&#20219;&#20309;&#20869;&#23481;&#65292;&#23427;&#30340;&#20316;&#29992;&#26159;&#20805;&#24403;&#27880;&#20876;&#21160;&#20316;&#30340;&#26631;&#35782;&#12290;&#22312; 13.2 &#33410;&#20013;&#65292;&#25105;&#20204;&#30340;&#27880;&#20876;&#20013;&#24515;&#29992;&#30340;&#26159; Zookeeper&#65292;&#25152;&#20197; Spring Cloud Zookeepr &#25552;&#20379;&#20102;&#19968;&#20010; <code>ZookeeperRegistration</code> &#23376;&#25509;&#21475;&#65292;&#23454;&#29616;&#31867;&#26159; <code>ServiceInstanceRegistration</code>&#12290;</p><p><code>ServiceRegistry</code> &#25509;&#21475;&#30340;&#20316;&#29992;&#23601;&#26159;&#21521;&#27880;&#20876;&#20013;&#24515;&#27880;&#20876;&#21644;&#27880;&#38144; <code>Registration</code>&#65292;&#20854;&#20013;&#30340;&#26041;&#27861;&#26159; <code>register()</code>&#12289;<code>deregister()</code>&#12289;<code>setStatus()</code>&#12289;<code>getStatus()</code> &#21644; <code>close()</code>&#65292;&#20998;&#21035;&#23545;&#24212;&#20102;&#27880;&#20876;&#12289;&#27880;&#38144;&#12289;&#35774;&#32622;&#33410;&#28857;&#29366;&#24577;&#12289;&#33719;&#21462;&#33410;&#28857;&#29366;&#24577;&#21644;&#20851;&#38381;&#12290;<code>ZookeeperServiceRegistry</code> &#23601;&#26159;&#35813;&#25509;&#21475;&#23545;&#24212;&#30340;&#23454;&#29616;&#65292;&#22522;&#20110; Apache Curator &#30340; <code>ServiceDiscovery</code> &#23545; Zookeeper &#20570;&#21508;&#31181;&#23545;&#24212;&#30340;&#25805;&#20316;&#65292;&#36127;&#36131;&#22312;&#21551;&#21160;&#26102;&#25226;&#23454;&#20363;&#27880;&#20876;&#21040; Zookeeper &#19978;&#12290;</p><p>&#30693;&#36947;&#20102; <code>ServiceRegistry</code> &#36127;&#36131;&#26381;&#21153;&#23454;&#20363;&#30340;&#27880;&#20876;&#21518;&#65292;&#21448;&#26159;&#20160;&#20040;&#22320;&#26041;&#35302;&#21457;&#20102;&#27880;&#20876;&#36825;&#20010;&#21160;&#20316;&#21602;&#65311;&#25105;&#20204;&#30340;&#24212;&#29992;&#21551;&#21160;&#21518;&#23601;&#33258;&#21160;&#27880;&#20876;&#21040;&#20102;&#27880;&#20876;&#20013;&#24515;&#65292;&#24182;&#27809;&#26377;&#20154;&#20026;&#36827;&#34892;&#27880;&#20876;&#65292;<code>AutoServiceRegistration</code> &#25509;&#21475;&#23601;&#20195;&#34920;&#20102;&#33258;&#21160;&#26381;&#21153;&#27880;&#20876;&#30340;&#34892;&#20026;&#65292;&#36825;&#20010;&#25509;&#21475;&#21482;&#26159;&#19968;&#20010;&#26631;&#35782;&#65292;&#37324;&#38754;&#27809;&#26377;&#20855;&#20307;&#30340;&#26041;&#27861;&#65292;&#37325;&#35201;&#30340;&#20869;&#23481;&#37117;&#22312;&#25277;&#35937;&#31867; <code>AbstractAutoServiceRegistration</code> &#20013;&#12290;&#22312;&#25509;&#25910;&#21040; <code>WebServerInitializedEvent</code> &#20107;&#20214;&#21518;&#65292;&#20250;&#26681;&#25454;&#35774;&#32622;&#21028;&#26029;&#26159;&#21542;&#38656;&#35201;&#33258;&#21160;&#27880;&#20876;&#65292;&#22914;&#26524;&#38656;&#35201;&#21017;&#35302;&#21457;&#26381;&#21153;&#23454;&#20363;&#30340;&#27880;&#20876;&#21160;&#20316;&#65288;&#20063;&#23601;&#26159;&#35843;&#29992; <code>register()</code> &#26041;&#27861;&#65289;&#65292;<code>AbstractAutoServiceRegistration</code> &#22312;&#35843;&#29992; <code>serviceRegistry.register()</code> &#36827;&#34892;&#26381;&#21153;&#27880;&#20876;&#21069;&#21518;&#20998;&#21035;&#36824;&#20250;&#35302;&#21457; <code>InstancePreRegisteredEvent</code> &#21644; <code>InstanceRegisteredEvent</code> &#20107;&#20214;&#65292;&#26041;&#20415;&#22312;&#36825;&#20123;&#38454;&#27573;&#25193;&#23637;&#33258;&#24049;&#30340;&#21160;&#20316;&#12290;&#21482;&#35201;&#19981;&#21435;&#35774;&#32622; <code>spring.cloud.service-registry.auto-registration.enabled</code> &#20026; <code>false</code>&#65292;<code>AutoServiceRegistrationAutoConfiguration</code> &#20250;&#37197;&#32622;&#33258;&#21160;&#26381;&#21153;&#27880;&#20876;&#30456;&#20851;&#30340;&#20869;&#23481;&#12290;</p><p><code>ZookeeperAutoServiceRegistration</code> &#23601;&#26159; Spring Cloud Zookeeper &#20013;&#20855;&#20307;&#36127;&#36131;&#33258;&#21160;&#26381;&#21153;&#27880;&#20876;&#30340;&#23454;&#29616;&#31867;&#65292;&#23427;&#30340;&#27880;&#20876;&#20381;&#25454;&#26159; <code>spring.cloud.zookeeper.discovery.enabled</code> &#37197;&#32622;&#39033;&#65292;&#40664;&#35748;&#20026; <code>true</code>&#12290;&#26412;&#33410;&#20013;&#20171;&#32461;&#30340;&#37325;&#35201;&#25509;&#21475;&#21644;&#23454;&#29616;&#31867;&#30340;&#20851;&#31995;&#22914;&#22270; 13-4 &#25152;&#31034;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00791.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-4&#12288;Spring Cloud Zookeeper &#30340;&#26381;&#21153;&#27880;&#20876;&#26680;&#24515;&#25509;&#21475;&#19982;&#31867;</strong></p><h3 id="nav_point_212">13.3.2&#12288;&#26381;&#21153;&#21457;&#29616;&#30340;&#25277;&#35937;</h3><p>&#26381;&#21153;&#27880;&#20876;&#22909;&#20102;&#20043;&#21518;&#65292;&#26381;&#21153;&#30340;&#28040;&#36153;&#32773;&#23601;&#35813;&#32771;&#34385;&#22914;&#20309;&#20174;&#27880;&#20876;&#20013;&#24515;&#33719;&#21462;&#24050;&#27880;&#20876;&#30340;&#26381;&#21153;&#23454;&#20363;&#20102;&#65292;&#20063;&#23601;&#26159;&#24590;&#20040;&#21435;&#21457;&#29616;&#26381;&#21153;&#12290;Spring Cloud &#30340; <code>DiscoveryClient</code> &#25509;&#21475;&#25552;&#20379;&#20102;&#26381;&#21153;&#21457;&#29616;&#26426;&#21046;&#30340;&#25277;&#35937;&#65292;&#20855;&#20307;&#35828;&#26469;&#65292;<code>DiscoveryClient</code> &#25552;&#20379;&#20102;&#19968;&#20123;&#35835;&#25805;&#20316;&#65292;&#36890;&#36807;&#20854;&#20013;&#30340; <code>getServices()</code> &#21487;&#20197;&#33719;&#24471;&#27880;&#20876;&#20013;&#24515;&#19978;&#30340;&#25152;&#26377;&#26381;&#21153;&#28165;&#21333;&#65292;&#36890;&#36807; <code>getInstances()</code> &#21487;&#20197;&#33719;&#24471;&#25351;&#23450;&#26381;&#21153;&#30340;&#23454;&#20363;&#28165;&#21333;&#12290;&#24102;&#26377; <code>@LoadBalanced</code> &#27880;&#35299;&#30340; <code>RestTemplate</code> &#22312;&#21521;&#25351;&#23450;&#26381;&#21153;&#21457;&#36215;&#35831;&#27714;&#26102;&#65292;&#23454;&#38469;&#23601;&#26159;&#20174; <code>DiscoveryClient</code> &#20013;&#33719;&#21462;&#20855;&#20307;&#35201;&#35843;&#29992;&#30340;&#26381;&#21153;&#23454;&#20363;&#20449;&#24687;&#65292;&#25152;&#20197; <code>DiscoveryClient</code> &#23601;&#26159;&#32972;&#21518;&#30340;&#26680;&#24515;&#12290;</p><p>&#20173;&#28982;&#20197; Zookeeper &#20026;&#20363;&#65292;Spring Cloud Zookeeper &#25552;&#20379;&#20102; <code>ZookeeperDiscoveryClient</code> &#23454;&#29616;&#65292;&#20854;&#32972;&#21518;&#20381;&#38752;&#30340;&#21516;&#26679;&#26159; Apache Curator &#30340; <code>ServiceDiscovery</code>&#12290;&#33258;&#21160;&#37197;&#32622;&#31867; <code>CuratorServiceDiscoveryAutoConfiguration</code> &#25552;&#20379;&#20102; <code>ServiceDiscovery</code> Bean&#65292;<code>ZookeeperDiscoveryClientConfiguration</code> &#21017;&#25552;&#20379;&#20102; <code>ZookeeperDiscoveryClient</code> Bean&#12290;&#22312;&#33258;&#21160;&#37197;&#32622;&#30340;&#21152;&#25345;&#20043;&#19979;&#65292;&#25105;&#20204;&#23601;&#26377;&#20102;&#21487;&#29992;&#30340; <code>DiscoveryClient</code>&#12290;</p><p>Spring Cloud Common &#20013;&#40664;&#35748;&#36824;&#25552;&#20379;&#20102;&#20004;&#20010; <code>DiscoveryClient</code> &#30340;&#23454;&#29616;&#65292;&#20998;&#21035;&#26159; <code>CompositeDiscoveryClient</code> &#21644; <code>SimpleDiscoveryClient</code>&#12290;&#21069;&#32773;&#26159;&#19968;&#20010;&#32452;&#21512;&#26381;&#21153;&#21457;&#29616;&#23458;&#25143;&#31471;&#65292;&#21487;&#20197;&#23558;&#22810;&#20010; <code>DiscoveryClient</code> &#32452;&#35013;&#21040;&#19968;&#36215;&#65292;&#22312;&#26597;&#25214;&#26381;&#21153;&#21644;&#26381;&#21153;&#23454;&#20363;&#26102;&#20381;&#27425;&#36941;&#21382;&#27599;&#20010; <code>DiscoveryClient</code>&#65292;&#36820;&#22238;&#25214;&#21040;&#30340;&#31532;&#19968;&#20010;&#32467;&#26524;&#12290;&#21518;&#32773;&#21017;&#25552;&#20379;&#20102;&#19968;&#31181;&#22522;&#20110;&#37197;&#32622;&#25991;&#20214;&#30340;&#26381;&#21153;&#21457;&#29616;&#26041;&#24335;&#65292;&#36890;&#36807; <code>spring.cloud.discovery.client.simple</code> &#21069;&#32512;&#30340;&#37197;&#32622;&#25552;&#20379;&#26381;&#21153;&#19982;&#23454;&#20363;&#30340;&#26144;&#23556;&#20851;&#31995;&#65292;&#23558;&#20854;&#32465;&#23450;&#21040; <code>SimpleDiscoveryProperties</code> &#23545;&#35937;&#37324;&#65292;<code>SimpleDiscoveryClient</code> &#20877;&#20174;&#20013;&#26597;&#25214;&#26381;&#21153;&#19982;&#23454;&#20363;&#12290;&#22312;&#23454;&#36341;&#20013;&#65292;&#36890;&#24120;&#36824;&#26159;&#20250;&#20351;&#29992;&#29420;&#31435;&#30340;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#65292;&#32780;&#38750;&#37197;&#32622;&#25991;&#20214;&#12290;</p><p>&#27492;&#22806;&#65292;&#26089;&#26399;&#30340; Spring Cloud &#20013;&#38656;&#35201;&#28155;&#21152; <code>@EnableDiscoveryClient</code> &#26469;&#24320;&#21551; <code>DiscoveryClient</code> &#30340;&#25903;&#25345;&#65292;&#29616;&#22312;&#24050;&#32463;&#26080;&#39035;&#25163;&#21160;&#28155;&#21152;&#35813;&#27880;&#35299;&#20102;&#65292;&#21482;&#35201; CLASSPATH &#20013;&#23384;&#22312;&#30456;&#24212;&#30340;&#23454;&#29616;&#65292;Spring &#20250;&#36827;&#34892;&#33258;&#21160;&#37197;&#32622;&#12290;&#22914;&#26524;&#24076;&#26395;&#20851;&#38381;&#26381;&#21153;&#21457;&#29616;&#26426;&#21046;&#65292;&#21487;&#20197;&#23558; <code>spring.cloud.discovery.enabled</code> &#35774;&#32622;&#20026; <code>false</code>&#12290;</p><h3 id="nav_point_213">13.3.3&#12288;&#22312; Consul &#20013;&#27880;&#20876;&#26381;&#21153;</h3><p>&#26412;&#31456;&#26089;&#20123;&#26102;&#20505;&#65292;&#25105;&#20204;&#24050;&#32463;&#28436;&#31034;&#36807;&#22914;&#20309;&#20351;&#29992; Zookeeper &#20316;&#20026;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#36827;&#34892;&#26381;&#21153;&#23454;&#20363;&#30340;&#27880;&#20876;&#21644;&#21457;&#29616;&#65292;&#22312;&#22823;&#27010;&#20102;&#35299;&#20854;&#32972;&#21518;&#30340;&#23454;&#29616;&#26041;&#24335;&#21518;&#65292;&#20877;&#35753;&#25105;&#20204;&#19968;&#36215;&#26469;&#30475;&#30475; Spring Cloud &#25903;&#25345;&#30340;&#20854;&#20182;&#20960;&#31181;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#12290;</p><p>HashiCorp Consul &#26159;&#19968;&#27454;&#26381;&#21153;&#32593;&#26684;&#35299;&#20915;&#26041;&#26696;&#65292;&#23427;&#20860;&#20855;&#20102;&#20998;&#24067;&#24335;&#12289;&#39640;&#21487;&#29992;&#12289;&#21487;&#24863;&#30693;&#25968;&#25454;&#20013;&#24515;&#31561;&#35832;&#22810;&#29305;&#24615;&#65292;&#25552;&#20379;&#20102;&#26381;&#21153;&#21457;&#29616;&#12289;&#26381;&#21153;&#37197;&#32622;&#12289;&#26381;&#21153;&#20998;&#27573;&#65288;segmentation&#65289;&#12289;&#38190;&#20540;&#23384;&#20648;&#31561;&#21151;&#33021;&#65292;&#25105;&#20204;&#21487;&#20197;&#25353;&#38656;&#20351;&#29992;&#36825;&#20123;&#21151;&#33021;&#65292;&#26412;&#20070;&#21518;&#32493;&#31456;&#33410;&#37324;&#36824;&#20250;&#29992;&#21040; Consul &#30340;&#26381;&#21153;&#37197;&#32622;&#21151;&#33021;&#12290;</p><p>Consul &#25552;&#20379;&#20102;&#19968;&#31181;&#31616;&#21333;&#30340;&#26381;&#21153;&#23450;&#20041;&#26684;&#24335;&#65292;&#36890;&#36807; HTTP &#25509;&#21475;&#21487;&#20197;&#21160;&#24577;&#22320;&#23558;&#26381;&#21153;&#30340;&#23450;&#20041;&#25552;&#20132;&#21040; Consul &#26381;&#21153;&#31471;&#65292;&#37197;&#21512;&#20581;&#24247;&#26816;&#26597;&#26426;&#21046;&#65292;&#23601;&#33021;&#21028;&#26029;&#21738;&#20123;&#26381;&#21153;&#22788;&#20110;&#21487;&#29992;&#29366;&#24577;&#12290;&#38500;&#20102;&#20351;&#29992; API &#26041;&#24335;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#36890;&#36807; DNS &#26469;&#26597;&#35810;&#26381;&#21153;&#65292;Consul &#25552;&#20379;&#20102; DNS &#35299;&#26512;&#25903;&#25345;&#65292;&#20363;&#22914;&#65292;<code>binarytea.service.dc1.consul</code> &#20195;&#34920;&#20102; DC1 &#25968;&#25454;&#20013;&#24515;&#30340; BinaryTea &#26381;&#21153;&#12290;</p><p>&#26082;&#28982;&#25105;&#20204;&#26159;&#22312;&#20171;&#32461; Spring Cloud&#65292;&#36825;&#37324;&#33258;&#28982;&#26159;&#35201;&#20351;&#29992; Spring Cloud &#25552;&#20379;&#30340;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#12290;&#39318;&#20808;&#20687;&#19979;&#38754;&#36825;&#26679;&#22312; pom.xml &#20013;&#24341;&#20837; Consul &#26381;&#21153;&#21457;&#29616;&#30456;&#20851;&#30340;&#20381;&#36182;&#65292;&#20043;&#21069;&#29992;&#30340;&#26159; <code>spring-cloud-starter-zookeeper-discovery</code>&#65292;&#29616;&#22312;&#25442;&#25104; <code>spring-cloud-starter-consul-discovery</code>&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#36890;&#36807;&#26597;&#30475; <code>ConsulServiceRegistry</code> &#21644; <code>ConsulDiscoveryClient</code> &#30340;&#20195;&#30721;&#65292;&#25105;&#20204;&#21487;&#20197;&#20102;&#35299;&#21040; Spring Cloud &#30340; Consul &#30340;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#26159;&#36890;&#36807; <code>com.ecwid.consul.v1.ConsulClient</code> &#26469;&#23454;&#29616;&#30340;&#65292;&#36825;&#26159;&#19968;&#20010; Consul API &#30340;&#23458;&#25143;&#31471;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Spring Cloud Consul &#20250;&#19982;&#21551;&#21160;&#22312; <code>localhost:8500</code> &#19978;&#30340; Consul Agent &#36827;&#34892;&#36890;&#20449;&#65292;&#20294;&#20063;&#21487;&#20197;&#36890;&#36807;&#19979;&#38754;&#30340;&#37197;&#32622;&#36827;&#34892;&#35774;&#32622;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.cloud.consul.host=localhost
spring.cloud.consul.port=8500</code></pre><p>&#34920; 13-4 &#20013;&#32599;&#21015;&#20102;&#19968;&#20123;&#24120;&#29992;&#30340;&#37197;&#32622;&#39033;&#65292;&#40664;&#35748;&#20540;&#22522;&#26412;&#23601;&#33021;&#28385;&#36275;&#26085;&#24120;&#30340;&#20351;&#29992;&#65292;&#22823;&#23478;&#21487;&#20197;&#25353;&#38656;&#31245;&#20316;&#20462;&#25913;&#12290;</p><p><strong>&#34920; 13-4&#12288;Spring Cloud Consul &#30340;&#37096;&#20998;&#26381;&#21153;&#21457;&#29616;&#37197;&#32622;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#37197;&#32622;&#39033;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#40664;&#35748;&#20540;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Consul &#25903;&#25345;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Consul &#26381;&#21153;&#21457;&#29616;&#21151;&#33021;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.register</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#27880;&#20876;&#26381;&#21153;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.fail-fast</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>false</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#27880;&#20876;&#22833;&#36133;&#26102;&#26159;&#21542;&#25243;&#20986;&#24322;&#24120;&#65292;&#20026; <code>false</code> &#26102;&#21482;&#25171;&#21360;&#26085;&#24535;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.host</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>localhost</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Consul Agent &#30340;&#20027;&#26426;&#21517;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.port</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>8500</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Consul Agent &#30340;&#31471;&#21475;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.prefer-ip-address</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>false</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#27880;&#20876;&#26381;&#21153;&#26102;&#26159;&#20351;&#29992; IP &#36824;&#26159;&#20027;&#26426;&#21517;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.instance-id</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>${spring.application.name}:</code> &#36887;&#21495;&#20998;&#38548;&#30340; <code>Profile:${server.port}</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#35201;&#27880;&#20876;&#30340;&#26381;&#21153;&#23454;&#20363; ID</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.register-health-check</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#27880;&#20876;&#20581;&#24247;&#26816;&#26597;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.health-check-interval</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>10s</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#20581;&#24247;&#26816;&#26597;&#38388;&#38548;&#26102;&#38388;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.consul.discovery.health-check-path</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>/actuator/health</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#20581;&#24247;&#26816;&#26597;&#30340;&#36335;&#24452;</p></td>
</tr>
</tbody>
</table><p>&#22312;&#36816;&#34892;&#26032;&#30340; BinaryTea &#31243;&#24207; <span class="&#27880;&#37322;&#32534;&#21495;">8</span> &#21069;&#65292;&#25105;&#20204;&#36824;&#38656;&#35201;&#20934;&#22791;&#19968;&#20010; Consul &#30340;&#29615;&#22659;&#65292;&#22914;&#26524;&#26159;&#24320;&#21457;&#23398;&#20064;&#65292;&#21487;&#20197;&#32771;&#34385;&#30452;&#25509;&#29992; Docker<span class="&#27880;&#37322;&#32534;&#21495;">9</span> &#22312;&#26412;&#22320;&#21551;&#21160;&#19968;&#20010;&#29615;&#22659;&#65292;&#21629;&#20196;&#22823;&#27010;&#26159;&#19979;&#38754;&#36825;&#26679;&#30340;&#65292;&#36816;&#34892;&#21518;&#21487;&#20197;&#36890;&#36807;&#27983;&#35272;&#22120;&#35775;&#38382; http://localhost:8500/ &#30475;&#30475;&#26159;&#21542;&#21551;&#21160;&#25104;&#21151;&#65306;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">8</span>&#36825;&#37324;&#30340;&#26381;&#21153;&#31471;&#19982;&#23458;&#25143;&#31471;&#31034;&#20363;&#65292;&#25918;&#22312;&#20102; ch13/binarytea-consul &#21644; ch13/customer-feign-consul &#39033;&#30446;&#20013;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">9</span>&#20851;&#20110; Consul &#38236;&#20687;&#30340;&#20351;&#29992;&#65292;&#21487;&#20197;&#25628;&#32034;&#8220;Docker Consul&#8221;&#65292;&#21442;&#32771;&#23448;&#26041;&#25351;&#21335;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker pull consul
&#9656; docker run --name consul -d -p 8500:8500 -p 8600:8600/udp consul</code></pre><p>&#22312;&#24037;&#31243;&#30340; <code>applicaton.properties</code> &#20013;&#65292;&#21435;&#25481; Zookeeper &#30456;&#20851;&#37197;&#32622;&#65292;&#25442;&#25104; Consul &#30340;&#65292;&#22823;&#27010;&#30340;&#37197;&#32622;&#29255;&#27573;&#22914;&#20195;&#30721;&#31034;&#20363; 13-6 &#25152;&#31034;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-6</strong>&#12288;&#20351;&#29992; Consul &#30340;&#37197;&#32622;&#25991;&#20214;&#29255;&#27573;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=binarytea
spring.cloud.consul.host=localhost
spring.cloud.consul.port=8500
# &#30465;&#30053;&#20854;&#20182;&#37197;&#32622;</code></pre><p>&#36816;&#34892;&#21518;&#22312;&#26085;&#24535;&#20013;&#20250;&#30475;&#21040;&#31867;&#20284;&#19979;&#38754;&#36825;&#26679;&#30340;&#36755;&#20986;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>2021-06-17 00:16:46.252 INFO 71861 --- [main] o.s.c.c.s.ConsulServiceRegistry : Registering service with
consul: NewService{id='binarytea', name='binarytea', tags=[], address='192.168.3.7', meta={secure=false},
port=8080, enableTagOverride=null, check=Check{script='null', dockerContainerID='null', shell='null',
interval='10s', ttl='null', http='http://192.168.3.7:8080/actuator/health', method='null', header={},
tcp='null', timeout='null', deregisterCriticalServiceAfter='null', tlsSkipVerify=null, status='null',
grpc='null', grpcUseTLS=null}, checks=null}</code></pre><p>&#36890;&#36807;&#27983;&#35272;&#22120;&#35775;&#38382; Consul &#39029;&#38754;&#26597;&#30475;&#65292;&#20250;&#30475;&#21040;&#31867;&#20284;&#22270; 13-5 &#25152;&#31034;&#30340;&#20449;&#24687;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00792.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-5&#12288;Consul &#39029;&#38754;&#20013;&#30475;&#21040;&#30340;&#20108;&#36827;&#21046;&#22902;&#33590;&#24215;&#31243;&#24207;</strong></p><h3 id="nav_point_214">13.3.4&#12288;&#22312; Nacos &#20013;&#27880;&#20876;&#26381;&#21153;</h3><p>Nacos &#26159;&#38463;&#37324;&#24052;&#24052;&#24320;&#28304;&#30340;&#19968;&#27454;&#20013;&#38388;&#20214;&#20135;&#21697;&#65292;&#25552;&#20379;&#20102;&#23436;&#21892;&#30340;&#20113;&#21407;&#29983;&#26381;&#21153;&#21457;&#29616;&#12289;&#37197;&#32622;&#21644;&#31649;&#29702;&#33021;&#21147;&#12290;&#26381;&#21153;&#26159; Nacos &#37324;&#30340;&#37325;&#35201;&#25104;&#21592;&#65292;&#22312; Nacos &#30340;&#31649;&#29702;&#24179;&#21488;&#19978;&#65292;&#21487;&#20197;&#25484;&#25569;&#22823;&#37327;&#26381;&#21153;&#30456;&#20851;&#30340;&#20803;&#25968;&#25454;&#65292;&#27604;&#22914;&#29983;&#21629;&#21608;&#26399;&#12289;&#20381;&#36182;&#12289;&#20581;&#24247;&#29366;&#24577;&#12289;&#36335;&#30001;&#31574;&#30053;&#31561;&#12290;&#26412;&#33410;&#20250;&#37325;&#28857;&#20171;&#32461;&#22914;&#20309;&#22312; Spring Cloud &#30340;&#24110;&#21161;&#19979;&#20351;&#29992; Nacos &#26469;&#23454;&#29616;&#24494;&#26381;&#21153;&#30340;&#27880;&#20876;&#21644;&#21457;&#29616;&#21151;&#33021;&#12290;</p><p>&#31532;&#19968;&#27493;&#26159;&#24341;&#20837;&#20381;&#36182;&#65292;&#30001;&#20110; Spring Cloud Alibaba &#19981;&#22312; <code>spring-cloud-dependencies</code> &#37324;&#65292;&#25152;&#20197;&#20808;&#35201;&#22312; <code>&lt;dependencyManagement/&gt;</code> &#20013;&#24341;&#20837; <code>spring-cloud-alibaba-dependencies</code>&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
            &lt;version&gt;${spring-cloud-alibaba.version}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre><p>&#20854;&#20013;&#30340; <code>${spring-cloud-alibaba.version}</code> &#21487;&#20197;&#20174;&#23448;&#26041;&#20027;&#39029;&#25214;&#21040;&#65292;&#20363;&#22914;&#21487;&#20197;&#22312; <code>&lt;properties/&gt;</code> &#20013;&#23558;&#20854;&#35774;&#32622;&#20026; <code>2021.0.1.0</code><span class="&#27880;&#37322;&#32534;&#21495;">10</span>&#12290;&#38543;&#21518;&#65292;&#20877;&#21040; <code>&lt;dependencies/&gt;</code> &#37324;&#24341;&#20837; Nacos &#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#30456;&#20851;&#30340;&#20381;&#36182;&#65306;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">10</span>&#36825;&#37324;&#30340;&#29256;&#26412;&#19982; Spring Boot &#30340;&#29256;&#26412;&#26159;&#26377;&#23545;&#24212;&#20851;&#31995;&#30340;&#65292;2.2.<em>x</em>.RELEASE &#23545;&#24212; Spring Cloud Hoxton&#65292;&#20063;&#23601;&#26159; Spring Boot 2.2.<em>x</em>&#19982; 2.3.<em>x</em>&#65292;2.1.<em>x</em>.RELEASE &#23545;&#24212; Spring Boot 2.1.<em>x</em> &#30340;&#29256;&#26412;&#65292;2.0.<em>x</em>.RELEASE &#23545;&#24212; Spring Boot 2.0.<em>x</em> &#30340;&#29256;&#26412;&#65292;1.5.<em>x</em>.RELEASE &#23545;&#24212; Spring Boot 1.5.<em>x</em> &#30340;&#29256;&#26412;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#31532;&#20108;&#27493;&#26159;&#22312; <code>application.properties</code> &#20013;&#37197;&#32622; Nacos &#26381;&#21153;&#31471;&#30456;&#20851;&#30340;&#20449;&#24687;&#65292;&#20363;&#22914;&#22312; <code>127.0.0.1:8848</code> &#21551;&#21160;&#19968;&#20010; Nacos &#26381;&#21153;&#31471;&#65292;&#21487;&#20197;&#20687;&#20195;&#30721;&#31034;&#20363; 13-7 &#37027;&#26679;&#37197;&#32622;&#12290;&#20854;&#20013;&#65292;&#20026;&#20102;&#26041;&#20415;&#28436;&#31034;&#65292;<code>management.endpoints.web.exposure.include=*</code> &#26292;&#38706;&#20102;&#25152;&#26377;&#30340;&#31471;&#28857;&#65292;&#22240;&#20026; Nacos &#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010; <code>nacos-discovery</code> &#31471;&#28857;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#23427;&#26597;&#30475;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#25163;&#21160;&#35774;&#32622;&#38656;&#35201;&#26292;&#38706;&#30340;&#31471;&#28857;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-7</strong>&#12288;&#38024;&#23545; <code>Nacos</code> &#30340; <code>BinaryTea</code> &#37197;&#32622;&#29255;&#27573;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=binarytea
management.endpoints.web.exposure.include=*
spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848</code></pre><p>&#20462;&#25913;&#23436; BinaryTea &#39033;&#30446;&#65292;&#36824;&#38656;&#35201;&#29992;&#31867;&#20284;&#30340;&#26041;&#24335;&#20462;&#25913; Customer &#39033;&#30446;&#30340;&#20381;&#36182;&#21644;&#37197;&#32622;&#12290;&#38656;&#35201;&#27880;&#24847;&#65292;<code>spring-cloud-starter-alibaba-nacos-discover</code> &#37324;&#24182;&#19981;&#21253;&#21547; <code>spring-cloud-starter-loadbalancer</code>&#65292;&#38656;&#35201;&#25105;&#20204;&#33258;&#24049;&#28155;&#21152;&#36825;&#20010;&#20381;&#36182;&#20043;&#21518; OpenFeign &#25165;&#33021;&#29992;&#19978; Spring Cloud &#30340;&#36127;&#36733;&#22343;&#34913;&#65292;&#22914;&#20195;&#30721;&#31034;&#20363; 13-8 &#25152;&#31034;&#12290;<span class="&#27880;&#37322;&#32534;&#21495;">11</span></p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">11</span>&#26089;&#26399;&#29256;&#26412;&#30340; <code>spring-cloud-starter-alibaba-nacos-discovery</code> &#37324;&#36824;&#21253;&#21547;&#20102; <code>spring-cloud-starter-netflix-ribbon</code>&#65292;&#22914;&#26524;&#19981;&#38656;&#35201;&#30340;&#35805;&#65292;&#26368;&#22909;&#25226;&#36825;&#20010;&#20381;&#36182;&#25490;&#38500;&#65292;2021.0.1.0 &#29256;&#26412;&#37324;&#30452;&#25509;&#23601;&#27809;&#26377;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-8</strong>&#12288;Customer &#39033;&#30446;&#30340; pom.xml &#20013;&#35201;&#35843;&#25972;&#30340;&#20381;&#36182;&#20195;&#30721;&#29255;&#27573;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#32780;&#22312; <code>application.properties</code> &#37324;&#21017;&#21487;&#20197;&#20687;&#20195;&#30721;&#31034;&#20363; 13-9 &#36825;&#26679;&#20570;&#20123;&#37197;&#32622;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-9</strong>&#12288;&#26381;&#21153;&#28040;&#36153;&#32773;&#31471;&#30340; Nacos &#30456;&#20851;&#37197;&#32622;&#29255;&#27573;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=customer
management.endpoints.web.exposure.include=*
spring.cloud.nacos.discovery.server-addr=127.0.0.1:8848</code></pre><p>&#38500;&#20102; <code>spring.cloud.nacos.discovery.server-addr</code>&#65292;&#34920; 13-5 &#36824;&#32599;&#21015;&#20102;&#19968;&#20123; Nacos &#30456;&#20851;&#30340;&#37197;&#32622;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#21482;&#38656;&#35201;&#25552;&#20379; Nacos &#30340;&#26381;&#21153;&#31471;&#22320;&#22336;&#23601;&#22909;&#65292;Spring &#20250;&#33258;&#21160;&#23436;&#25104;&#20854;&#20182;&#30340;&#37197;&#32622;&#24037;&#20316;&#65292;&#33021;&#22815;&#28385;&#36275;&#22823;&#37096;&#20998;&#30340;&#22330;&#26223;&#38656;&#35201;&#12290;</p><p><strong>&#34920; 13-5&#12288;Nacos &#26381;&#21153;&#21457;&#29616;&#30456;&#20851;&#30340;&#37096;&#20998;&#37197;&#32622;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#37197;&#32622;&#39033;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#40664;&#35748;&#20540;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; Nacos &#26381;&#21153;&#21457;&#29616;&#30456;&#20851;&#25903;&#25345;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.server-addr</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Nacos &#26381;&#21153;&#31471;&#22320;&#22336;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.service</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>${spring.application.name}</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26381;&#21153;&#21517;&#65292;&#40664;&#35748;&#20351;&#29992; Spring &#24212;&#29992;&#21517;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.namespace</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#29992;&#26469;&#21306;&#20998;&#19981;&#21516;&#29615;&#22659;&#30340;&#21629;&#21517;&#31354;&#38388;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.weight</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>1</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24403;&#21069;&#23454;&#20363;&#30340;&#26435;&#37325;&#65292;&#21462;&#20540;&#33539;&#22260; 1 &#21040; 100&#65292;&#20540;&#36234;&#22823;&#26435;&#37325;&#36234;&#39640;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.ip</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#35201;&#27880;&#20876;&#21040; Nacos &#19978;&#30340; IP</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.port</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>-1</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#35201;&#27880;&#20876;&#21040; Nacos &#19978;&#30340;&#31471;&#21475;&#65292;&#40664;&#35748;&#26159;&#33258;&#21160;&#21457;&#29616;&#30340;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.access-key</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#38463;&#37324;&#20113;&#36134;&#25143;&#30340; AccessKey&#65292;&#19981;&#29992;&#38463;&#37324;&#20113;&#19981;&#29992;&#35774;&#32622;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>spring.cloud.nacos.discovery.secret-key</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#38463;&#37324;&#20113;&#36134;&#25143;&#30340; Secretkey&#65292;&#19981;&#29992;&#38463;&#37324;&#20113;&#19981;&#29992;&#35774;&#32622;</p></td>
</tr>
</tbody>
</table><p>&#36825;&#27425;&#65292;&#25105;&#20204;&#21516;&#26679;&#20351;&#29992; Docker &#26469;&#21551;&#21160;&#19968;&#20010;&#31616;&#21333;&#30340;&#21333;&#26426; Nacos<span class="&#27880;&#37322;&#32534;&#21495;">12</span>&#65292;&#30417;&#21548;&#26412;&#22320;&#30340; <code>8848</code> &#31471;&#21475;&#12290;&#36825;&#20010;&#27169;&#24335;&#19979;&#40664;&#35748;&#20351;&#29992; Derby &#20316;&#20026;&#25968;&#25454;&#23384;&#20648;&#65292;&#21482;&#33021;&#29992;&#26469;&#27979;&#35797;&#65292;&#19981;&#33021;&#29992;&#22312;&#29983;&#20135;&#29615;&#22659;&#20013;&#12290;&#33267;&#20110;&#29983;&#20135;&#29615;&#22659;&#30340;&#29256;&#26412;&#65292;&#22823;&#23478;&#21487;&#20197;&#21442;&#32771;&#23448;&#26041;&#25991;&#26723;&#36827;&#34892;&#37096;&#32626;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">12</span>&#20851;&#20110;&#36825;&#20010;&#38236;&#20687;&#30340;&#26356;&#22810;&#29992;&#27861;&#65292;&#21487;&#20197;&#21442;&#32771; Docker Hub &#19978;&#35813;&#38236;&#20687;&#30340;&#25991;&#26723;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker pull nacos/nacos-server
&#9656; docker run --name nacos -e MODE=standalone -p 8848:8848 -d nacos/nacos-server</code></pre><p>&#25104;&#21151;&#21551;&#21160; Nacos &#26381;&#21153;&#31471;&#21644;&#20004;&#20010;&#24212;&#29992;&#31243;&#24207;&#21518;&#65292;&#21487;&#20197;&#36890;&#36807;&#27983;&#35272;&#22120;&#35775;&#38382; http://localhost:8848/nacos&#65292;&#22312;&#30331;&#24405;&#30028;&#38754;&#20013;&#20351;&#29992; <code>nacos</code> &#20316;&#20026;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#12290;&#38543;&#21518;&#23601;&#33021;&#30475;&#21040;&#31867;&#20284;&#22270; 13-6 &#30340;&#26381;&#21153;&#21015;&#34920;&#65292;&#20854;&#20013;&#21253;&#21547;&#20102;&#26381;&#21153;&#25552;&#20379;&#32773; binarytea&#65292;Customer &#36816;&#34892;&#36807;&#31243;&#20013;&#28857;&#20987;&#35746;&#38405;&#32773;&#20063;&#33021;&#30475;&#21040;&#26381;&#21153;&#30340;&#35746;&#38405;&#32773;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00793.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-6&#12288;Nacos &#20013;&#30340;&#26381;&#21153;&#21015;&#34920;</strong></p><blockquote>
<p><strong>&#33590;&#27463;&#26102;&#38388;&#65306;Spring Cloud Alibaba &#27010;&#36848;</strong></p>
<p>&#20247;&#25152;&#21608;&#30693;&#65292;&#38463;&#37324;&#24052;&#24052;&#38598;&#22242;&#26071;&#19979;&#30340;&#21508;&#23478;&#20844;&#21496;&#37117;&#22312;&#22823;&#37327;&#20351;&#29992; Java&#65292;&#21152;&#20043;&#38463;&#37324;&#22810;&#24180;&#30340;&#23454;&#36341;&#65292;&#27785;&#28096;&#20986;&#20102;&#24456;&#22810;&#20248;&#31168;&#30340;&#20013;&#38388;&#20214;&#35774;&#26045;&#12290;&#38463;&#37324;&#23558;&#23427;&#20204;&#24320;&#28304;&#65292;&#21516;&#26102;&#36824;&#22312;&#38463;&#37324;&#20113;&#19978;&#25552;&#20379;&#20102;&#23545;&#24212;&#30340;&#26381;&#21153;&#12290;Spring Cloud &#20316;&#20026;&#30446;&#21069;&#20027;&#27969;&#30340; Java &#24494;&#26381;&#21153;&#26694;&#26550;&#65292;&#38463;&#37324;&#33258;&#28982;&#24076;&#26395;&#36825;&#20123;&#35774;&#26045;&#33021;&#22815;&#26041;&#20415;&#22320;&#34987; Spring Cloud &#30340;&#29992;&#25143;&#25509;&#21463;&#24182;&#20351;&#29992;&#21040;&#33258;&#24049;&#30340;&#31995;&#32479;&#20013;&#12290;&#20110;&#26159;&#23601;&#26377;&#20102; Spring Cloud Alibaba&#65292;&#26368;&#21021;&#23427;&#26159;&#30001;&#38463;&#37324;&#24052;&#24052;&#24320;&#21457;&#24182;&#21457;&#24067;&#22312;&#38463;&#37324;&#24052;&#24052;&#30340;&#39033;&#30446;&#19979;&#65292;&#21518;&#26469;&#24182;&#20837;&#20102; Spring Cloud &#39033;&#30446;&#12290;</p>
<p>&#22312; Spring Cloud Alibaba &#30340;&#24110;&#21161;&#19979;&#65292;&#21482;&#38656;&#31616;&#21333;&#30340;&#19968;&#20123;&#27880;&#35299;&#21644;&#23569;&#25968;&#37197;&#32622;&#65292;&#23601;&#33021;&#35753;&#22522;&#20110; Spring Cloud &#30340;&#31995;&#32479;&#29992;&#19978;&#38463;&#37324;&#24052;&#24052;&#20998;&#24067;&#24335;&#35299;&#20915;&#26041;&#26696;&#20013;&#30340;&#24456;&#22810;&#20013;&#38388;&#20214;&#12290;&#20027;&#35201;&#21253;&#25324;&#22914;&#19979;&#20869;&#23481;&#65292;&#26412;&#20070;&#20013;&#20250;&#28041;&#21450;&#20854;&#20013;&#30340; Nacos&#12289;Sentinel &#21644; Dubbo&#12290;</p>
<ul>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><strong>Nacos</strong>&#65292;&#25552;&#20379;&#26381;&#21153;&#23454;&#20363;&#30340;&#27880;&#20876;&#19982;&#21457;&#29616;&#33021;&#21147;&#65292;&#20063;&#21487;&#20316;&#20026;&#26381;&#21153;&#37197;&#32622;&#30340;&#21518;&#31471;&#25968;&#25454;&#23384;&#20648;&#12290;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><strong>Sentinel</strong>&#65292;&#25552;&#20379;&#27969;&#37327;&#25511;&#21046;&#12289;&#26381;&#21153;&#38477;&#32423;&#31561;&#20445;&#25252;&#33021;&#21147;&#12290;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><strong>RocketMQ</strong>&#65292;&#19968;&#27454;&#39640;&#24615;&#33021;&#12289;&#21487;&#20280;&#32553;&#30340;&#37329;&#34701;&#32423;&#28040;&#24687;&#20013;&#38388;&#20214;&#65292;&#36890;&#36807; Spring Cloud Alibaba &#21487;&#20197;&#23454;&#29616;&#22522;&#20110; RocketMQ &#30340;&#20107;&#20214;&#39537;&#21160;&#19982;&#28040;&#24687;&#24635;&#32447;&#12290;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><strong>Seata</strong>&#65292;&#25552;&#20379;&#20998;&#24067;&#24335;&#20107;&#21153;&#35299;&#20915;&#26041;&#26696;&#12290;</li>
<li class="&#31532;2&#32423;&#26080;&#24207;&#21015;&#34920;"><strong>Dubbo</strong>&#65292;&#19968;&#27454;&#34987;&#24191;&#27867;&#20351;&#29992;&#30340; RPC &#26694;&#26550;&#12290;</li>
</ul>
</blockquote><h3 id="nav_point_215">13.3.5&#12288;&#22312; Eureka &#20013;&#27880;&#20876;&#26381;&#21153;</h3><p>&#22312; Spring Cloud &#21018;&#38382;&#19990;&#26102;&#65292;Spring Cloud &#30340;&#19968;&#22823;&#29305;&#33394;&#23601;&#26159;&#21644; Netflix &#30340;&#24320;&#28304;&#35774;&#26045;&#20570;&#20102;&#22823;&#37327;&#25972;&#21512;&#12290;Netflix &#30340;&#24320;&#28304;&#36719;&#20214;&#22871;&#20214;&#65288;Netflix OSS&#65289;&#24403;&#26102;&#20063;&#38750;&#24120;&#20986;&#21517;&#65292;&#20854;&#20013;&#19982;&#24494;&#26381;&#21153;&#30456;&#20851;&#30340;&#37096;&#20998;&#32452;&#20214;&#22914;&#34920; 13-6 &#25152;&#31034;&#12290;&#19968;&#26102;&#38388;&#65292;&#22823;&#23478;&#37117;&#22312;&#23398;&#20064;&#22914;&#20309;&#22312; Spring Cloud &#39033;&#30446;&#37324;&#29992; Eureka &#26469;&#20570;&#26381;&#21153;&#21457;&#29616;&#19982;&#27880;&#20876;&#65292;&#36825;&#20960;&#20046;&#23601;&#26159; Spring Cloud &#30340; Hello World &#39033;&#30446;&#12290;&#19981;&#36807;&#38543;&#30528;&#26102;&#38388;&#30340;&#25512;&#31227;&#65292;Netflix OSS &#20013;&#30340;&#37096;&#20998;&#32452;&#20214;&#19981;&#20877;&#24320;&#28304;&#65292;&#20363;&#22914; Eureka &#21644; Zuul&#65292;&#21152;&#20043;&#31038;&#21306;&#20013;&#26377;&#20102;&#26356;&#22810;&#21487;&#20379;&#36873;&#25321;&#30340;&#21516;&#31867;&#20135;&#21697;&#65292;Spring Cloud &#20063;&#23545;&#23427;&#20204;&#20570;&#20102;&#24456;&#22909;&#30340;&#25903;&#25345;&#65292;&#25152;&#20197; Eureka &#24050;&#32463;&#19981;&#20877;&#26159;&#25105;&#20204;&#30340;&#39318;&#36873;&#20102;&#12290;</p><p><strong>&#34920; 13-6&#12288;Netflix OSS &#20013;&#30340;&#19982;&#24494;&#26381;&#21153;&#30456;&#20851;&#30340;&#37096;&#20998;&#32452;&#20214;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#32452;&#20214;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Eureka</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26381;&#21153;&#21457;&#29616;&#19982;&#27880;&#20876;&#20013;&#24515;&#65292;&#38024;&#23545; Amazon Web Services&#65288;AWS&#65289;&#20570;&#20102;&#38024;&#23545;&#24615;&#35774;&#35745;&#65292;&#20063;&#21487;&#29992;&#20110;&#38750; AWS &#30340;&#22330;&#26223;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Archaius</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#20998;&#24067;&#24335;&#37197;&#32622;&#20013;&#24515;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Ribbon</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#23458;&#25143;&#31471;&#36827;&#31243;&#38388;&#36890;&#35759;&#65288;IPC&#65289;&#32452;&#20214;&#65292;&#25552;&#20379;&#36127;&#36733;&#22343;&#34913;&#12289;&#23481;&#38169;&#12289;&#22810;&#21327;&#35758;&#25903;&#25345;&#31561;&#21151;&#33021;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Hystrix</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#21487;&#38752;&#24615;&#32452;&#20214;&#65292;&#22312;&#26381;&#21153;&#35843;&#29992;&#36807;&#31243;&#20013;&#25552;&#20379;&#26381;&#21153;&#38477;&#32423;&#12289;&#23481;&#38169;&#31561;&#21151;&#33021;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Zuul</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24494;&#26381;&#21153;&#32593;&#20851;</p></td>
</tr>
</tbody>
</table><p>&#22312; Spring Cloud &#37324;&#65292;&#25152;&#26377;&#23545; Netflix OSS &#30340;&#25903;&#25345;&#37117;&#38598;&#20013;&#22312; Spring Cloud Netflix &#39033;&#30446;&#37324;&#65292;&#36825;&#19968;&#33410;&#37324;&#25105;&#20204;&#20250;&#37325;&#28857;&#20851;&#27880;&#23545; Eureka &#30340;&#25903;&#25345;&#12290;&#25509;&#19979;&#26469;&#20808;&#23558; BinaryTea &#30340;&#27880;&#20876;&#20013;&#24515;&#26367;&#25442;&#20026; Eureka<span class="&#27880;&#37322;&#32534;&#21495;">13</span>&#65292;&#21482;&#38656;&#22312; pom.xml &#37324;&#24341;&#20837; Eureka &#23458;&#25143;&#31471;&#20381;&#36182;&#21363;&#21487;&#12290;&#26089;&#26399;&#36824;&#38656;&#35201;&#22312;&#37197;&#32622;&#31867;&#19978;&#22686;&#21152; <code>@EnableEurekaClient</code> &#27880;&#35299;&#65292;&#29616;&#22312;&#36825;&#27493;&#19981;&#26159;&#24517;&#38656;&#30340;&#20102;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">13</span>&#36825;&#20010;&#31034;&#20363;&#22312; ch13/binarytea-eureka &#39033;&#30446;&#20013;&#65292;&#23545;&#24212;&#30340;&#23458;&#25143;&#31471;&#26159; ch13/customer-feign-eureka&#65292;&#29420;&#31435;&#30340; Eureka &#26381;&#21153;&#31471;&#24037;&#31243;&#26159; ch13/eureka-server&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#38543;&#21518;&#65292;&#22312; <code>application.properties</code> &#20013;&#37197;&#32622;&#19982; Eureka &#30456;&#20851;&#30340;&#20449;&#24687;&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#12290;&#20854;&#20013;&#30340; <code>defaultZone</code><span class="&#27880;&#37322;&#32534;&#21495;">14</span> &#26159;&#25152;&#26377; Eureka &#23458;&#25143;&#31471;&#37117;&#33021;&#33719;&#21462;&#30340;&#40664;&#35748;&#26381;&#21153;&#31471; URL&#65292;&#20063;&#21487;&#20197;&#38024;&#23545;&#24615;&#22320;&#20351;&#29992;&#20854;&#20182;&#21487;&#29992;&#21306;&#21517;&#26469;&#37197;&#32622;&#29305;&#23450;&#30340;&#26381;&#21153;&#31471; URL&#12290;<code>eureka.client.service-url</code> &#23454;&#38469;&#26159;&#20010; <code>Map&lt;String, String&gt;</code> &#31867;&#22411;&#65292;&#36825;&#37324;&#30340; <code>defaultZone</code> &#26159;&#20316;&#20026;&#38190;&#23384;&#22312;&#30340;&#65292;&#21487;&#20197;&#35270;&#20026;&#19968;&#20010;&#29305;&#27530;&#30340;&#23383;&#31526;&#20018;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">14</span>&#22312; Amazon Web Services &#19978;&#26159;&#21306;&#20998;&#19981;&#21516;&#30340;&#21306;&#22495;&#65288;Region&#65289;&#21644;&#21487;&#29992;&#21306;&#65288;Availability Zone&#65289;&#30340;&#12290;&#19968;&#20010;&#21306;&#22495;&#20250;&#21253;&#21547;&#22810;&#20010;&#21487;&#29992;&#21306;&#65292;&#26381;&#21153;&#37117;&#37096;&#32626;&#22312;&#21487;&#29992;&#21306;&#20013;&#12290;&#25152;&#20197;&#36825;&#37324; <code>defaultZone</code> &#25351;&#30340;&#26159;&#40664;&#35748;&#35201;&#20351;&#29992;&#30340;&#21487;&#29992;&#21306;&#65292;&#35831;&#27880;&#24847;&#65292;&#36825;&#37324;&#30340; <code>defaultZone</code> &#19981;&#33021;&#20889;&#25104; <code>default-zone</code>&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=binarytea
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.instance.prefer-ip-address=true</code></pre><p>&#38500;&#20102;&#19978;&#38754;&#25552;&#21040;&#30340;&#37197;&#32622;&#65292;&#20854;&#20182;&#20027;&#35201;&#37197;&#32622;&#37117;&#22312; <code>eureka.instance.*</code> &#21644; <code>eureka.client.*</code> &#36825;&#20004;&#20010;&#21069;&#32512;&#19979;&#65292;&#21069;&#32773;&#23545;&#24212;&#20102; <code>EurekaInstanceConfigBean</code>&#65292;&#21518;&#32773;&#23545;&#24212;&#30340;&#26159; <code>EurekaClientConfigBean</code>&#65292;&#34920; 13-7 &#20013;&#20363;&#20030;&#20102;&#19968;&#37096;&#20998;&#12290;</p><p><strong>&#34920; 13-7&#12288;Spring Cloud &#20013;&#24120;&#29992;&#30340;&#19968;&#20123; Eureka &#37197;&#32622;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#37197;&#32622;&#39033;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#40664;&#35748;&#20540;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.instance.hostname</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#23454;&#20363;&#30340;&#20027;&#26426;&#21517;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.instance.prefer-ip-address</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>false</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#27880;&#20876;&#26102;&#26159;&#21542;&#20248;&#20808;&#20351;&#29992; IP &#22320;&#22336;&#65292;&#32780;&#38750;&#20027;&#26426;&#21517;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.instance.status-page-url-path</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>/actuator/info</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24403;&#21069;&#23454;&#20363;&#30340;&#24212;&#29992;&#20449;&#24687;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.instance.health-check-url-path</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>/actuator/health</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24403;&#21069;&#23454;&#20363;&#30340;&#20581;&#24247;&#26816;&#26597; URL &#36335;&#24452;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.instance.secure-port-enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>false</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#24320;&#21551; HTTPS &#31471;&#21475;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24320;&#21551; Eureka &#26381;&#21153;&#21457;&#29616;&#23458;&#25143;&#31471;&#25903;&#25345;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.healthcheck.enabled</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#25191;&#34892;&#20581;&#24247;&#26816;&#26597;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.register-with-eureka</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24403;&#21069;&#23454;&#20363;&#26159;&#21542;&#35201;&#27880;&#20876;&#21040; Eureka &#19978;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.fetch-registry</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#25289;&#21462; Eureka &#19978;&#30340;&#27880;&#20876;&#20449;&#24687;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.prefer-same-zone-eureka</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>true</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26159;&#21542;&#20248;&#20808;&#20351;&#29992;&#21516;&#19968;&#20010;&#21306;&#22495;&#30340;&#23454;&#20363;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.eureka-server-connect-timeout-seconds</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>5</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26381;&#21153;&#31471;&#36830;&#25509;&#36229;&#26102;&#31186;&#25968;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>eureka.client.eureka-server-read-timeout-seconds</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>8</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26381;&#21153;&#31471;&#35835;&#21462;&#36229;&#26102;&#31186;&#25968;</p></td>
</tr>
</tbody>
</table><p>&#22914;&#26524;&#20351;&#29992; HTTPS &#36830;&#25509; Eureka&#65292;&#30456;&#20851;&#30340;&#37197;&#32622;&#20197; <code>eureka.client.tls.*</code> &#25171;&#22836;&#65292;&#26377;&#38656;&#35201;&#30340;&#21487;&#20197;&#26597;&#30475;&#23448;&#26041;&#25991;&#26723;&#30340;&#30456;&#24212;&#20869;&#23481;&#12290;</p><p>&#22312;&#36816;&#34892;&#31243;&#24207;&#21069;&#65292;&#38656;&#35201;&#22312;&#26412;&#22320;&#21551;&#21160;&#19968;&#20010; Eureka &#26381;&#21153;&#31471;&#65292;&#21487;&#20197;&#29992; Docker Hub &#19978;&#30340; Docker &#38236;&#20687;&#65292;&#20063;&#21487;&#20197;&#33258;&#24049;&#29992;&#23448;&#26041; Eureka &#26469;&#25645;&#24314;&#12290;Spring Cloud Eureka &#33258;&#24102;&#20102;&#19968;&#22871;&#31616;&#21333;&#30340;&#26381;&#21153;&#31471;&#65292;&#20960;&#34892;&#20195;&#30721;&#23601;&#33021;&#25630;&#23450;&#19968;&#20010; Eureka &#26381;&#21153;&#12290;&#25105;&#20204;&#21487;&#20197;&#21040; Spring Initialzr &#19978;&#26032;&#24314;&#19968;&#20010;&#39033;&#30446;&#65292;&#36755;&#20837;&#39033;&#30446;&#22522;&#26412;&#20449;&#24687;&#65292;&#20363;&#22914;&#39033;&#30446;&#21517;&#23601;&#21483; <code>eureka-server</code>&#65292;&#22312;&#20381;&#36182;&#20013;&#36873;&#25321; Eureka Server&#65292;&#38543;&#21518;&#29983;&#25104;&#39033;&#30446;&#12290;&#22914;&#26524;&#25171;&#24320; pom.xml&#65292;&#21487;&#20197;&#30475;&#21040;&#23427;&#23601;&#26159;&#22312;&#20854;&#20013;&#28155;&#21152;&#20102;&#22914;&#19979;&#20381;&#36182;&#12290;&#30001;&#20110;&#25105;&#20204;&#20351;&#29992;&#30340; Java 11 &#24050;&#32463;&#21435;&#25481;&#20102; JAXB &#27169;&#22359;&#65292;&#22240;&#32780;&#36825;&#20010;&#20381;&#36182;&#37324;&#36824;&#24102;&#19978;&#20102; <code>jaxb-runtime</code> &#20381;&#36182;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>&#22312;&#21551;&#21160;&#31867; <code>EurekaServerApplication</code> &#19978;&#65292;&#28155;&#21152; <code>@EnableEurekaServer</code> &#27880;&#35299;&#23601;&#33021;&#24320;&#21551;&#19968;&#20010;&#31616;&#26131;&#30340;&#21333;&#26426;&#29256; Eureka&#65292;&#23601;&#20687;&#20195;&#30721;&#31034;&#20363; 13-9 &#19968;&#26679;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-9</strong>&#12288;&#29992;&#26469;&#21551;&#21160; Eureka &#26381;&#21153;&#31471;&#30340; <code>EurekaServerApplication</code></p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>@SpringBootApplication
@EnableEurekaServer
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }
}</code></pre><p>&#25509;&#19979;&#26469;&#65292;&#36824;&#35201;&#20687;&#20195;&#30721;&#31034;&#20363; 13-10 &#36825;&#26679;&#22312; <code>application.properties</code> &#20013;&#20570;&#20123;&#37197;&#32622;&#12290;&#35753;&#26381;&#21153;&#31471;&#30417;&#21548; <code>8761</code> &#31471;&#21475;&#65292;&#36825;&#20010;&#31471;&#21475;&#19982;&#21069;&#25991;&#20013; BinaryTea &#24037;&#31243;&#37324;&#37197;&#32622;&#30340;&#19968;&#26679;&#65292;&#30001;&#20110;&#26412;&#36523;&#23601;&#26159; Eureka &#26381;&#21153;&#31471;&#65292;&#25152;&#20197;&#19981;&#38656;&#35201;&#20877;&#36827;&#34892;&#27880;&#20876;&#25110;&#32773;&#25289;&#21462;&#26381;&#21153;&#20102;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; 13-10</strong>&#12288;Eureka &#26381;&#21153;&#31471;&#30340;&#31616;&#21333;&#37197;&#32622;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>spring.application.name=eureka-server
server.port=8761

eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false</code></pre><p>&#21551;&#21160; Eureka &#26381;&#21153;&#31471;&#21518;&#65292;&#36816;&#34892; BinaryTea&#65292;&#35775;&#38382; http://localhost:8761&#65292;&#23601;&#33021;&#30475;&#21040;&#31867;&#20284;&#22270; 13-7 &#36825;&#26679;&#30340;&#30028;&#38754;&#12290;</p><p class="&#22270;"><img alt="{%}" src="file:///[PrimaryStorage]local_pic/XueTouSpring_CongRuMenDaoXiangMuShiZhan/image00794.jpeg"/></p><p class="p-img-title"><strong>&#22270; 13-7&#12288;&#27880;&#20876;&#20102;&#19968;&#20010;&#26381;&#21153;&#30340; Eureka &#30028;&#38754;</strong></p><h2 id="nav_point_216">13.4&#12288;&#23567;&#32467;</h2><p>&#26412;&#31456;&#25105;&#20204;&#20102;&#35299;&#20102;&#36127;&#36733;&#22343;&#34913;&#30340;&#22522;&#30784;&#30693;&#35782;&#65292;&#20855;&#20307;&#23398;&#20064;&#20102;&#22914;&#20309;&#20351;&#29992; Spring Cloud &#26469;&#23454;&#29616;&#20998;&#24067;&#24335;&#30340;&#24494;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#65292;Spring Cloud &#21487;&#20197;&#20351;&#29992; Eureka&#12289;Consul&#12289;Zookeeper &#21644; Nacos &#26469;&#20805;&#24403;&#26381;&#21153;&#30340;&#27880;&#20876;&#20013;&#24515;&#65292;Eureka &#26356;&#36866;&#21512; AWS &#29615;&#22659;&#65292;&#32780; Zookeeper &#21017;&#22825;&#29983;&#19981;&#36866;&#21512;&#20316;&#20026;&#22797;&#26434;&#22823;&#22411;&#31995;&#32479;&#30340;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#65292;&#25105;&#20204;&#21487;&#20197;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;&#36827;&#34892;&#36873;&#22411;&#12290;&#22312;&#27492;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;&#36824;&#23545; Spring Cloud &#30340;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#26426;&#21046;&#32972;&#21518;&#30340;&#21407;&#29702;&#20570;&#20102;&#31616;&#21333;&#35828;&#26126;&#12290;</p><p>&#19979;&#19968;&#31456;&#65292;&#25105;&#20204;&#20250;&#32842;&#21040;&#24494;&#26381;&#21153;&#20013;&#30340;&#21478;&#19968;&#20010;&#37325;&#35201;&#35805;&#39064;&#8212;&#8212;&#24494;&#26381;&#21153;&#30340;&#37197;&#32622;&#65292;&#30475;&#19968;&#30475;&#22914;&#20309;&#20351;&#29992; Spring Cloud &#26469;&#31649;&#29702;&#26381;&#21153;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;</p><blockquote>
<p style="text-align: center"><strong>&#20108;&#36827;&#21046;&#22902;&#33590;&#24215;&#39033;&#30446;&#24320;&#21457;&#23567;&#32467;</strong></p>
<p>&#26412;&#31456;&#20013;&#65292;&#25105;&#20204;&#24182;&#27809;&#26377;&#20026;&#20108;&#36827;&#21046;&#22902;&#33590;&#30340;&#31243;&#24207;&#22686;&#21152;&#20160;&#20040;&#21151;&#33021;&#24615;&#30340;&#38656;&#27714;&#65292;&#32780;&#26159;&#20026;&#20102;&#28385;&#36275;&#26085;&#21518;&#26381;&#21153;&#30340;&#25193;&#23637;&#65292;&#20026;&#23427;&#22686;&#21152;&#20102;&#38598;&#32676;&#21270;&#30340;&#33021;&#21147;&#65292;&#37325;&#28857;&#26159;&#26381;&#21153;&#27880;&#20876;&#19982;&#21457;&#29616;&#30340;&#33021;&#21147;&#12290;&#22312; Spring Cloud &#30340;&#24110;&#21161;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#19981;&#25913;&#21464;&#20195;&#30721;&#30340;&#24773;&#20917;&#19979;&#65292;&#33258;&#30001;&#22320;&#20999;&#25442;&#22810;&#31181;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#12290;&#22312;&#23458;&#25143;&#31471;&#20391;&#65292;&#38500;&#20102;&#20043;&#21069;&#20351;&#29992;&#30340; <code>RestTemplate</code>&#65292;&#25105;&#20204;&#36824;&#24341;&#20837;&#20102;&#26356;&#26131;&#29992;&#30340; OpenFeign&#65292;&#20197;&#25509;&#21475;&#22865;&#32422;&#30340;&#24418;&#24335;&#26469;&#22768;&#26126;&#26381;&#21153;&#65292;&#20197;&#31867;&#20284;&#26412;&#22320;&#26041;&#27861;&#35843;&#29992;&#30340;&#26041;&#24335;&#35843;&#29992;&#26381;&#21153;&#31471;&#30340;&#21508;&#31181;&#25509;&#21475;&#12290;</p>
</blockquote><br style="page-break-after:always"/><div style="page-break-after:always"></div>
<h1 id="nav_point_262">&#38468;&#24405; B&#12288;&#23558;&#24212;&#29992;&#31243;&#24207;&#25171;&#21253;&#20026; Docker &#38236;&#20687;</h1><p>&#22312; 5.3 &#33410;&#20013;&#65292;&#25105;&#20204;&#35814;&#32454;&#20171;&#32461;&#20102; Spring Boot &#24212;&#29992;&#30340;&#25171;&#21253;&#36807;&#31243;&#65292;&#25171;&#21253;&#30340; Fat Jar &#21487;&#20197;&#30452;&#25509;&#29992; <code>java -jar</code> &#21629;&#20196;&#36816;&#34892;&#12290;&#20294;&#22312;&#23454;&#38469;&#29983;&#20135;&#36807;&#31243;&#20013;&#65292;Fat Jar &#26410;&#24517;&#26159;&#26368;&#32456;&#20132;&#20184;&#29289;&#65292;&#22312;&#24191;&#27867;&#20351;&#29992; Kubernetes &#30340;&#20170;&#22825;&#65292;&#20132;&#20184;&#19968;&#20010; Docker &#38236;&#20687;&#20063;&#35768;&#20250;&#26356;&#21512;&#36866;&#19968;&#20123;&#12290;&#25509;&#19979;&#26469;&#65292;&#23601;&#35753;&#25105;&#20204;&#26469;&#20102;&#35299;&#19979;&#22914;&#20309;&#23558; Spring Boot &#24212;&#29992;&#25171;&#21253;&#25104; Docker &#38236;&#20687;&#12290;</p><p>&#20256;&#32479;&#30340;&#25171;&#21253;&#36816;&#34892;&#23601;&#19977;&#27493;&#65306;</p><ul>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#32534;&#20889; Dockerfile</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#20351;&#29992;&#25171;&#21253;&#21629;&#20196;&#26500;&#24314;&#38236;&#20687;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">&#36816;&#34892;&#38236;&#20687;</li>
</ul><h2 id="nav_point_263">B.1&#12288;&#32534;&#20889; Dockerfile</h2><p>&#20808;&#26469;&#30475;&#30475;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#65292;&#30452;&#25509;&#32534;&#20889;&#19968;&#20010; Dockfile&#65292;&#23558;&#25171;&#21253;&#22909;&#30340; Fat Jar &#25991;&#20214;&#22797;&#21046;&#21040;&#38236;&#20687;&#20013;&#65292;&#28982;&#21518;&#36890;&#36807; <code>docker</code> &#21629;&#20196;&#25191;&#34892;&#26500;&#24314;&#12290;&#27492;&#22788;&#65292;&#25105;&#20204;&#20173;&#28982;&#20197;&#31532; 10 &#31456;&#30340; binarytea-jwt-auth &#20316;&#20026;&#20363;&#23376; <span class="&#27880;&#37322;&#32534;&#21495;">1</span>&#65292;&#22312;&#39033;&#30446;&#30446;&#24405;&#20013;&#28155;&#21152;&#19968;&#20010; Dockerfile &#25991;&#20214;&#65292;&#20855;&#20307;&#20869;&#23481;&#22914;&#20195;&#30721;&#31034;&#20363; B-1 &#25152;&#31034;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">1</span>&#36825;&#20010;&#20363;&#23376;&#22312; app2/binarytea &#39033;&#30446;&#20013;&#12290;&#34429;&#28982;&#25171;&#21253; Docker &#38236;&#20687;&#24182;&#27809;&#26377;&#20160;&#20040;&#29305;&#27530;&#35201;&#27714;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#29992;&#31532; 16 &#31456;&#26368;&#21518;&#30340;&#20363;&#23376;&#65292;&#20294;&#20026;&#20102;&#20445;&#25345;&#38468;&#24405;&#37096;&#20998;&#30340;&#32479;&#19968;&#65292;&#36824;&#26159;&#36873;&#25321;&#20102;&#31532; 10 &#31456;&#30340;&#20363;&#23376;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; B-1</strong>&#12288;&#19968;&#20010;&#31616;&#21333;&#30340; Dockerfile &#31034;&#20363;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>FROM openjdk:11
ARG JAR_FILE
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]</code></pre><p>&#22312;&#36825;&#20010;&#25991;&#20214;&#20013;&#65292;&#25105;&#20204;&#19968;&#20849;&#20570;&#20102;&#22235;&#20214;&#20107;&#65306;</p><p>(1) &#25351;&#23450;&#20102;&#22522;&#30784;&#38236;&#20687;&#65292;&#36825;&#37324;&#36873;&#25321;&#20102; OpenJDK 11 &#30340;&#23448;&#26041;&#38236;&#20687;&#65307;</p><p>(2) &#22768;&#26126;&#20102;&#19968;&#20010; <code>JAR_FILE</code> &#21442;&#25968;&#65292;&#20195;&#34920;&#25105;&#20204;&#35201;&#22797;&#21046;&#21040;&#38236;&#20687;&#20013;&#30340; Jar &#25991;&#20214;&#65307;</p><p>(3) &#23558;&#25351;&#23450;&#30340; Jar &#25991;&#20214;&#22797;&#21046;&#21040; app.jar&#65307;</p><p>(4) &#25351;&#23450;&#38236;&#20687;&#21551;&#21160;&#30340;&#20837;&#21475;&#65292;&#20351;&#29992;&#21629;&#20196; <code>java -jar /app.jar</code><span class="&#27880;&#37322;&#32534;&#21495;">2</span>&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">2</span>&#36825;&#37324;&#21482;&#26159;&#26368;&#31616;&#21333;&#30340;&#19968;&#26465;&#21551;&#21160;&#21629;&#20196;&#65292;&#23454;&#38469;&#30340;&#21629;&#20196;&#21487;&#20197;&#24456;&#22797;&#26434;&#65292;&#20854;&#20013;&#38656;&#35201;&#25351;&#23450;&#21508;&#31181; JVM &#21442;&#25968;&#12290;</p><p>&#36825;&#21482;&#26159;&#19968;&#20010;&#24456;&#31616;&#21333;&#30340; Dockerfile&#65292;&#24863;&#20852;&#36259;&#30340;&#21516;&#23398;&#21487;&#20197;&#21442;&#32771;&#23448;&#26041;&#25991;&#26723;&#65292;&#20102;&#35299;&#26356;&#22810;&#30340;&#25351;&#20196;&#65292;&#34920; B-1 &#20013;&#32599;&#21015;&#20102;&#19968;&#20123;&#24120;&#29992;&#30340;&#20869;&#23481;&#12290;</p><p><strong>&#34920; B-1&#12288;&#19968;&#20123;&#24120;&#29992;&#30340; Dockerfile &#25351;&#20196;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#25351;&#20196;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#26684;&#24335; <span class="&#27880;&#37322;&#32534;&#21495;">3</span></p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ARG</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ARG &lt;name&gt;[=&lt;default value&gt;]</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#23450;&#20041;&#26500;&#24314;&#26102;&#21487;&#22312;&#21629;&#20196;&#20013;&#20256;&#20837;&#30340;&#21442;&#25968;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>CMD</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>CMD ["executable","param1","param2"]</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#23481;&#22120;&#30340;&#40664;&#35748;&#25191;&#34892;&#21629;&#20196;&#65292;Dockerfile &#20013;&#21482;&#33021;&#26377;&#19968;&#20010;&#26377;&#25928;&#30340; <code>CMD</code> &#25351;&#20196;&#65292;&#22914;&#26524;&#26377;&#22810;&#26465;&#65292;&#21017;&#26368;&#21518;&#19968;&#26465;&#20250;&#29983;&#25928;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>COPY</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#23558;&#25991;&#20214;&#22797;&#21046;&#21040;&#30446;&#26631;&#20301;&#32622;&#65292;&#30446;&#26631;&#20301;&#32622;&#21487;&#20197;&#26159;&#32477;&#23545;&#36335;&#24452;&#65292;&#20063;&#21487;&#20197;&#26159;&#30456;&#23545;&#20110; <code>WORKDIR</code> &#30340;&#30456;&#23545;&#36335;&#24452;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ENTRYPOINT</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ENTRYPOINT ["executable", "param1", "param2"]</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#23481;&#22120;&#36816;&#34892;&#26102;&#30340;&#21629;&#20196;&#65292;Dockerfile &#20013;&#21482;&#33021;&#26377;&#19968;&#20010;&#26377;&#25928;&#30340; <code>ENTRYPOINT</code> &#25351;&#20196;&#65292;&#22914;&#26524;&#26377;&#22810;&#26465;&#65292;&#21017;&#26368;&#21518;&#19968;&#26465;&#20250;&#29983;&#25928;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ENV</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>ENV &lt;key&gt;=&lt;value&gt; ...</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#29615;&#22659;&#21464;&#37327;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>EXPOSE</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>EXPOSE &lt;port&gt;[/&lt;protocol&gt;] [&lt;port&gt;/&lt;protocol&gt;...]</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#23481;&#22120;&#35201;&#30417;&#21548;&#30340;&#31471;&#21475;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>FROM</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#21021;&#22987;&#21270;&#26500;&#24314;&#36807;&#31243;&#65292;&#20026;&#21518;&#32493;&#25351;&#20196;&#35774;&#32622;&#22522;&#30784;&#38236;&#20687;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>LABEL</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#20026;&#38236;&#20687;&#28155;&#21152;&#26631;&#31614;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>RUN</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>RUN &lt;command&gt;</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#22312;&#38236;&#20687;&#30340;&#24403;&#21069;&#23618;&#19978;&#25191;&#34892;&#21629;&#20196;&#65292;&#21253;&#21547;&#25191;&#34892;&#32467;&#26524;&#30340;&#38236;&#20687;&#20250;&#34987;&#29992;&#20110; Dockerfile &#20013;&#30340;&#21518;&#32493;&#27493;&#39588;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>VOLUME</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>VOLUME &lt; &#25346;&#36733;&#28857; &gt; ...</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#19968;&#20010;&#25110;&#22810;&#20010;&#25346;&#36733;&#28857;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>WORKDIR</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>WORKDIR &lt; &#36335;&#24452; &gt;</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#24037;&#20316;&#36335;&#24452;</p></td>
</tr>
</tbody>
</table><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">3</span>&#27880;&#24847;&#65292;&#36825;&#37324;&#30340;&#26684;&#24335;&#24182;&#19981;&#23436;&#25972;&#65292;&#26377;&#30340;&#25351;&#20196;&#26377;&#22810;&#31181;&#26684;&#24335;&#65292;&#34920;&#26684;&#20013;&#21482;&#21015;&#20986;&#20102;&#20854;&#20013;&#30340;&#19968;&#31181;&#12290;</p><blockquote>
<p><strong>&#33590;&#27463;&#26102;&#38388;&#65306;&#22914;&#20309;&#36873;&#25321;&#22522;&#30784; Java Docker &#38236;&#20687;</strong></p>
<p>&#22312;&#26500;&#24314;&#38236;&#20687;&#26102;&#65292;&#38656;&#35201;&#36873;&#25321;&#22522;&#30784;&#38236;&#20687;&#65292;&#19968;&#33324;&#20844;&#21496;&#37117;&#20250;&#32500;&#25252;&#19968;&#20010;&#20869;&#37096;&#30340;&#22522;&#30784;&#38236;&#20687;&#65292;&#25552;&#20379;&#26368;&#22522;&#26412;&#30340;&#21151;&#33021;&#12290;&#20316;&#20026;&#19968;&#20010; Java &#31243;&#24207;&#65292;&#33258;&#28982;&#22312;&#36816;&#34892;&#26102;&#38656;&#35201; Java &#29615;&#22659;&#65292;&#36890;&#24120;&#20250;&#23433;&#35013; JDK&#12290;&#26377;&#20123;&#22330;&#26223;&#19979;&#65292;&#20986;&#20110;&#23433;&#20840;&#32771;&#34385;&#65292;&#20063;&#20250;&#38480;&#21046;&#21482;&#23433;&#35013; JRE&#12290;</p>
<p>&#22312; Docker Hub &#19978;&#65292;&#25105;&#20204;&#33021;&#25214;&#21040;&#19981;&#21516; Java &#21457;&#34892;&#29256;&#30340;&#38236;&#20687;&#65292;&#22914;&#26524;&#27809;&#26377;&#24378;&#21046;&#35201;&#27714;&#65292;&#20063;&#21487;&#20197;&#32771;&#34385;&#29992;&#34920; B-2 &#20013;&#30340;&#38236;&#20687;&#20316;&#20026;&#22522;&#30784;&#65292;&#20877;&#36827;&#34892;&#23450;&#21046;&#12290;&#20363;&#22914;&#65292;&#36816;&#34892;&#22312; AWS &#19978;&#65292;&#21487;&#20197;&#36873;&#25321; Amazon &#30340; Corretto&#65307;&#35201;&#29992;&#26469;&#36305; SAP &#30340;&#26381;&#21153;&#65292;&#21017;&#21487;&#20197;&#32771;&#34385; SapMachine&#12290;</p>
<p><strong>&#34920; B-2&#12288;&#19968;&#20123;&#19981;&#21516; Java &#21457;&#34892;&#29256;&#30340;&#38236;&#20687;</strong></p>
<table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#38236;&#20687;&#21517;&#31216;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#21457;&#34892;&#29256;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#20379;&#24212;&#21830;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">openjdk</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">OpenJDK</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Oracle</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">amazoncorretto</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Corretto</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Amazon</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">eclipse-temurin</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Temurin</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Eclipse</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">ibm-semeru-runtimes</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Semeru</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">IBM</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">sapmachine</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">SapMachine</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">SAP</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">azul/zulu-openjdk</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Zulu</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Azul</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">dragonwell/dragonwell<span class="&#27880;&#37322;&#32534;&#21495;">4</span></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">Dragonwell&#65288;&#40857;&#20117;&#65289;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#38463;&#37324;&#24052;&#24052;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">konajdk/konajdk</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">KonaJDK</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#33150;&#35759;</p></td>
</tr>
</tbody>
</table>
<p>&#34920;&#20013;&#30340;&#38236;&#20687;&#37117;&#25552;&#20379;&#20102;&#19981;&#21516; Java &#29256;&#26412;&#30340;&#38236;&#20687;&#65292;&#36890;&#36807; Tag &#21487;&#20197;&#36873;&#25321;&#29256;&#26412;&#12290;<span class="&#27880;&#37322;&#32534;&#21495;">5</span> &#27492;&#22806;&#65292;&#19981;&#23569;&#38236;&#20687;&#30340;&#26631;&#31614;&#20013;&#36824;&#26377; <code>-alpine</code> &#23383;&#26679;&#65292;&#36825;&#26159;&#22522;&#20110; Alpine Linux &#25171;&#21253;&#30340;&#38236;&#20687;&#12290;Alpine Linux &#30340;&#38236;&#20687;&#20250;&#27604;&#19968;&#33324; Linux &#35201;&#23567;&#19981;&#23569;&#65292;&#20294;&#30001;&#20110;&#23427;&#20351;&#29992;&#30340;&#26159; musl C &#24211;&#32780;&#19981;&#26159; glibc &#24211;&#65292;&#25152;&#20197;&#26377;&#20123;&#36719;&#20214;&#30340;&#36816;&#34892;&#21487;&#33021;&#20250;&#26377;&#38382;&#39064;&#12290;OpenJDK &#20013;&#30340; Portola &#39033;&#30446;&#23601;&#26159;&#19987;&#38376;&#29992;&#26469;&#25903;&#25345; OpenJDK &#30340; Alpine &#31227;&#26893;&#30340;&#65292;&#35813;&#39033;&#30446;&#23578;&#22788;&#20110;&#26089;&#26399;&#38454;&#27573;&#65292;&#36824;&#19981;&#33021;&#29992;&#20110;&#29983;&#20135;&#29615;&#22659;&#65292;&#25152;&#20197;&#24314;&#35758;&#22823;&#23478;&#24910;&#37325;&#36873;&#25321;&#24102; <code>-alpine</code> &#23383;&#26679;&#30340;&#26631;&#31614;&#12290;</p>
<p>&#20551;&#35774;&#35201;&#29992; Amazon Corretto 17 &#30340;&#29256;&#26412;&#65292;&#22312; Dockerfile &#20013;&#21487;&#20197;&#36825;&#26679;&#26469;&#20889;&#65306;</p>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>FROM amazoncorretto:17</code></pre>
<p>&#35201;&#30452;&#25509;&#25289;&#21462;&#38236;&#20687;&#65292;&#21017;&#21487;&#20197;&#25191;&#34892;&#65306;</p>
<pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>docker pull amazoncorretto:17</code></pre>
</blockquote><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">4</span>&#38463;&#37324;&#30340; Dragonwell &#24182;&#26410;&#23448;&#26041;&#21457;&#24067;&#22312; Docker Hub &#19978;&#65292;&#32780;&#26159;&#23448;&#26041;&#21457;&#24067;&#22312;&#38463;&#37324;&#20113;&#30340; Docker Registry &#19978;&#65292;&#25289;&#21462;&#38236;&#20687;&#26102;&#38656;&#35201;&#22312;&#38236;&#20687;&#21069;&#28155;&#21152;&#21069;&#32512; <code>registry.cn-shanghai.aliyuncs.com</code>&#12290;&#20855;&#20307;&#21487;&#21442;&#32771; Dragonwell &#23448;&#26041;&#25991;&#26723;&#12290;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">5</span>&#25130;&#33267;&#26412;&#20070;&#32534;&#20889;&#26102;&#65292;&#38463;&#37324;&#30340; Dragonwell &#21644;&#33150;&#35759;&#30340; KonaJDK &#38236;&#20687;&#21482;&#26377; Java 8 &#21644; 11 &#21487;&#20379;&#36873;&#25321;&#65292;&#20854;&#20182;&#30340;&#20960;&#20010;&#21457;&#34892;&#29256;&#21017;&#25903;&#25345; 8&#12289;11&#12289;17 &#31561;&#19981;&#21516;&#29256;&#26412;&#12290;</p><h2 id="nav_point_264">B.2&#12288;&#26500;&#24314;&#24182;&#36816;&#34892;&#38236;&#20687;</h2><p>&#36890;&#36807; Dockerfile &#26500;&#24314;&#38236;&#20687;&#30340;&#26041;&#27861;&#21313;&#20998;&#31616;&#21333;&#65292;&#30452;&#25509;&#21033;&#29992; <code>docker build</code> &#21629;&#20196;&#21363;&#21487;&#65292;&#22312;&#39033;&#30446;&#30446;&#24405;&#20013;&#65292;&#25191;&#34892;&#22914;&#19979;&#21629;&#20196;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker build --build-arg JAR_FILE=target/binarytea-0.0.1-SNAPSHOT.jar -t learning.spring/binarytea .</code></pre><p>&#21629;&#20196;&#25191;&#34892;&#21518;&#20250;&#30475;&#21040;&#31867;&#20284;&#19979;&#38754;&#30340;&#36755;&#20986;&#65288;&#22914;&#26524;&#26159;&#31532;&#19968;&#27425;&#25191;&#34892;&#65292;&#36824;&#38656;&#35201;&#31561;&#24453;&#21508;&#31181;&#38236;&#20687;&#30340;&#19979;&#36733;&#65292;&#20250;&#33457;&#19968;&#20123;&#26102;&#38388; <span class="&#27880;&#37322;&#32534;&#21495;">6</span>&#65289;&#65306;</p><p class="&#27880;&#37322;&#20869;&#23481;"><span class="&#27880;&#37322;&#32534;&#21495;&#19979;">6</span>&#30452;&#25509;&#20174; Docker Hub &#19979;&#36733;&#26377;&#26102;&#36895;&#24230;&#24456;&#24930;&#65292;&#21487;&#20197;&#32771;&#34385;&#37197;&#32622;&#38463;&#37324;&#20113;&#12289;&#33150;&#35759;&#20113;&#25110;&#20013;&#31185;&#22823;&#30340;&#22269;&#20869;&#38236;&#20687;&#31449;&#28857;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>[+] Building 0.6s (7/7) FINISHED
 =&gt; [internal] load build definition from Dockerfile                                                0.0s
 =&gt; =&gt; transferring dockerfile: 36B                                                                 0.0s
 =&gt; [internal] load .dockerignore                                                                   0.0s
 =&gt; =&gt; transferring context: 2B                                                                     0.0s
 =&gt; [internal] load metadata for docker.io/library/openjdk:11                                       0.6s
 =&gt; [1/2] FROM docker.io/library/openjdk:11@sha256:33c346c637ebb17823cbeda4d4e5601
 c66262752dadcae559a03b090f6505a47                                                                  0.0s
 =&gt; [internal] load build context                                                                   0.0s
 =&gt; =&gt; transferring context: 85B                                                                    0.0s
 =&gt; CACHED [2/2] COPY target/binarytea-0.0.1-SNAPSHOT.jar app.jar                                   0.0s
 =&gt; exporting to image                                                                              0.0s
 =&gt; =&gt; exporting layers                                                                             0.0s
 =&gt; =&gt; writing image sha256:1ead3f3b24e24d2ab9d3dbe76b85b8c20db7574935a1b688924e7c313e01a92e        0.0s
 =&gt; =&gt; naming to learning.spring/binarytea                                                          0.0s</code></pre><p>&#34920; B-3 &#32599;&#21015;&#20102; <code>build</code> &#21629;&#20196;&#30340;&#19968;&#20123;&#24120;&#29992;&#21442;&#25968;&#65292;&#26356;&#22810;&#20449;&#24687;&#21487;&#20197;&#26597;&#30475; Docker &#30340;&#23448;&#26041;&#25991;&#26723;&#12290;</p><p><strong>&#34920; B-3&#12288;<code>docker build</code> &#21629;&#20196;&#30340;&#19968;&#20123;&#24120;&#29992;&#21442;&#25968;</strong></p><table border="1" width="90%">
<thead>
<tr>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#21442;&#25968;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#40664;&#35748;&#20540;</p></th>
<th><p class="&#34920;&#22836;&#21333;&#20803;&#26684;">&#35828;&#26126;</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--tag</code> &#25110; <code>-t</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#38236;&#20687;&#30340;&#21517;&#31216;&#19982;&#26631;&#31614;&#65292;&#26684;&#24335;&#26159; <code>name:tag</code></p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--file</code> &#25110; <code>-f</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#24403;&#21069;&#20301;&#32622;&#30340; Dockerfile</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25351;&#23450;&#35201;&#29992;&#20110;&#26500;&#24314;&#30340; Dockerfile</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--build-arg</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#35774;&#32622;&#26500;&#24314;&#26102;&#20351;&#29992;&#30340;&#21442;&#25968;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--label</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#35774;&#32622;&#38236;&#20687;&#30340;&#20803;&#25968;&#25454;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--quiet</code> &#25110; <code>-q</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#25233;&#21046;&#26500;&#24314;&#26102;&#30340;&#36755;&#20986;&#20449;&#24687;</p></td>
</tr>
<tr>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;"><code>--no-cache</code></p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#160;</p></td>
<td><p class="&#34920;&#26684;&#21333;&#20803;&#26684;">&#26500;&#24314;&#26102;&#19981;&#20351;&#29992;&#32531;&#23384;</p></td>
</tr>
</tbody>
</table><p>&#23436;&#25104;&#26500;&#24314;&#21518;&#65292;&#36890;&#36807;&#19979;&#38754;&#30340;&#21629;&#20196;&#23601;&#33021;&#22312;&#26412;&#22320;&#21551;&#21160;&#19968;&#20010; BinaryTea &#26381;&#21153;&#20102;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker run -d -p 8080:8080 --name binarytea learning.spring/binarytea</code></pre><h2 id="nav_point_265">B.3&#12288;&#26500;&#24314;&#20998;&#23618;&#38236;&#20687;</h2><p>&#25226; Fat Jar &#20316;&#20026;&#19968;&#20010;&#25972;&#20307;&#25171;&#21253;&#22312;&#38236;&#20687;&#37324;&#65292;&#24847;&#21619;&#30528;&#21518;&#32493;&#27599;&#27425;&#26356;&#26032;&#37117;&#38656;&#35201;&#23436;&#25972;&#25289;&#21462;&#22522;&#30784;&#38236;&#20687;&#20197;&#22806;&#30340;&#20869;&#23481;&#12290;&#20294;&#23454;&#38469;&#19978;&#65292;&#24212;&#29992;&#31995;&#32479;&#30340;&#21457;&#24067;&#26356;&#22810;&#26102;&#20505;&#21482;&#26159;&#35843;&#25972;&#20102;&#20195;&#30721;&#65292;&#23545;&#20854;&#20381;&#36182;&#30340;&#35843;&#25972;&#30456;&#23545;&#36739;&#23569;&#65292;&#32780;&#21319;&#32423; Spring &#30456;&#20851;&#29256;&#26412;&#30340;&#24773;&#20917;&#23601;&#26356;&#23569;&#20102;&#12290;&#22914;&#26524;&#25105;&#20204;&#33021;&#25226;&#36825;&#20123;&#20869;&#23481;&#20998;&#25104;&#38236;&#20687;&#20013;&#30340;&#19981;&#21516;&#23618;&#26469;&#23384;&#25918;&#65292;&#37027;&#22312;&#26356;&#26032;&#26102;&#65292;&#24456;&#26377;&#21487;&#33021;&#23601;&#21482;&#38656;&#35201;&#25289;&#21462;&#19994;&#21153;&#20195;&#30721;&#37096;&#20998;&#12290;</p><p>Spring Boot &#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#20998;&#23618;&#24037;&#20855; spring-boot-jarmode-layertools&#65292;&#23427;&#40664;&#35748;&#20250;&#23558; Fat Jar &#23637;&#24320;&#65292;&#20998;&#25104;&#22914;&#19979;&#22235;&#23618;&#65306;</p><ul>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">dependencies&#65292;&#25918;&#32622;&#24050;&#27491;&#24335;&#21457;&#24067;&#30340;&#21508;&#31181;&#20381;&#36182;&#65292;&#37117;&#22312; BOOT-INF/lib &#19979;&#65307;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">spring-boot-loader&#65292;&#25918;&#32622; Spring Boot &#21551;&#21160;&#30456;&#20851;&#30340;&#20869;&#23481;&#65292;&#37117;&#22312; org/springframework/boot/loader &#19979;&#65307;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">snapshot-dependencies&#65292;&#25918;&#32622;&#24555;&#29031;&#29256;&#26412;&#30340;&#21508;&#31181;&#20381;&#36182;&#65292;&#37117;&#22312; BOOT-INF/lib &#19979;&#65307;</li>
<li class="&#31532;1&#32423;&#26080;&#24207;&#21015;&#34920;">application&#65292;&#25918;&#32622;&#24212;&#29992;&#30340;&#21508;&#31181;&#31867;&#21644;&#36164;&#28304;&#65292;&#37117;&#22312; META-INF &#21644; BOOT-INF/classes &#19979;&#12290;</li>
</ul><p>&#22312; Dockerfile &#20013;&#27599;&#25191;&#34892;&#19968;&#27425; <code>COPY</code> &#25351;&#20196;&#65292;&#37117;&#20250;&#26032;&#24314;&#19968;&#23618;&#65292;&#21487;&#20197;&#33258;&#24049;&#25226; Fat Jar &#23637;&#24320;&#22797;&#21046;&#22810;&#27425;&#65292;&#26377;&#20102; spring-boot-jarmode-layertools&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#23427;&#26469;&#23637;&#24320; Fat Jar&#12290;&#36890;&#36807;&#22914;&#19979;&#21629;&#20196;&#21487;&#20197;&#23637;&#24320;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; java -Djarmode=layertools -jar target/binarytea-0.0.1-SNAPSHOT.jar extract</code></pre><p>&#25105;&#20204;&#23545; Dockerfile &#31245;&#20316;&#35843;&#25972;&#65292;&#23558;&#26500;&#24314;&#21160;&#20316;&#20998;&#25104;&#20004;&#37096;&#20998;&#65292;&#20808;&#23637;&#24320; Fat Jar&#65292;&#28982;&#21518;&#20998;&#22235;&#23618;&#22797;&#21046;&#25991;&#20214;&#65292;&#23558;&#36825;&#20010;&#25991;&#20214;&#21629;&#21517;&#20026; Dockerfile-layering&#65292;&#20855;&#20307;&#22914;&#20195;&#30721;&#31034;&#20363; B-2 &#25152;&#31034;&#12290;</p><blockquote>
<p><strong>&#20195;&#30721;&#31034;&#20363; B-2</strong>&#12288;Dockerfile-layering &#25991;&#20214;&#20869;&#23481;</p>
</blockquote><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>FROM openjdk:11 as builder
WORKDIR application
ARG JAR_FILE
COPY ${JAR_FILE} app.jar
RUN java -Djarmode=layertools -jar app.jar extract

FROM openjdk:11
WORKDIR application
COPY --from=builder application/dependencies/ ./
COPY --from=builder application/spring-boot-loader/ ./
COPY --from=builder application/snapshot-dependencies/ ./
COPY --from=builder application/application/ ./
ENTRYPOINT ["java", "org.springframework.boot.loader.JarLauncher"]</code></pre><p>&#35813;&#25991;&#20214;&#23545;&#24212;&#30340;&#26500;&#24314;&#21629;&#20196;&#22914;&#19979;&#65288;&#36890;&#36807; <code>-f</code> &#25351;&#23450;&#20102;&#35201;&#20351;&#29992;&#30340; Dockerfile&#65289;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker build --build-arg JAR_FILE=target/binarytea-0.0.1-SNAPSHOT.jar -f Dockerfile-layering -t
learning.spring/binarytea .</code></pre><p>&#22312;&#36816;&#34892;&#38236;&#20687;&#21518;&#65292;&#21487;&#20197;&#29992;&#22914;&#19979;&#21629;&#20196;&#36827;&#20837;&#36816;&#34892;&#26102;&#30340;&#23481;&#22120;&#65292;&#21487;&#20197;&#30475;&#21040;&#25991;&#20214;&#31995;&#32479;&#37324;&#30340;&#20869;&#23481;&#12290;&#36830;&#25509;&#36827;&#20837;&#23481;&#22120;&#21518;&#65292;&#25105;&#20204;&#24050;&#32463;&#22312; /application &#30446;&#24405;&#37324;&#20102;&#65292;&#36825;&#23601;&#26159; <code>WORKDIR</code> &#25351;&#23450;&#30340;&#20301;&#32622;&#65292;&#23637;&#24320;&#21518;&#30340;&#20869;&#23481;&#20840;&#22312; /application &#30446;&#24405;&#37324;&#12290;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; docker run -p 8080:8080 -d --name binarytea learning.spring/binarytea
c22898aa9901cd9909dd07515d62c8256c07a7b3e951c7da25541c4a854e7613
&#9656; docker exec -it binarytea /bin/bash
root@c22898aa9901:/application# ls
BOOT-INF META-INF org
root@c22898aa9901:/application# ls BOOT-INF/
classes classpath.idx layers.idx lib</code></pre><h2 id="nav_point_266">B.4&#12288;&#20854;&#20182;&#25171;&#21253;&#26041;&#24335;</h2><p>Spring Boot &#36824;&#25903;&#25345;&#20351;&#29992; Spring Boot Maven Plugin &#30340;&#26041;&#24335;&#36827;&#34892; Docker &#38236;&#20687;&#26500;&#24314;&#65292;&#26080;&#39035;&#32534;&#20889; Dockerfile&#65292;&#30452;&#25509;&#36890;&#36807;&#22914;&#19979;&#30340;&#21629;&#20196;&#23601;&#33021;&#26500;&#24314;&#20986;&#19968;&#20010; Docker &#38236;&#20687;&#65306;</p><pre class="&#20195;&#30721;&#26080;&#34892;&#21495;"><code>&#9656; mvn spring-boot:build-image</code></pre><p>&#25152;&#26377;&#19982;&#38236;&#20687;&#26500;&#24314;&#30456;&#20851;&#30340;&#37197;&#32622;&#65292;&#37117;&#21487;&#20197;&#25918;&#22312; pom.xml &#20013; spring-boot-maven-plugin &#30340; <code>&lt;configuration/&gt;</code> &#20013;&#12290;&#35813;&#25554;&#20214;&#20250;&#36890;&#36807; Cloud Native Buildpacks &#23436;&#25104;&#25171;&#21253;&#24037;&#20316;&#65292;&#22312;&#36825;&#20010;&#36807;&#31243;&#20013;&#20250;&#36890;&#36807;&#32593;&#32476;&#19979;&#36733;&#24456;&#22810;&#20869;&#23481;&#65292;&#40664;&#35748;&#29992;&#30340;&#26159; BellSoft &#30340; Liberica OpenJDK&#12290;&#19981;&#24471;&#19981;&#25552;&#30340;&#26159;&#22312;&#24403;&#21069;&#30340;&#32593;&#32476;&#29615;&#22659;&#19979;&#65292;&#25972;&#20010;&#30340;&#19979;&#36733;&#21644;&#26500;&#24314;&#36807;&#31243;&#21487;&#33021;&#38750;&#24120;&#30340;&#24930;&#65292;&#32780;&#19988;&#26497;&#23481;&#26131;&#20986;&#38382;&#39064;&#12290;&#27492;&#22806;&#65292;&#35813;&#25554;&#20214;&#30340;&#33258;&#23450;&#20041;&#37197;&#32622;&#20063;&#19981;&#22815;&#28789;&#27963;&#65292;&#21487;&#33021;<strong>&#19981;&#26159;</strong>&#26500;&#24314;&#30340;&#26368;&#20339;&#36873;&#25321;&#12290;</p><p>&#25105;&#20204;&#20063;&#21487;&#20197;&#36873;&#25321; Spotify &#30340; dockerfile-maven-plugin &#26469;&#36827;&#34892;&#26500;&#24314;&#65292;&#23427;&#20381;&#28982;&#38656;&#35201;&#32534;&#20889; Dockerfile&#65292;&#20294;&#21487;&#20197;&#23454;&#29616;&#19968;&#20123;&#33258;&#21160;&#21270;&#30340;&#26500;&#24314;&#19982;&#21457;&#24067;&#24037;&#20316;&#65292;&#24863;&#20852;&#36259;&#30340;&#21516;&#23398;&#21487;&#20197;&#36890;&#36807;&#23448;&#26041;&#25991;&#26723;&#20102;&#35299;&#26356;&#22810;&#20449;&#24687;&#12290;</p><p>&#32508;&#21512;&#26469;&#30475;&#65292;&#32534;&#20889; Dockerfile &#38543;&#21518;&#36890;&#36807; <code>docker build</code> &#21629;&#20196;&#26500;&#24314;&#38236;&#20687;&#65292;&#22522;&#26412;&#33021;&#22815;&#24212;&#20184;&#22823;&#37096;&#20998;&#22330;&#26223;&#12290;&#36890;&#36807;&#25345;&#32493;&#38598;&#25104;&#35774;&#26045;&#33021;&#22815;&#23558;&#24212;&#29992;&#26500;&#24314;&#12289;Docker &#38236;&#20687;&#26500;&#24314;&#12289;&#38236;&#20687;&#21457;&#24067;&#19982;&#37096;&#32626;&#31561;&#21160;&#20316;&#23436;&#25972;&#22320;&#38598;&#25104;&#21040;&#19968;&#36215;&#12290;</p><br style="page-break-after:always"/><div style="page-break-after:always"></div>